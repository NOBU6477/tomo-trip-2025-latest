<script>
// ウィンドウロード時に実行するスクリプト
window.addEventListener('load', function() {
  console.log('ウィンドウロード時の修正を実行します');
  
  // 新規登録ボタン
  const registerBtn = document.querySelector('a.btn.btn-warning');
  if (registerBtn) {
    console.log('ロード時: 新規登録ボタンを見つけました');
    registerBtn.onclick = function(e) {
      e.preventDefault();
      console.log('ロード時: 新規登録ボタンがクリックされました');
      
      const userTypeModal = document.getElementById('userTypeModal');
      if (userTypeModal) {
        // バックドロップをクリア
        document.querySelectorAll('.modal-backdrop').forEach(function(el) {
          if (el.parentNode) el.parentNode.removeChild(el);
        });
        
        // 他のモーダルを閉じる
        document.querySelectorAll('.modal.show').forEach(function(modal) {
          modal.classList.remove('show');
          modal.style.display = 'none';
        });
        
        // 新しいバックドロップを作成
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        backdrop.style.opacity = '0.25';
        document.body.appendChild(backdrop);
        
        // モーダルを表示
        userTypeModal.classList.add('show');
        userTypeModal.style.display = 'block';
        userTypeModal.setAttribute('aria-modal', 'true');
        userTypeModal.removeAttribute('aria-hidden');
        
        document.body.classList.add('modal-open');
        console.log('ロード時: ユーザータイプモーダルを表示しました');
      }
      return false;
    };
  }
});
</script>
