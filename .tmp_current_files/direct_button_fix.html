<script>
// ページ読み込み完了後に実行
document.addEventListener('DOMContentLoaded', function() {
  // ナビゲーションバーを探す
  const navbar = document.querySelector('.navbar-nav, .nav');
  if (navbar) {
    console.log('ナビゲーションバーを発見');
    
    // 既存の新規登録ボタンを削除（重複防止）
    const existingButtons = navbar.querySelectorAll('.btn-warning');
    existingButtons.forEach(function(btn) {
      btn.parentNode.removeChild(btn);
    });
    
    // 新規登録ボタンを作成
    const registerButton = document.createElement('a');
    registerButton.href = '#';
    registerButton.className = 'btn btn-warning btn-sm ms-2';
    registerButton.textContent = '新規登録';
    
    // クリックイベントを設定
    registerButton.addEventListener('click', function(e) {
      e.preventDefault();
      console.log('直接追加した新規登録ボタンがクリックされました');
      
      // モーダル表示処理
      const userTypeModal = document.getElementById('userTypeModal');
      if (userTypeModal) {
        // 他のモーダルを閉じる
        document.querySelectorAll('.modal.show').forEach(function(modal) {
          modal.classList.remove('show');
          modal.style.display = 'none';
        });
        
        // バックドロップをクリア
        document.querySelectorAll('.modal-backdrop').forEach(function(el) {
          el.parentNode.removeChild(el);
        });
        
        // 新しいバックドロップを作成
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        backdrop.style.opacity = '0.25';
        document.body.appendChild(backdrop);
        
        // モーダルを表示
        userTypeModal.classList.add('show');
        userTypeModal.style.display = 'block';
        userTypeModal.setAttribute('aria-modal', 'true');
        userTypeModal.removeAttribute('aria-hidden');
        
        document.body.classList.add('modal-open');
      }
      
      return false;
    });
    
    // ナビゲーションバーに追加
    navbar.appendChild(registerButton);
    console.log('新規登録ボタンをナビゲーションバーに追加しました');
  }
});
</script>
