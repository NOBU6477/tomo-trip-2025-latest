<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://replit.com https://*.replit.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; img-src 'self' data: blob: https://images.unsplash.com https://*.unsplash.com; font-src 'self' data: https://fonts.gstatic.com https://cdn.jsdelivr.net; connect-src 'self' https://replit.com https://*.replit.com; object-src 'none'; base-uri 'self'; form-action 'self'; frame-src 'self' https://*.replit.dev https://replit.com; report-uri /csp-report;">
    <title>TomoTrip - 地元ガイドと特別な旅を発見</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- CSP compatibility fixes -->
    <script src="env/csp-fix.js"></script>
    <!-- Environment configuration - must be first -->
    <script type="module" src="env/app-config.mjs"></script>
    
    <!-- Build ID and cache cleanup for consistency - CSP compliant -->
    <script src="env/build-id.js"></script>
    <script src="sw-unregister.js"></script>
    
    <!-- Complete error suppression system -->
    <script src="env/csp-fix.js"></script>
    <script src="webgl-fix.js" defer></script>
    <script src="error_suppressor.js" defer></script>
    <script src="management.js" defer></script>
    
    <!-- CSS Load Order: Bootstrap CSS → Local Icons → Custom CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
    <link rel="stylesheet" href="ocean_background.css">
    <link rel="stylesheet" href="assets/css/footer.css">
    <link rel="stylesheet" href="assets/css/auth-modal.css">

    <style>
        .guide-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        /* Chat message styling */
        .max-width-70 {
            max-width: 70%;
        }
        
        #chatMessages {
            min-height: 300px;
        }
        
        #chatMessages::-webkit-scrollbar {
            width: 6px;
        }
        
        #chatMessages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        #chatMessages::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        #chatMessages::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'BIZ UDPGothic', 'Meiryo', sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: bold;
            font-size: 1.5rem;
            color: #333 !important;
            text-decoration: none;
        }

        .logo-container {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: white;
            padding: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        
        .logo-container img {
            width: 52px;
            height: 52px;
            object-fit: contain;
            border-radius: 50%;
            background: white;
            display: block;
        }

        /* Hero Section - Bright Ocean Yacht Background */
        .hero-section {
            position: relative !important;
            height: 100vh !important;
            min-height: 100vh !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            overflow: hidden !important;
        }
        
        /* Background image layer with bright filters */
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('/assets/images/beach-yacht-tourists.jpg');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: scroll;
            /* Moderately bright, natural filters for ocean yacht scene */
            filter: brightness(1.2) contrast(1.05) saturate(1.1);
            z-index: -2;
        }
        
        /* Mobile background fix for English version */
        @media (max-width: 768px) {
            body, html {
                background: url('/assets/images/beach-yacht-tourists.jpg') center center / cover no-repeat scroll !important;
                min-height: 100vh !important;
                width: 100% !important;
            }
            
            .hero-section::before {
                background-attachment: scroll;
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                z-index: -10;
                background: url('/assets/images/beach-yacht-tourists.jpg') center center / cover no-repeat !important;
            }
        }
        
        /* Extra narrow mobile screens */
        @media (max-width: 480px) {
            body, html, .hero-section {
                background: url('/assets/images/beach-yacht-tourists.jpg') center center / cover no-repeat scroll !important;
                min-height: 100vh !important;
                width: 100vw !important;
            }
        }
        
        /* Light overlay for text readability */
        .hero-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.05), rgba(0,100,200,0.1));
            z-index: -1;
        }
        
        /* Ensure content is visible */
        .hero-section .container,
        .hero-section .row,
        .hero-section .col-12,
        .hero-section .text-center {
            position: relative !important;
            z-index: 20 !important;
        }

        /* Language Switcher - Center Position */
        .language-switcher-center {
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 0;
            z-index: 100;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border-radius: 25px;
            overflow: hidden;
        }

        .lang-btn-jp, .lang-btn-en {
            padding: 15px 30px;
            border: none;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            color: white;
        }

        /* レスポンシブデザイン - モバイル対応 */
        @media (max-width: 768px) {
            .language-switcher-center {
                top: 20%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90%;
                max-width: 320px;
            }
            
            .lang-btn-jp, .lang-btn-en {
                padding: 12px 20px;
                font-size: 14px;
                min-width: 100px;
                flex: 1;
            }
        }

        @media (max-width: 480px) {
            .language-switcher-center {
                top: 18%;
                width: 95%;
                max-width: 280px;
            }
            
            .lang-btn-jp, .lang-btn-en {
                padding: 10px 15px;
                font-size: 13px;
                min-width: 80px;
            }
        }

        .lang-btn-jp {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
        }

        .lang-btn-en {
            background: linear-gradient(135deg, #4287f5, #64a8ff);
        }

        .lang-btn-jp:hover {
            background: linear-gradient(135deg, #ff5252, #ff7979);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255,107,107,0.4);
        }

        .lang-btn-en:hover {
            background: linear-gradient(135deg, #3367d6, #5a9cff);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66,135,245,0.4);
        }

        /* Hero Content */
        .hero-content {
            text-align: center;
            color: white;
            z-index: 50;
            max-width: 800px;
            padding: 0 20px;
            margin-top: 150px;
        }

        .hero-title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 1.5rem;
        }

        .hero-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            padding: 8px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-logo img {
            width: 64px;
            height: 64px;
            object-fit: contain;
            border-radius: 50%;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-hero {
            padding: 15px 35px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 35px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .btn-primary-hero {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .btn-primary-hero:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,123,255,0.4);
        }

        .btn-outline-hero {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-outline-hero:hover {
            background: white;
            color: #333;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,255,255,0.3);
        }

        /* Guide Cards */
        .guide-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            height: 100%;
        }

        .guide-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }

        .guide-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .guide-card-body {
            padding: 1.5rem;
        }

        .guide-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .guide-location {
            color: #6c757d;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .guide-languages {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .language-badge {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1976d2;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .guide-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stars {
            color: #ffc107;
        }

        .guide-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #28a745;
            margin-bottom: 1rem;
        }

        .guide-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-guide {
            flex: 1;
            padding: 0.8rem;
            border-radius: 10px;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .btn-view {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .btn-view:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
        }

        .btn-bookmark {
            background: linear-gradient(135deg, #ffc107, #ffb300);
            color: white;
        }

        .btn-bookmark:hover {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            transform: translateY(-2px);
        }

        /* Right Side Sponsor Buttons */
        .sponsor-buttons {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
        }

        .sponsor-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            min-width: 140px;
            text-align: center;
        }

        .sponsor-btn:hover {
            background: linear-gradient(135deg, #218838, #1ea584);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        .sponsor-btn.login-btn {
            background: linear-gradient(135deg, #007bff, #0056b3);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .sponsor-btn.login-btn:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }

        /* Management Center Button */
        .management-center {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffc107, #ffb300);
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 193, 7, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .management-center:hover {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(255, 193, 7, 0.5);
        }

        /* Mobile Responsive - Complete Version */
        @media (max-width: 768px) {
            /* Basic structure adjustments */
            body {
                overflow-x: hidden;
            }
            
            .container {
                padding-left: 15px;
                padding-right: 15px;
            }
            
            /* Navigation adjustments */
            .navbar {
                padding: 8px 0;
            }
            
            .navbar-brand {
                font-size: 1.1rem;
            }
            
            .navbar .d-flex {
                flex-direction: row;
                align-items: center;
                gap: 8px;
                width: auto;
            }
            
            .navbar .btn {
                font-size: 12px;
                padding: 6px 12px;
                white-space: nowrap;
            }
            
            .dropdown-menu {
                min-width: 140px !important;
                right: 0;
                left: auto;
            }
            
            /* Hero section adjustments */
            .hero-section {
                min-height: 100vh;
                padding: 20px 0;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            
            .hero-content {
                text-align: center;
                padding: 0 20px;
                max-width: 100%;
            }
            
            .hero-content h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            
            .hero-content p {
                font-size: 1rem;
                margin-bottom: 2rem;
                line-height: 1.6;
            }
            
            /* Language switcher */
            .language-switcher-center {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                margin: 0 auto 2rem auto;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 10px;
                width: 100%;
                padding: 0 20px;
                box-sizing: border-box;
            }
            
            .lang-btn-jp, .lang-btn-en {
                width: 100%;
                max-width: 280px;
                font-size: 14px;
                padding: 10px 16px;
                box-sizing: border-box;
                border-radius: 25px;
            }
            
            /* Hero buttons */
            .hero-buttons {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 12px;
                margin: 0 auto;
                padding: 0 20px;
                width: 100%;
                max-width: 280px;
            }
            
            .btn-hero {
                width: 100%;
                font-size: 14px;
                padding: 12px 20px;
                box-sizing: border-box;
                border-radius: 25px;
            }
            
            /* Sponsor buttons */
            .sponsor-buttons {
                position: relative;
                right: auto;
                top: auto;
                transform: none;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                margin: 20px auto;
                padding: 0 20px;
                gap: 10px;
                max-width: 280px;
                width: 100%;
            }
            
            .sponsor-btn {
                width: 100%;
                font-size: 14px;
                padding: 10px 16px;
                box-sizing: border-box;
                border-radius: 20px;
            }
            
            /* Main content */
            .main-content {
                padding: 40px 0 !important;
            }
            
            .filter-section {
                padding: 20px !important;
                margin: 0 10px;
            }
            
            .filter-section .d-flex {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            
            .filter-section .form-select,
            .filter-section .form-control {
                width: 100% !important;
                min-width: auto !important;
                font-size: 14px;
                padding: 10px;
                box-sizing: border-box;
            }
            
            /* Guide cards */
            .guide-card {
                margin-bottom: 15px;
            }
            
            .guide-actions {
                flex-direction: column;
                gap: 8px;
            }
            
            .btn-guide {
                width: 100%;
                padding: 10px;
                font-size: 13px;
            }
            
            /* Management center button - Bottom center for mobile */
            .management-center {
                bottom: 15px;
                left: 50%;
                right: auto;
                transform: translateX(-50%);
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            /* Sponsor buttons mobile position */
            .sponsor-buttons-mobile {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 999;
                display: flex;
                gap: 10px;
                flex-direction: row;
            }
            
            .sponsor-buttons-mobile .sponsor-btn {
                font-size: 12px;
                padding: 8px 12px;
                border-radius: 20px;
                min-width: auto;
                width: auto;
            }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
            .hero-content h1 {
                font-size: 1.8rem;
            }
            
            .hero-content p {
                font-size: 0.9rem;
            }
            
            .navbar-brand {
                font-size: 1rem;
            }
            
            .navbar .btn {
                font-size: 11px;
                padding: 5px 10px;
            }
        }

        /* Utility classes */
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading animation */
        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/">
                <div class="logo-container">
                    <img src="assets/images/tomotrip-logo.png" alt="TomoTrip Logo" />
                </div>
                TomoTrip
            </a>
            
            <div class="d-flex">
                <button class="btn btn-outline-success me-2" id="dashboardBtn" style="display: none;">
                    <i class="bi bi-shop"></i> <span class="d-none d-md-inline">Dashboard</span>
                </button>
                <div class="dropdown me-2" style="position: relative;">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="loginDropdown" aria-expanded="false">
                        ログイン
                    </button>
                    <div id="customLoginDropdown" class="dropdown-menu" style="display: none; position: absolute; top: 100%; left: 0; z-index: 9999; background: white; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); min-width: 160px;">
                        <button class="dropdown-item" id="directTouristLoginBtn" type="button" style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer; color: #333;">観光客ログイン</button>
                        <button class="dropdown-item" id="directGuideLoginBtn" type="button" style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer; color: #333;">ガイドログイン</button>
                        <button class="dropdown-item" id="sponsorLoginBtn" type="button" style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer; color: #333;">協賛店ログイン</button>
                    </div>
                </div>
                <button class="btn btn-primary" id="registerBtn">新規登録</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <!-- Language Switcher -->
        <div class="language-switcher-center">
            <button class="lang-btn-jp" onclick="location.href='index.html'">🇯🇵 日本語</button>
            <button class="lang-btn-en" onclick="location.href='index-en.html'">🇺🇸 English</button>
        </div>
        
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="hero-content text-center">
                        <div class="hero-title-container mb-4">
                            <div class="hero-logo mb-3">
                                <img src="assets/images/tomotrip-logo.png" alt="TomoTrip Logo" class="modal-logo" />
                            </div>
                            <h1 class="display-4 fw-bold text-white">特別な旅の体験を</h1>
                        </div>
                        <p class="lead text-white mb-5">地元ガイドと一緒に観光客が知らない隠れた名所を発見しよう</p>
                        <div class="hero-buttons">
                            <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
                                <button class="btn-hero btn-primary-hero btn" id="findGuideBtn" style="background: linear-gradient(135deg, #667eea, #764ba2); border: none; padding: 15px 30px; border-radius: 25px; font-weight: 500; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; min-width: 150px; color: white;">ガイドを探す</button>
                                <button class="btn-hero btn-outline-hero btn" id="contactBtn" style="background: linear-gradient(135deg, #f093fb, #f5576c); border: none; padding: 15px 30px; border-radius: 25px; font-weight: 500; box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3); transition: all 0.3s ease; min-width: 150px; color: white;">お問い合わせ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Desktop Right Side Buttons -->
    <div class="sponsor-buttons d-none d-lg-flex position-fixed" style="right: 20px; top: 50%; transform: translateY(-50%); z-index: 999; flex-direction: column; gap: 10px;">
        <button class="sponsor-btn" id="sponsorRegBtn" style="background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; border: none; border-radius: 25px; padding: 12px 20px; font-weight: 500; font-size: 14px; box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3); transition: all 0.3s ease; white-space: nowrap;">店舗登録</button>
        <button class="sponsor-btn login-btn" id="sponsorLoginBtn" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 25px; padding: 12px 20px; font-weight: 500; font-size: 14px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; white-space: nowrap;">ログイン</button>
    </div>

    <!-- Mobile Bottom Buttons -->
    <div class="sponsor-buttons-mobile d-lg-none position-fixed" style="bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 999;">
        <div class="d-flex gap-2">
            <button class="sponsor-btn" id="sponsorRegBtnMobile" style="background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; border: none; border-radius: 20px; padding: 10px 16px; font-weight: 500; font-size: 12px; box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3); transition: all 0.3s ease;">店舗登録</button>
            <button class="sponsor-btn login-btn" id="sponsorLoginBtnMobile" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 20px; padding: 10px 16px; font-weight: 500; font-size: 12px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s ease;">ログイン</button>
        </div>
    </div>

    <!-- Management Center Button - Desktop -->
    <button class="management-center d-none d-lg-flex" id="managementCenterBtn">
        <i class="bi bi-archive"></i>
    </button>

    <!-- Management Center Button - Mobile -->
    <button class="management-center d-lg-none position-fixed" id="managementCenterBtnMobile" style="bottom: 80px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; font-size: 20px;">
        <i class="bi bi-archive"></i>
    </button>

    <!-- Registration Selection Modal -->
    <div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div class="modal-header border-0" style="background: linear-gradient(135deg, #007bff, #0056b3); color: white; border-radius: 15px 15px 0 0;">
                    <h5 class="modal-title fw-bold" id="registrationModalLabel">
                        <i class="bi bi-person-plus me-2"></i>新規登録
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <p class="mb-4 text-center">どちらとして登録しますか？</p>
                    <div class="d-grid gap-3">
                        <button type="button" class="btn btn-outline-primary btn-lg" id="touristRegBtn" style="border-radius: 25px; padding: 15px; font-weight: 500;">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-camera me-3" style="font-size: 1.5rem;"></i>
                                <div class="text-start">
                                    <div class="fw-bold">観光客として登録</div>
                                    <small class="text-muted">ガイドを探してツアーを予約</small>
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-outline-success btn-lg" id="guideRegBtn" style="border-radius: 25px; padding: 15px; font-weight: 500;">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-map me-3" style="font-size: 1.5rem;"></i>
                                <div class="text-start">
                                    <div class="fw-bold">ガイドとして登録</div>
                                    <small class="text-muted">地元の魅力を観光客に紹介</small>
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-outline-warning btn-lg" id="sponsorRegModalBtn" style="border-radius: 25px; padding: 15px; font-weight: 500;">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="bi bi-shop me-3" style="font-size: 1.5rem;"></i>
                                <div class="text-start">
                                    <div class="fw-bold">協賛店として登録</div>
                                    <small class="text-muted">店舗情報を登録して集客アップ</small>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" style="padding-top: 50px; min-height: 100vh; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
        
        <!-- Filter Section -->
        <section class="filter-section bg-white shadow-sm mb-4" style="padding: 30px; border-radius: 20px; margin: 20px;">
            <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
                <div class="d-flex flex-wrap gap-3">
                    <select class="form-select" id="regionFilter" style="min-width: 150px;">
                        <option value="">すべての地域</option>
                        <option value="東京都">東京都</option>
                        <option value="大阪府">大阪府</option>
                        <option value="京都府">京都府</option>
                        <option value="神奈川県">神奈川県</option>
                        <option value="愛知県">愛知県</option>
                        <option value="福岡県">福岡県</option>
                        <option value="北海道">北海道</option>
                        <option value="沖縄県">沖縄県</option>
                    </select>
                    
                    <select class="form-select" id="languageFilter" style="min-width: 150px;">
                        <option value="">すべての言語</option>
                        <option value="日本語">日本語</option>
                        <option value="英語">英語</option>
                        <option value="中国語">中国語</option>
                        <option value="韓国語">韓国語</option>
                        <option value="スペイン語">スペイン語</option>
                        <option value="フランス語">フランス語</option>
                    </select>
                    
                    <select class="form-select" id="priceFilter" style="min-width: 150px;">
                        <option value="">すべての価格</option>
                        <option value="low">¥5,000以下</option>
                        <option value="medium">¥5,000 - ¥10,000</option>
                        <option value="high">¥10,000以上</option>
                    </select>
                    
                    <input type="text" class="form-control" id="keywordFilter" placeholder="キーワード検索..." style="min-width: 200px;">
                </div>
                
                <div class="d-flex gap-2">
                    <button class="btn btn-primary" id="searchBtn" style="border-radius: 25px; padding: 10px 20px;">検索</button>
                    <button class="btn btn-outline-secondary" id="resetBtn" style="border-radius: 25px; padding: 10px 20px;">リセット</button>
                </div>
            </div>
        </section>

        <!-- Loading indicator -->
        <div id="loadingIndicator" style="display: none; text-align: center; padding: 20px;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2 text-primary">ガイドを読み込み中...</p>
        </div>

        <!-- Guides Section -->
        <section id="guides-section" class="guides-section" style="padding: 20px;">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold text-dark mb-3">
                        <i class="bi bi-people me-3" style="color: #007bff;"></i>12人のガイドが見つかりました
                    </h2>
                    <p class="lead text-muted">
                        <span class="badge bg-info text-white me-2" style="border-radius: 15px; padding: 8px 16px;">
                            <i class="bi bi-clock me-1"></i>総計: 12人
                        </span>
                        <span class="text-primary">（全12人中）</span>
                    </p>
                </div>
                
                <div class="row g-4" id="guideCardsContainer">
                    <!-- Guides will be populated here -->
                </div>
                
                <!-- Pagination -->
                <div class="text-center mt-5">
                    <nav aria-label="ガイド一覧ページネーション">
                        <ul class="pagination justify-content-center" id="pagination">
                            <li class="page-item disabled">
                                <span class="page-link">← 前のページ</span>
                            </li>
                            <li class="page-item active">
                                <span class="page-link">1</span>
                            </li>
                            <li class="page-item">
                                <span class="page-link">（1-12表示中）</span>
                            </li>
                            <li class="page-item disabled">
                                <span class="page-link">次のページ →</span>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer-section">
        <div class="container py-5">
            <div class="row g-4">
                <!-- Company Info -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="footer-brand mb-3">
                        <img src="assets/images/tomotrip-logo.png" alt="TomoTrip Logo" class="footer-logo me-2">
                        <span class="text-white fw-bold">TomoTrip</span>
                    </div>
                    <p class="text-muted small">
                        信頼できる地元ガイドと旅行者をつなぎ、日本全国での本格的で安全な旅行体験を提供します。
                    </p>
                </div>
                
                <!-- Services -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-white mb-3">サービス</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#guides-section" class="text-muted text-decoration-none hover-link" onclick="scrollToGuides()">ガイドを探す</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showGuideRegistrationModal()">ガイドになる</a></li>
                        <li class="mb-2"><a href="/tourist-registration-simple.html" class="text-muted text-decoration-none hover-link" target="_blank">観光客登録</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showManagementCenter()">予約管理</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showTourRegistration()">ツアー登録</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showSponsorRegistration()">協賛店登録</a></li>
                    </ul>
                </div>
                
                <!-- Support -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-white mb-3">サポート</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showFAQ()">FAQ</a></li>
                        <li class="mb-2"><a href="chat.html" class="text-muted text-decoration-none hover-link">お問い合わせ</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showSafety()">安全・保険</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showCancellation()">キャンセルポリシー</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showHelp()">ヘルプセンター</a></li>
                    </ul>
                </div>
                
                <!-- Legal -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-white mb-3">法的事項</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showAbout()">会社案内</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showTerms()">利用規約</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showPrivacy()">プライバシーポリシー</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showCookies()">Cookie Policy</a></li>
                        <li class="mb-2"><a href="#" class="text-muted text-decoration-none hover-link" onclick="showCompliance()">法的遵守</a></li>
                    </ul>
                </div>
                
                <!-- Contact Info -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <h6 class="text-white mb-3">連絡先</h6>
                    <ul class="list-unstyled text-muted small">
                        <li class="mb-2">info@tomotrip.com</li>
                        <li class="mb-2">+81-3-1234-5678</li>
                        <li class="mb-2">Mon-Fri 9:00-18:00 JST</li>
                        <li class="mb-2">
                            <i class="bi bi-geo-alt"></i> 〒100-0001 Tokyo, Chiyoda, Chiyoda 1-1
                        </li>
                    </ul>
                    
                    <div class="mt-3">
                        <h6 class="text-white small">Emergency Support:</h6>
                        <p class="text-muted small mb-0">
                            090-9999-8888<br>
                            (24/7 Available)
                        </p>
                    </div>
                </div>
            </div>
            
            <hr class="my-4 border-secondary">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-muted small">
                        © 2025 TomoTrip. All rights reserved.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0 text-muted small">
                        Made with ❤️ for travelers and local guides
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Contact Us Modal -->
    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" style="border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div class="modal-header border-0" style="background: linear-gradient(135deg, #20c997, #17a2b8); color: white; border-radius: 15px 15px 0 0;">
                    <h5 class="modal-title fw-bold" id="contactModalLabel">
                        <i class="bi bi-envelope me-2"></i>お問い合わせ
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="contactForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="contactName" class="form-label">お名前 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="contactName" required style="border-radius: 10px;">
                            </div>
                            <div class="col-md-6">
                                <label for="contactEmail" class="form-label">メールアドレス <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="contactEmail" required style="border-radius: 10px;">
                            </div>
                            <div class="col-12">
                                <label for="contactSubject" class="form-label">件名 <span class="text-danger">*</span></label>
                                <select class="form-select" id="contactSubject" required style="border-radius: 10px;">
                                    <option value="">件名を選択してください</option>
                                    <option value="general">一般的なお問い合わせ</option>
                                    <option value="booking">予約に関するお問い合わせ</option>
                                    <option value="guide">ガイド登録について</option>
                                    <option value="sponsor">協賛店登録について</option>
                                    <option value="technical">技術的な問題</option>
                                    <option value="other">その他</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label for="contactMessage" class="form-label">メッセージ <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="contactMessage" rows="5" required style="border-radius: 10px;" placeholder="詳細をお聞かせください..."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0 p-4 pt-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 25px; padding: 10px 20px;">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="sendContactBtn" style="border-radius: 25px; padding: 10px 20px; background: linear-gradient(135deg, #20c997, #17a2b8); border: none;">
                        <i class="bi bi-send me-2"></i>送信
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Guide Registration Modal -->
    <div class="modal fade" id="guideRegistrationModal" tabindex="-1" aria-labelledby="guideRegistrationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" style="border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div class="modal-header border-0" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border-radius: 15px 15px 0 0;">
                    <h5 class="modal-title fw-bold" id="guideRegistrationModalLabel">
                        <i class="bi bi-map me-2"></i>ガイド登録
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="guideRegistrationForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="guideName" class="form-label">ガイド名 <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="guideName" required style="border-radius: 10px;">
                            </div>
                            <div class="col-md-6">
                                <label for="guideEmail" class="form-label">メールアドレス <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" id="guideEmail" required style="border-radius: 10px;">
                            </div>
                            <div class="col-md-6">
                                <label for="guidePhone" class="form-label">電話番号 <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="guidePhone" required style="border-radius: 10px;">
                            </div>
                            <div class="col-md-6">
                                <label for="guideLocation" class="form-label">活動地域 <span class="text-danger">*</span></label>
                                <select class="form-select" id="guideLocation" required style="border-radius: 10px;">
                                    <option value="">地域を選択</option>
                                    <option value="東京都">東京都</option>
                                    <option value="大阪府">大阪府</option>
                                    <option value="京都府">京都府</option>
                                    <option value="神奈川県">神奈川県</option>
                                    <option value="愛知県">愛知県</option>
                                    <option value="福岡県">福岡県</option>
                                    <option value="北海道">北海道</option>
                                    <option value="沖縄県">沖縄県</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="guideLanguages" class="form-label">対応言語 <span class="text-danger">*</span></label>
                                <div class="form-check-container" style="max-height: 120px; overflow-y: auto; border: 1px solid #ced4da; border-radius: 10px; padding: 10px;">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="日本語" id="lang-japanese">
                                        <label class="form-check-label" for="lang-japanese">日本語</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="英語" id="lang-english">
                                        <label class="form-check-label" for="lang-english">英語</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="中国語" id="lang-chinese">
                                        <label class="form-check-label" for="lang-chinese">中国語</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="韓国語" id="lang-korean">
                                        <label class="form-check-label" for="lang-korean">韓国語</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="スペイン語" id="lang-spanish">
                                        <label class="form-check-label" for="lang-spanish">スペイン語</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="フランス語" id="lang-french">
                                        <label class="form-check-label" for="lang-french">フランス語</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="guidePrice" class="form-label">料金 (円/日) <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="guidePrice" required min="1000" max="50000" style="border-radius: 10px;">
                            </div>
                            <div class="col-12">
                                <label for="guideDescription" class="form-label">自己紹介・経験 <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="guideDescription" rows="4" required style="border-radius: 10px;" placeholder="あなたの経験、専門知識、ガイドとしての魅力を教えてください..."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0 p-4 pt-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 25px; padding: 10px 20px;">キャンセル</button>
                    <button type="button" class="btn btn-success" id="guideRegistrationSubmitBtn" style="border-radius: 25px; padding: 10px 20px; background: linear-gradient(135deg, #28a745, #20c997); border: none;">
                        <i class="bi bi-check-circle me-2"></i>ガイドとして登録
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sponsor Login Modal -->
    <div class="modal fade" id="sponsorLoginModal" tabindex="-1" aria-labelledby="sponsorLoginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div class="modal-header border-0" style="background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white; border-radius: 15px 15px 0 0;">
                    <h5 class="modal-title fw-bold" id="sponsorLoginModalLabel">
                        <i class="bi bi-shop me-2"></i>協賛店ログイン
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="sponsorLoginForm">
                        <div class="mb-3">
                            <label for="sponsorStoreName" class="form-label">店舗名 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="sponsorStoreName" required style="border-radius: 10px;">
                        </div>
                        <div class="mb-3">
                            <label for="sponsorEmail" class="form-label">メールアドレス <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="sponsorEmail" required style="border-radius: 10px;">
                        </div>
                        <div class="mb-3">
                            <label for="sponsorPhone" class="form-label">電話番号 <span class="text-danger">*</span></label>
                            <input type="tel" class="form-control" id="sponsorPhone" required style="border-radius: 10px;">
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0 p-4 pt-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 25px; padding: 10px 20px;">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="sponsorLoginSubmitBtn" style="border-radius: 25px; padding: 10px 20px; background: linear-gradient(135deg, #4ecdc4, #44a08d); border: none;">
                        <i class="bi bi-box-arrow-in-right me-2"></i>ログイン
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Management Center Modal -->
    <div class="modal fade" id="managementCenterModal" tabindex="-1" aria-labelledby="managementCenterModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content" style="border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                <div class="modal-header border-0" style="background: linear-gradient(135deg, #ffc107, #ffb300); color: white; border-radius: 15px 15px 0 0;">
                    <h5 class="modal-title fw-bold" id="managementCenterModalLabel">
                        <i class="bi bi-archive me-2"></i>管理センター
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="row g-4">
                        <!-- Bookmarks Section -->
                        <div class="col-md-6">
                            <div class="management-section bg-light p-4 rounded">
                                <h6 class="fw-bold mb-3">
                                    <i class="bi bi-bookmark-star text-warning me-2"></i>ブックマーク済みガイド
                                </h6>
                                <div id="bookmarkedGuides" class="guide-list">
                                    <p class="text-muted">ブックマークしたガイドはありません</p>
                                </div>
                                <button class="btn btn-outline-warning btn-sm mt-2" id="clearBookmarksBtn">
                                    <i class="bi bi-trash me-1"></i>すべて削除
                                </button>
                            </div>
                        </div>
                        
                        <!-- Comparison Section -->
                        <div class="col-md-6">
                            <div class="management-section bg-light p-4 rounded">
                                <h6 class="fw-bold mb-3">
                                    <i class="bi bi-arrows-collapse text-info me-2"></i>比較リスト
                                    <span class="badge bg-info ms-2" id="comparisonCount">0/3</span>
                                </h6>
                                <div id="comparisonGuides" class="guide-list">
                                    <p class="text-muted">比較するガイドを選択してください（最大3人）</p>
                                </div>
                                <div class="mt-2">
                                    <button class="btn btn-outline-info btn-sm me-2" id="clearComparisonBtn">
                                        <i class="bi bi-trash me-1"></i>すべて削除
                                    </button>
                                    <button class="btn btn-info btn-sm" id="compareBtn" disabled>
                                        <i class="bi bi-eye me-1"></i>比較表示
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Storage Information -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="storage-info bg-light p-3 rounded">
                                <h6 class="fw-bold mb-2">
                                    <i class="bi bi-hdd me-2"></i>ストレージ情報
                                </h6>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <small class="text-muted">ブックマーク容量:</small>
                                        <div class="progress" style="height: 6px;">
                                            <div class="progress-bar bg-warning" id="bookmarkProgress" style="width: 0%"></div>
                                        </div>
                                        <small id="bookmarkUsage">0 KB 使用</small>
                                    </div>
                                    <div class="col-md-4">
                                        <small class="text-muted">比較リスト容量:</small>
                                        <div class="progress" style="height: 6px;">
                                            <div class="progress-bar bg-info" id="comparisonProgress" style="width: 0%"></div>
                                        </div>
                                        <small id="comparisonUsage">0 KB 使用</small>
                                    </div>
                                    <div class="col-md-4">
                                        <small class="text-muted">総容量:</small>
                                        <div class="progress" style="height: 6px;">
                                            <div class="progress-bar bg-success" id="totalProgress" style="width: 0%"></div>
                                        </div>
                                        <small id="totalUsage">0 KB / 5 MB</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    
    <!-- Application Scripts -->
    <script type="module" src="assets/js/data/guides-data.mjs"></script>
    <script type="module" src="assets/js/events/event-handlers.mjs"></script>
    <script type="module" src="assets/js/main.mjs"></script>

    <script>
        // Enhanced sponsor functionality with database integration
        document.addEventListener('DOMContentLoaded', function() {
            // Sponsor login functionality
            const sponsorLoginBtn = document.getElementById('sponsorLoginSubmitBtn');
            if (sponsorLoginBtn) {
                sponsorLoginBtn.addEventListener('click', function() {
                    const storeName = document.getElementById('sponsorStoreName').value.trim();
                    const email = document.getElementById('sponsorEmail').value.trim();
                    const phone = document.getElementById('sponsorPhone').value.trim();
                    
                    if (!storeName || !email || !phone) {
                        alert('すべての項目を入力してください。');
                        return;
                    }
                    
                    // Simple validation for demonstration
                    if (!email.includes('@')) {
                        alert('有効なメールアドレスを入力してください。');
                        return;
                    }
                    
                    console.log('Sponsor login successful:', storeName);
                    
                    // Close modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('sponsorLoginModal'));
                    modal.hide();
                    
                    // Show success and redirect
                    setTimeout(() => {
                        showModal(`
                            <div class="modal fade" id="successModal" tabindex="-1">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content" style="border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.2);">
                                        <div class="modal-header border-0" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border-radius: 15px 15px 0 0;">
                                            <h5 class="modal-title fw-bold">✅ 協賛店ログイン成功</h5>
                                        </div>
                                        <div class="modal-body p-4 text-center">
                                            <div class="mb-4">
                                                <i class="bi bi-check-circle text-success" style="font-size: 4rem;"></i>
                                            </div>
                                            <h6 class="fw-bold mb-3">${storeName} 様</h6>
                                            <p class="mb-4">ログインが完了しました。<br>店舗管理画面に移動します。</p>
                                            <button class="btn btn-success btn-lg" onclick="window.open('/store-dashboard.html?store=${encodeURIComponent(storeName)}', '_blank')">
                                                <i class="bi bi-shop me-2"></i>店舗管理画面へ
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `);
                        setTimeout(() => {
                            window.open(`/store-dashboard.html?store=${encodeURIComponent(storeName)}`, '_blank');
                        }, 2000);
                    }, 500);
                });
            }
            
            // Enhanced Find Guide button functionality
            const findGuideBtn = document.getElementById('findGuideBtn');
            if (findGuideBtn && !findGuideBtn.getAttribute('data-handler-added')) {
                findGuideBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('🎯 Find Guide button clicked - scrolling to guides section');
                    const guidesSection = document.getElementById('guides-section');
                    if (guidesSection) {
                        guidesSection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }
                });
                findGuideBtn.setAttribute('data-handler-added', 'true');
                console.log('✅ Find Guide button handler added');
            }
            
            // Alternative Find Guide setup for direct scroll (no registration check)
            const findGuideButton = document.querySelector('#findGuideBtn');
            if (findGuideButton) {
                findGuideButton.onclick = function(e) {
                    e.preventDefault();
                    console.log('🎯 Find Guide clicked - scrolling to guides');
                    
                    // Always scroll to guides section (no registration check)
                    const guidesSection = document.getElementById('guides-section');
                    if (guidesSection) {
                        guidesSection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start',
                            inline: 'nearest'
                        });
                    }
                };
                console.log('✅ Find Guide button setup - direct scroll');
            }
        });

        // Utility function to show modals
        function showModal(modalHTML) {
            // Remove existing modal
            const existingModal = document.querySelector('#successModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Add new modal
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = new bootstrap.Modal(document.getElementById('successModal'));
            modal.show();
            
            // Auto close after 5 seconds
            setTimeout(() => {
                modal.hide();
                setTimeout(() => {
                    document.querySelector('#successModal')?.remove();
                }, 300);
            }, 5000);
        }

        // Footer link functions
        function scrollToGuides() {
            const guidesSection = document.getElementById('guides-section');
            if (guidesSection) {
                guidesSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showGuideRegistrationModal() {
            const modal = new bootstrap.Modal(document.getElementById('guideRegistrationModal'));
            modal.show();
        }

        function showManagementCenter() {
            const modal = new bootstrap.Modal(document.getElementById('managementCenterModal'));
            modal.show();
        }

        function showTourRegistration() {
            alert('ツアー登録機能は近日公開予定です。');
        }

        function showSponsorRegistration() {
            window.open('/sponsor-registration.html', '_blank');
        }

        function showFAQ() {
            alert('FAQ機能は近日公開予定です。');
        }

        function showSafety() {
            alert('安全・保険情報は近日公開予定です。');
        }

        function showCancellation() {
            alert('キャンセルポリシーは近日公開予定です。');
        }

        function showHelp() {
            alert('ヘルプセンターは近日公開予定です。');
        }

        function showAbout() {
            alert('会社案内は近日公開予定です。');
        }

        function showTerms() {
            alert('利用規約は近日公開予定です。');
        }

        function showPrivacy() {
            alert('プライバシーポリシーは近日公開予定です。');
        }

        function showCookies() {
            alert('Cookie Policyは近日公開予定です。');
        }

        function showCompliance() {
            alert('法的遵守情報は近日公開予定です。');
        }

        // ==== WORKING GUIDE CARD SYSTEM FROM INDEX.HTML ====
        
        // Default guide data for Japanese page
        const defaultGuides = [
            { id: 1, name: "田中健太", location: "tokyo", rating: 4.8, price: 8000, image: "/assets/img/guides/default-1.svg", languages: ["日本語", "英語"], specialty: "歴史文化", description: "東京の歴史と文化を専門とするガイドです。" },
            { id: 2, name: "佐藤美咲", location: "osaka", rating: 4.9, price: 7500, image: "/assets/img/guides/default-2.svg", languages: ["日本語", "英語", "中国語"], specialty: "グルメ", description: "大阪の美味しいグルメスポットをご案内します。" },
            { id: 3, name: "鈴木一郎", location: "kyoto", rating: 4.7, price: 9000, image: "/assets/img/guides/default-3.svg", languages: ["日本語", "英語"], specialty: "寺院・伝統", description: "京都の寺院と伝統文化の専門ガイドです。" },
            { id: 4, name: "山田花子", location: "osaka", rating: 4.6, price: 7000, image: "/assets/img/guides/default-4.svg", languages: ["日本語", "英語"], specialty: "ショッピング", description: "大阪のショッピングエリアをご案内します。" },
            { id: 5, name: "Johnson Mike", location: "tokyo", rating: 4.8, price: 8500, image: "/assets/img/guides/default-5.svg", languages: ["英語", "日本語"], specialty: "ビジネス", description: "東京のビジネス街と現代文化のガイドです。" },
            { id: 6, name: "李美麗", location: "kyoto", rating: 4.9, price: 8800, image: "attached_assets/image_1754399234136.png", languages: ["中国語", "日本語", "英語"], specialty: "文化・寺院", description: "京都の文化と寺院を詳しくご紹介します。" },
            { id: 7, name: "高橋翔太", location: "hokkaido", rating: 4.7, price: 9500, image: "attached_assets/image_1754399234136.png", languages: ["日本語", "英語"], specialty: "自然・スキー", description: "北海道の自然とスキーのエキスパートです。" },
            { id: 8, name: "Anderson Sarah", location: "okinawa", rating: 4.8, price: 8200, image: "attached_assets/image_1754399234136.png", languages: ["英語", "日本語"], specialty: "ビーチ・ダイビング", description: "沖縄の美しいビーチとダイビングスポットをご案内。" },
            { id: 9, name: "金成民", location: "tokyo", rating: 4.6, price: 7800, image: "attached_assets/image_1754399234136.png", languages: ["韓国語", "日本語", "英語"], specialty: "K-POP・現代文化", description: "東京のK-POPと現代文化のガイドです。" },
            { id: 10, name: "伊藤優子", location: "nara", rating: 4.9, price: 8600, image: "attached_assets/image_1754399234136.png", languages: ["日本語", "英語"], specialty: "鹿・寺院", description: "奈良の鹿と古代寺院の専門ガイドです。" },
            { id: 11, name: "Rodriguez Carlos", location: "hiroshima", rating: 4.7, price: 8300, image: "attached_assets/image_1754399234136.png", languages: ["スペイン語", "日本語", "英語"], specialty: "歴史・平和", description: "広島の歴史と平和の重要性をお伝えします。" },
            { id: 12, name: "中村孝", location: "fukuoka", rating: 4.8, price: 7900, image: "attached_assets/image_1754399234136.png", languages: ["日本語", "英語"], specialty: "ラーメン・地元文化", description: "福岡のラーメンと地元文化をご紹介します。" }
        ];

        // Location mapping
        const locationNames = {
            hokkaido: "北海道", tokyo: "東京都", osaka: "大阪府", kyoto: "京都府", 
            nara: "奈良県", hiroshima: "広島県", fukuoka: "福岡県", okinawa: "沖縄県"
        };

        // Variables for pagination and state
        let currentGuides = defaultGuides;
        let allGuides = defaultGuides;
        let currentPage = 1;
        const guidesPerPage = 12;
        let displayedGuides = [];

        // Get localized text for Japanese page
        function getLocalizedText(key) {
            const translations = {
                viewDetails: '詳細を見る',
                perDay: '1日あたり'
            };
            return translations[key] || key;
        }

        // Generate guide card HTML
        function createGuideCard(guide) {
            return `
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 guide-card" style="border-radius: 15px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
                        <img src="${guide.image}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${guide.name}">
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="card-title mb-1">${guide.name}</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-warning bookmark-btn" data-guide-id="${guide.id}" title="Bookmark">⭐</button>
                                    <button class="btn btn-sm btn-outline-success compare-btn" data-guide-id="${guide.id}" title="Add to compare">✓</button>
                                </div>
                            </div>
                            <div class="mb-2">
                                <span class="badge bg-primary me-1">${locationNames[guide.location] || guide.location}</span>
                                <span class="badge bg-secondary">${guide.specialty}</span>
                            </div>
                            <p class="card-text text-muted small mb-2">${guide.description}</p>
                            <div class="d-flex justify-content-between align-items-center mt-auto">
                                <div>
                                    <span class="text-warning">★</span>
                                    <span class="fw-bold">${guide.rating}</span>
                                </div>
                                <div class="text-end">
                                    <div class="fw-bold text-primary">¥${Number(guide?.price || 0).toLocaleString()}</div>
                                    <small class="text-muted">${getLocalizedText('perDay')}</small>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-primary w-100 view-detail-btn" data-guide-id="${guide.id}" style="border-radius: 25px;">
                                    ${getLocalizedText('viewDetails')}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Display guides with pagination
        function displayGuides(allGuides, page = 1) {
            currentPage = page;
            const startIndex = (page - 1) * guidesPerPage;
            const endIndex = startIndex + guidesPerPage;
            const pageGuides = allGuides.slice(startIndex, endIndex);
            
            displayedGuides = pageGuides;
            const container = document.getElementById('guideCardsContainer');
            if (container) {
                container.innerHTML = pageGuides.map(guide => createGuideCard(guide)).join('');
                
                // Re-add event listeners after DOM update
                setTimeout(() => {
                    addCardEventListeners();
                }, 100);
            }
        }

        // Add event listeners to cards
        function addCardEventListeners() {
            const viewDetailButtons = document.querySelectorAll('.view-detail-btn');
            
            viewDetailButtons.forEach((btn, index) => {
                const guideId = btn.getAttribute('data-guide-id');
                
                // Remove existing listeners
                btn.replaceWith(btn.cloneNode(true));
                const newBtn = document.querySelectorAll('.view-detail-btn')[index];
                
                newBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('🔥 View Details button clicked for guide:', guideId);
                    viewGuideDetail(guideId);
                });
            });

            // Bookmark buttons
            document.querySelectorAll('.bookmark-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const guideId = this.getAttribute('data-guide-id');
                    console.log('Bookmark clicked for guide:', guideId);
                });
            });

            // Compare buttons
            document.querySelectorAll('.compare-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const guideId = this.getAttribute('data-guide-id');
                    console.log('Compare clicked for guide:', guideId);
                });
            });
        }

        // Initialize guide display on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎯 Initializing Japanese guide page');
            currentGuides = defaultGuides;
            allGuides = defaultGuides;
            displayGuides(defaultGuides);
        });

    </script>
</body>
</html>