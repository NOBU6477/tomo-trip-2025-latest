<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ガイド新規登録 | Local Guide</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .registration-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    .step-indicator {
      margin-bottom: 2rem;
    }
    .step-indicator .step {
      display: inline-block;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #e9ecef;
      color: #6c757d;
      text-align: center;
      line-height: 30px;
      margin-right: 1rem;
      font-weight: bold;
    }
    .step-indicator .step.active {
      background-color: #0d6efd;
      color: white;
    }
    .step-indicator .step.completed {
      background-color: #198754;
      color: white;
    }
    .form-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      margin-bottom: 2rem;
    }
    .welcome-section {
      text-align: center;
      margin-bottom: 2rem;
      padding: 2rem;
      background: linear-gradient(135deg, #0d6efd 0%, #0096c7 100%);
      color: white;
      border-radius: 12px;
    }
    .welcome-section h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .benefits-list {
      text-align: left;
      max-width: 400px;
      margin: 0 auto;
    }
    .benefits-list .benefit-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .benefits-list .benefit-item i {
      margin-right: 0.75rem;
      font-size: 1.2rem;
    }
    .form-floating label {
      font-weight: 500;
    }
    .btn-primary {
      padding: 0.75rem 2rem;
      font-weight: 500;
    }
    .back-link {
      color: #6c757d;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      margin-bottom: 2rem;
    }
    .back-link:hover {
      color: #0d6efd;
    }
    .error-message {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    .success-message {
      color: #198754;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="registration-container">
      <!-- 戻るリンク -->
      <a href="index.html" class="back-link">
        <i class="bi bi-arrow-left me-2"></i>
        ホームに戻る
      </a>

      <!-- ウェルカムセクション -->
      <div class="welcome-section">
        <h1><i class="bi bi-map me-3"></i>ガイド新規登録</h1>
        <p class="lead mb-4">あなたの知識と経験を共有して、素晴らしい旅の体験を提供しませんか？</p>
        
        <div class="benefits-list">
          <div class="benefit-item">
            <i class="bi bi-cash-coin"></i>
            <span>あなたのスキルで収入を得る</span>
          </div>
          <div class="benefit-item">
            <i class="bi bi-people"></i>
            <span>世界中の旅行者との出会い</span>
          </div>
          <div class="benefit-item">
            <i class="bi bi-star"></i>
            <span>地域の魅力を世界に発信</span>
          </div>
          <div class="benefit-item">
            <i class="bi bi-calendar-check"></i>
            <span>自由なスケジュール設定</span>
          </div>
        </div>
      </div>

      <!-- ステップインジケーター -->
      <div class="step-indicator text-center">
        <span class="step active">1</span>
        <span>基本情報</span>
        <span class="step">2</span>
        <span>プロフィール詳細</span>
        <span class="step">3</span>
        <span>完了</span>
      </div>

      <!-- 登録フォーム -->
      <div class="form-card">
        <h2 class="mb-4">基本情報を入力してください</h2>
        
        <form id="guide-registration-form">
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="text" class="form-control" id="firstName" name="firstName" placeholder="太郎" required>
                <label for="firstName">名前（名）</label>
              </div>
              <div class="error-message" id="firstName-error"></div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="text" class="form-control" id="lastName" name="lastName" placeholder="山田" required>
                <label for="lastName">名前（姓）</label>
              </div>
              <div class="error-message" id="lastName-error"></div>
            </div>
          </div>

          <div class="mb-3">
            <div class="form-floating">
              <input type="email" class="form-control" id="email" name="email" placeholder="guide@example.com" required>
              <label for="email">メールアドレス</label>
            </div>
            <div class="error-message" id="email-error"></div>
          </div>

          <div class="mb-3">
            <div class="form-floating">
              <input type="tel" class="form-control" id="phone" name="phone" placeholder="090-1234-5678" required>
              <label for="phone">電話番号</label>
            </div>
            <div class="error-message" id="phone-error"></div>
            <small class="text-muted">予約確認や緊急時の連絡に使用します</small>
          </div>

          <div class="mb-3">
            <label for="location" class="form-label">活動エリア</label>
            <select class="form-select" id="location" name="location" required>
              <option value="">エリアを選択してください</option>
              <optgroup label="都道府県">
                <option value="北海道">北海道</option>
                <option value="青森県">青森県</option>
                <option value="岩手県">岩手県</option>
                <option value="宮城県">宮城県</option>
                <option value="秋田県">秋田県</option>
                <option value="山形県">山形県</option>
                <option value="福島県">福島県</option>
                <option value="茨城県">茨城県</option>
                <option value="栃木県">栃木県</option>
                <option value="群馬県">群馬県</option>
                <option value="埼玉県">埼玉県</option>
                <option value="千葉県">千葉県</option>
                <option value="東京都">東京都</option>
                <option value="神奈川県">神奈川県</option>
                <option value="新潟県">新潟県</option>
                <option value="富山県">富山県</option>
                <option value="石川県">石川県</option>
                <option value="福井県">福井県</option>
                <option value="山梨県">山梨県</option>
                <option value="長野県">長野県</option>
                <option value="岐阜県">岐阜県</option>
                <option value="静岡県">静岡県</option>
                <option value="愛知県">愛知県</option>
                <option value="三重県">三重県</option>
                <option value="滋賀県">滋賀県</option>
                <option value="京都府">京都府</option>
                <option value="大阪府">大阪府</option>
                <option value="兵庫県">兵庫県</option>
                <option value="奈良県">奈良県</option>
                <option value="和歌山県">和歌山県</option>
                <option value="鳥取県">鳥取県</option>
                <option value="島根県">島根県</option>
                <option value="岡山県">岡山県</option>
                <option value="広島県">広島県</option>
                <option value="山口県">山口県</option>
                <option value="徳島県">徳島県</option>
                <option value="香川県">香川県</option>
                <option value="愛媛県">愛媛県</option>
                <option value="高知県">高知県</option>
                <option value="福岡県">福岡県</option>
                <option value="佐賀県">佐賀県</option>
                <option value="長崎県">長崎県</option>
                <option value="熊本県">熊本県</option>
                <option value="大分県">大分県</option>
                <option value="宮崎県">宮崎県</option>
                <option value="鹿児島県">鹿児島県</option>
                <option value="沖縄県">沖縄県</option>
              </optgroup>
              <optgroup label="離島・特別エリア">
                <option value="屋久島">屋久島</option>
                <option value="宮古島">宮古島</option>
                <option value="石垣島">石垣島</option>
                <option value="竹富島">竹富島</option>
                <option value="与那国島">与那国島</option>
                <option value="沖縄本島北部">沖縄本島北部</option>
                <option value="小笠原諸島">小笠原諸島</option>
              </optgroup>
            </select>
            <div class="error-message" id="location-error"></div>
          </div>

          <div class="mb-3">
            <div class="form-floating">
              <textarea class="form-control" id="introduction" name="introduction" style="height: 120px" placeholder="簡単な自己紹介"></textarea>
              <label for="introduction">簡単な自己紹介（任意）</label>
            </div>
            <small class="text-muted">あなたの経験や得意分野を簡単に教えてください</small>
          </div>

          <div class="mb-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
              <label class="form-check-label" for="terms">
                <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">利用規約</a>および<a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">プライバシーポリシー</a>に同意します
              </label>
            </div>
            <div class="error-message" id="terms-error"></div>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="bi bi-arrow-right me-2"></i>
              次のステップへ進む
            </button>
          </div>
        </form>
      </div>

      <!-- 既にアカウントをお持ちの方 -->
      <div class="text-center">
        <p class="text-muted">
          既にアカウントをお持ちの方は
          <a href="index.html" data-bs-toggle="modal" data-bs-target="#loginModal">こちらからログイン</a>
        </p>
      </div>
    </div>
  </div>

  <!-- 利用規約モーダル -->
  <div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">利用規約</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <h6>1. サービスの利用について</h6>
          <p>本サービスは、ガイドと旅行者をマッチングするプラットフォームです。</p>
          
          <h6>2. ガイドの責任</h6>
          <p>ガイドは、安全で質の高いサービスを提供する責任があります。</p>
          
          <h6>3. 料金とキャンセル</h6>
          <p>料金の設定とキャンセルポリシーは、ガイドが設定できます。</p>
          
          <h6>4. 禁止事項</h6>
          <p>法律に反する行為、他のユーザーに迷惑をかける行為は禁止されています。</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
        </div>
      </div>
    </div>
  </div>

  <!-- プライバシーポリシーモーダル -->
  <div class="modal fade" id="privacyModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">プライバシーポリシー</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <h6>1. 収集する情報</h6>
          <p>お名前、メールアドレス、電話番号、活動エリアなどの基本情報を収集します。</p>
          
          <h6>2. 情報の利用目的</h6>
          <p>サービスの提供、安全性の確保、カスタマーサポートのために利用します。</p>
          
          <h6>3. 情報の共有</h6>
          <p>法的要請がある場合を除き、第三者と個人情報を共有することはありません。</p>
          
          <h6>4. セキュリティ</h6>
          <p>お客様の個人情報を適切に保護するため、セキュリティ対策を実施しています。</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('guide-registration-form');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // バリデーション
        if (validateForm()) {
          // フォームデータを保存
          saveFormData();
          
          // 次のステップに進む（確実にパラメータを渡す）
          window.location.href = 'guide-profile.html?step=2&mode=registration';
        }
      });
      
      function validateForm() {
        let isValid = true;
        
        // エラーメッセージをクリア
        document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
        
        // 名前（名）の検証
        const firstName = document.getElementById('firstName').value.trim();
        if (!firstName) {
          document.getElementById('firstName-error').textContent = '名前（名）を入力してください';
          isValid = false;
        }
        
        // 名前（姓）の検証
        const lastName = document.getElementById('lastName').value.trim();
        if (!lastName) {
          document.getElementById('lastName-error').textContent = '名前（姓）を入力してください';
          isValid = false;
        }
        
        // メールアドレスの検証
        const email = document.getElementById('email').value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email) {
          document.getElementById('email-error').textContent = 'メールアドレスを入力してください';
          isValid = false;
        } else if (!emailRegex.test(email)) {
          document.getElementById('email-error').textContent = '有効なメールアドレスを入力してください';
          isValid = false;
        }
        
        // 電話番号の検証
        const phone = document.getElementById('phone').value.trim();
        if (!phone) {
          document.getElementById('phone-error').textContent = '電話番号を入力してください';
          isValid = false;
        }
        
        // 活動エリアの検証
        const location = document.getElementById('location').value;
        if (!location) {
          document.getElementById('location-error').textContent = '活動エリアを選択してください';
          isValid = false;
        }
        
        // 利用規約の同意確認
        const terms = document.getElementById('terms').checked;
        if (!terms) {
          document.getElementById('terms-error').textContent = '利用規約に同意してください';
          isValid = false;
        }
        
        return isValid;
      }
      
      function saveFormData() {
        const formData = {
          firstName: document.getElementById('firstName').value.trim(),
          lastName: document.getElementById('lastName').value.trim(),
          email: document.getElementById('email').value.trim(),
          phone: document.getElementById('phone').value.trim(),
          location: document.getElementById('location').value,
          introduction: document.getElementById('introduction').value.trim(),
          registrationStep: 1,
          registrationDate: new Date().toISOString()
        };
        
        // ローカルストレージに保存
        localStorage.setItem('guideRegistrationData', JSON.stringify(formData));
        
        // セッションストレージにも保存
        sessionStorage.setItem('registrationInProgress', 'true');
        sessionStorage.setItem('currentStep', '2');
        
        console.log('基本情報を保存しました:', formData);
      }
    });
  </script>
</body>
</html>