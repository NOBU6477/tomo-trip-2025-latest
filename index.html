<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src 'self' 'unsafe-inline' *;">
  <title>Local Guide - ç‰¹åˆ¥ãªæ—…ã®ä½“é¨“ã‚’</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  
  <style>
    /* Language Switcher */
    .language-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 25px;
      padding: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .lang-btn {
      border: none;
      background: transparent;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      color: #666;
    }
    
    .lang-btn.active {
      background: #4287f5;
      color: white;
    }
    
    .lang-btn:hover {
      background: #f0f7ff;
      color: #4287f5;
    }
    
    .lang-btn.active:hover {
      background: #4287f5;
      color: white;
    }
    
    @media (max-width: 768px) {
      .language-switcher {
        position: relative;
        top: auto;
        right: auto;
        margin: 1rem auto;
        display: flex;
        justify-content: center;
      }
    }
  </style>

  <!-- æ–°ã—ã„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè£…CSS -->
  <style id="new-scroll-css">
    html {
      overflow: visible !important;
      overflow-y: auto !important;
      height: auto !important;
      min-height: 100vh !important;
    }
    
    body {
      overflow-y: auto !important;
      height: auto !important;
      min-height: 100vh !important;
      position: static !important;
      padding-bottom: 50px;
    }
    
    body.modal-open {
      overflow: visible !important;
      overflow-y: auto !important;
      padding-right: 0 !important;
      position: static !important;
    }
    
    .modal-backdrop {
      display: none !important;
    }
  </style>

  <style>
    body {
      background-color: #f8f9fa;
    }
    .navbar-brand {
      font-weight: bold;
    }
    .modal-content {
      border-radius: 0.5rem;
    }
    .section-title {
      border-bottom: 2px solid #0d6efd;
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
    }
    
    /* æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .register-dropdown {
      width: 100%;
      max-width: 320px;
      padding: 0.5rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      animation: fadeInDown 0.3s ease;
      left: auto !important;
      right: 0 !important;
    }
    
    .dropdown-item {
      border-radius: 8px;
      padding: 12px 15px;
      transition: all 0.2s ease;
    }
    
    .dropdown-item:hover {
      background-color: #f0f7ff;
      transform: translateY(-2px);
    }
    
    .register-dropdown {
      min-width: 320px;
      border: 1px solid rgba(0,0,0,0.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      border-radius: 8px;
      padding: 8px 0;
      margin-top: 10px;
      background: white;
    }
    
    .register-dropdown .dropdown-item {
      padding: 12px 16px;
      border: none;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .register-dropdown .dropdown-item:hover {
      background-color: #f8f9fa;
      border-radius: 0;
    }
    
    .register-dropdown .dropdown-item:focus {
      background-color: #f8f9fa;
      box-shadow: none;
    }
    
    .register-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      font-size: 1.2rem;
      margin-right: 12px;
      flex-shrink: 0;
    }
    
    .tourist-icon {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    
    .guide-icon {
      background-color: #e8f5e8;
      color: #388e3c;
    }
    
    .dropdown-divider {
      margin: 8px 16px;
      border-color: #e9ecef;
    }
    
    .register-dropdown .fw-bold {
      font-weight: 600;
      color: #212529;
      margin-bottom: 2px;
      font-size: 14px;
    }
    
    .register-dropdown .text-muted {
      font-size: 12px;
      color: #6c757d !important;
      line-height: 1.3;
      margin: 0;
    }
    
    .register-dropdown > li > .dropdown-item > div:last-child {
      flex: 1;
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®é»’æ ã‚’éè¡¨ç¤ºã«ã™ã‚‹ */
    .debug-info, 
    [style*="position: fixed"][style*="bottom"],
    [style*="position: fixed"][style*="right"],
    [style*="background-color: rgba(0,0,0,0.8)"],
    [style*="background: rgba(0,0,0,0.8)"],
    .replit-debug,
    .debug-overlay,
    div[style*="position: fixed"][style*="z-index"][style*="background"],
    .replit-info {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    .phone-section {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
      padding: 1.5rem;
      margin: 1rem 0;
    }
    .hero-section {
      background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://source.unsplash.com/random/1200x800/?japan,travel');
      background-size: cover;
      background-position: center;
      color: white;
      padding: 5rem 0;
      margin-bottom: 2rem;
    }
    .guide-card {
      transition: transform 0.3s;
      margin-bottom: 1.5rem;
      border-radius: 10px;
      overflow: visible;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .guide-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .guide-image {
      height: 250px;
      object-fit: cover;
      object-position: center;
      border-bottom: 1px solid #eee;
      transition: transform 0.5s ease;
      filter: brightness(0.95);
    }
    .guide-card:hover .guide-image {
      transform: scale(1.05);
      filter: brightness(1.05);
    }
    .badge-verified {
      background-color: #28a745;
      color: white;
      font-size: 0.7rem;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      margin-left: 0.5rem;
    }
    /* èªè¨¼ãƒœã‚¿ãƒ³ã®ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .btn-pulse {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
      }
    }
    /* èªè¨¼ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    #tourist-verify-code-btn,
    #guide-verify-code-btn {
      width: 100%;
      margin-top: 0.5rem;
      transition: all 0.3s ease;
    }
    /* èº«åˆ†è¨¼æ˜æ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */
    .document-preview-container {
      min-height: 50px;
    }
    .document-preview img {
      max-height: 200px;
      width: auto;
      border: 1px solid #dee2e6;
    }
    /* éè¡¨ç¤ºã‚¬ã‚¤ãƒ‰ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .hidden-guide {
      display: none;
    }
    
    /* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    /* æ¤œç´¢çµæœã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å¼·åŒ–ã‚¹ã‚¿ã‚¤ãƒ« */
    #search-results-counter {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 1.2rem;
      font-weight: 700;
      padding: 1rem 2rem;
      border-radius: 50px;
      text-align: center;
      margin: 1.5rem auto;
      max-width: 400px;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: visible;
      animation: counterPulse 2s ease-in-out infinite alternate;
    }
    
    #search-results-counter::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      animation: shimmer 3s ease-in-out infinite;
    }
    
    #search-results-counter::after {
      content: 'ğŸ”';
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      opacity: 0.7;
      z-index: 1;
    }
    
    #search-results-counter {
      padding-left: 3rem !important;
      z-index: 2;
      position: relative;
    }
    
    @keyframes counterPulse {
      0% {
        transform: scale(1);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }
      100% {
        transform: scale(1.02);
        box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
      }
    }
    
    @keyframes shimmer {
      0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
      }
      100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
      }
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
      #search-results-counter {
        font-size: 1rem;
        padding: 0.8rem 1.5rem;
        margin: 1rem auto;
      }
      
      #search-results-counter::after {
        font-size: 1.2rem;
        left: 0.8rem;
      }
    }
    
    /* å¼·åŒ–ã•ã‚ŒãŸã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .guide-card {
      transition: all 0.3s ease;
      border: 2px solid transparent;
      border-radius: 15px !important;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      overflow: visible;
      position: relative;
    }
    
    .guide-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      z-index: 1;
    }
    
    .guide-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      border-color: #667eea;
    }
    
    .guide-card .card-img-top {
      height: 220px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .guide-card:hover .card-img-top {
      transform: scale(1.05);
    }
    
    .guide-card .card-body {
      padding: 1.5rem;
      position: relative;
      z-index: 2;
    }
    
    .guide-card .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 0.8rem;
    }
    
    .guide-card .badge.bg-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .guide-card .guide-location {
      font-size: 1rem;
      color: #6c757d;
      font-weight: 500;
    }
    
    .guide-card .guide-location i {
      color: #667eea;
      font-size: 1.1rem;
    }
    
    .guide-card .card-text {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #495057;
    }
    
    .guide-card .badge.bg-light {
      background: #e3f2fd !important;
      color: #1976d2 !important;
      font-weight: 500;
      border: 1px solid #bbdefb;
    }
    
    .guide-card .text-warning i {
      color: #ffc107 !important;
      text-shadow: 0 1px 3px rgba(255, 193, 7, 0.3);
    }
    
    .guide-card .btn-outline-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .guide-card .btn-outline-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #5a6fd8 0%, #6a42a6 100%);
    }
    
    /* ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“ã®å¼·åŒ– */
    #guides {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 20px;
      padding: 3rem 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 2rem 0;
    }
    
    #guides h2 {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }
    
    .guide-item {
      margin-bottom: 2rem;
      animation: slideInUp 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(30px);
    }
    
    .guide-item:nth-child(1) { animation-delay: 0.1s; }
    .guide-item:nth-child(2) { animation-delay: 0.2s; }
    .guide-item:nth-child(3) { animation-delay: 0.3s; }
    .guide-item:nth-child(4) { animation-delay: 0.4s; }
    .guide-item:nth-child(5) { animation-delay: 0.5s; }
    .guide-item:nth-child(6) { animation-delay: 0.6s; }

    @keyframes slideInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .guide-filter-fadeIn {
      animation: fadeIn 0.4s ease-out forwards;
    }
    
    /* ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã®å¼·åŒ– */
    #load-more-guides {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 600;
      padding: 1rem 2.5rem;
      border-radius: 30px;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
      margin: 2rem auto;
      display: block;
    }
    
    #load-more-guides:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #5a6fd8 0%, #6a42a6 100%);
    }
    
    /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã‚¹ã‚¿ã‚¤ãƒ« */
    .profile-photo-container {
      position: relative;
      width: 150px;
      height: 150px;
      overflow: visible;
      cursor: pointer;
    }
    
    .profile-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.3s ease;
    }
    
    .profile-photo-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 50%;
    }
    
    .profile-photo-overlay i {
      color: white;
      font-size: 2rem;
    }
    
    .profile-photo-container:hover .profile-photo-overlay {
      opacity: 1;
    }
    
    .profile-photo-container:hover .profile-photo {
      transform: scale(1.05);
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã®ã¿ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½è¡¨ç¤º */
    @media (min-width: 768px) {
      .mobile-only {
        display: none !important;
      }
    }

    /* å”è³›åº—åºƒå‘ŠãƒãƒŠãƒ¼ - å³ã‹ã‚‰å·¦ã¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    .sponsor-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 15px 0;
      overflow: visible;
      position: relative;
      white-space: nowrap;
      border-bottom: 3px solid #4f46e5;
    }

    .sponsor-scroll {
      display: inline-block;
      animation: scrollRight 30s linear infinite;
      white-space: nowrap;
    }

    .sponsor-item {
      display: inline-block;
      background: rgba(255, 255, 255, 0.95);
      margin: 0 20px;
      padding: 8px 20px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
      vertical-align: middle;
    }

    .sponsor-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
    }

    .sponsor-logo {
      height: 30px;
      width: auto;
      margin-right: 10px;
      vertical-align: middle;
    }

    .sponsor-text {
      color: #333;
      font-weight: 600;
      font-size: 14px;
      vertical-align: middle;
    }

    .sponsor-offer {
      background: #ff6b6b;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      margin-left: 8px;
      font-weight: bold;
    }

    @keyframes scrollRight {
      0% {
        transform: translateX(100%);
      }
      100% {
        transform: translateX(-100%);
      }
    }
    
    /* ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒãƒŠãƒ¼ã®å¼·åˆ¶è¡¨ç¤º */
    .sponsor-banner {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      height: auto !important;
      min-height: 60px !important;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
      .sponsor-banner {
        padding: 10px 0;
      }
      
      .sponsor-item {
        margin: 0 15px;
        padding: 6px 15px;
      }
      
      .sponsor-text {
        font-size: 12px;
      }
      
      .sponsor-logo {
        height: 25px;
      }
      
      .sponsor-offer {
        font-size: 10px;
        padding: 1px 6px;
      }
    }

    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€æ™‚åœæ­¢ï¼ˆãƒ›ãƒãƒ¼æ™‚ï¼‰ */
    .sponsor-banner:hover .sponsor-scroll {
      animation-play-state: paused;
    }
  </style>
</head>
<body>
  <!-- ã‚¢ãƒ©ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒŠ -->
  <div id="alert-container" style="position: fixed; top: 20px; right: 20px; max-width: 400px; z-index: 9999;"></div>
  
  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ ãƒ­ã‚´ -->
      <a class="navbar-brand d-flex align-items-center" href="/">
        <img src="TomoTripãƒ­ã‚´.png" alt="TomoTrip ãƒ­ã‚´" style="height: 60px; width: auto; border-radius: 15px;" />
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#top">ãƒ›ãƒ¼ãƒ </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#guides">ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#how-it-works">ä½¿ã„æ–¹</a>
          </li>
        </ul>
        
        <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
        <div class="language-switcher me-3">
          <button class="btn btn-outline-light btn-sm lang-btn active">
            ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª
          </button>
          <button class="btn btn-outline-light btn-sm lang-btn" onclick="window.location.href='index-en.html'">
            ğŸ‡ºğŸ‡¸ English
          </button>
        </div>
        
        <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ -->
        <div id="navbar-user-area">
          <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#loginModal">ãƒ­ã‚°ã‚¤ãƒ³</button>
          <button class="btn btn-light" onclick="showRegisterOptions()">æ–°è¦ç™»éŒ²</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section id="top" class="hero-section text-center text-white py-5" style="
    background: linear-gradient(rgba(66, 135, 245, 0.4), rgba(224, 79, 158, 0.4)), 
                url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200&h=800&fit=crop') center/cover;
    position: relative; 
    min-height: 60vh;
  ">
    <!-- è£…é£¾è¦ç´  -->
    <div style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; opacity: 0.3;">
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="position: absolute; width: 300px; height: 300px; top: -50px; left: -50px;">
        <path fill="#FFFFFF" d="M44.7,-76.4C58.8,-69.2,71.8,-59.1,79.6,-45.5C87.4,-31.9,90.2,-15.9,88.1,-1.2C86,13.5,79.1,27,70.8,39.4C62.5,51.8,52.7,63.1,40.4,70.4C28.1,77.8,14.1,81.1,-0.3,81.6C-14.7,82.1,-29.3,79.9,-41,72.5C-52.6,65.2,-61.3,52.8,-68.9,39.7C-76.6,26.6,-83.3,13.3,-84.7,-0.8C-86,-14.9,-82,-29.9,-73.6,-41.5C-65.2,-53.1,-52.5,-61.4,-39.3,-68.7C-26.1,-76,-13.1,-82.3,1.1,-84.1C15.2,-85.8,30.5,-83.7,44.7,-76.4Z" transform="translate(100 100)" />
      </svg>
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="position: absolute; width: 400px; height: 400px; bottom: -150px; right: -100px;">
        <path fill="#FFFFFF" d="M34.6,-59.1C43.5,-53.8,48.7,-41.8,55.8,-30.2C62.8,-18.6,71.7,-7.3,73,5.1C74.4,17.6,68.3,31.2,58.5,40.1C48.7,48.9,35.3,52.9,22.7,56.7C10.2,60.5,-1.5,63.9,-14.6,63.8C-27.8,63.7,-42.4,60,-50.9,50.7C-59.4,41.3,-61.7,26.3,-65.6,11.3C-69.4,-3.7,-74.7,-18.6,-71.1,-31C-67.5,-43.3,-55,-53,-41.7,-57.8C-28.4,-62.5,-14.2,-62.3,-0.6,-61.3C13,-60.3,25.9,-58.3,34.6,-59.1Z" transform="translate(100 100)" />
      </svg>
    </div>

    <!-- TomoTrip Logo -->
    <div style="position: absolute; top: 2%; left: 2%; z-index: 20;">
      <div style="
        width: 140px;
        height: 140px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(10px);
        border: 4px solid rgba(255, 255, 255, 0.3);
      ">
        <img src="TomoTripãƒ­ã‚´.png" alt="TomoTrip" style="
          width: 130px;
          height: 130px;
          object-fit: cover;
          border-radius: 10px;
        ">
      </div>
    </div>
    
    <div class="container position-relative">
      <h1 class="display-4 fw-bold mb-3">ã‚ãªãŸã ã‘ã®ç‰¹åˆ¥ãªæ—…ã‚’</h1>
      <p class="lead mb-4">åœ°å…ƒã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ã€è¦³å…‰ã§ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã„éš ã‚ŒãŸé­…åŠ›ã‚’ä½“é¨“ã—ã¾ã—ã‚‡ã†</p>
      <div class="position-relative">
        <a href="#guides" class="btn btn-light btn-lg">ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</a>
        <button class="btn btn-outline-light btn-lg ms-2" data-bs-toggle="modal" data-bs-target="#contactModal">ãŠå•ã„åˆã‚ã›</button>
        
        <!-- å”è³›åº—å°‚ç”¨ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ï¼ˆå³ä¸‹å°ã•ã‚ï¼‰ -->
        <div class="sponsor-mini-buttons">
          <div class="sponsor-mini-wrapper">
            <button class="sponsor-mini-btn sponsor-register" id="sponsorRegisterBtn" title="å”è³›åº—ç™»éŒ²">
              <i class="bi bi-shop"></i>
              <span>å”è³›åº—ç™»éŒ² ğŸš€</span>
            </button>
            <button class="sponsor-mini-btn sponsor-login" id="sponsorLoginBtn" title="å”è³›åº—ãƒ­ã‚°ã‚¤ãƒ³">
              <i class="bi bi-box-arrow-in-right"></i>
              <span>ãƒ­ã‚°ã‚¤ãƒ³ âœ¨</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- å”è³›åº—åºƒå‘ŠãƒãƒŠãƒ¼ -->
  <div class="sponsor-banner" id="main-sponsor-banner">
    <div class="sponsor-scroll" id="main-sponsor-scroll">
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=100&h=60&fit=crop" alt="æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</span>
        <span class="sponsor-offer">20%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=100&h=60&fit=crop" alt="å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«</span>
        <span class="sponsor-offer">ç‰¹åˆ¥ä¾¡æ ¼</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=100&h=60&fit=crop" alt="ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹</span>
        <span class="sponsor-offer">é€è¿ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=60&fit=crop" alt="ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨</span>
        <span class="sponsor-offer">ä½“é¨“å‰²å¼•</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1543083115-638c32cd3d58?w=100&h=60&fit=crop" alt="åœ°å…ƒç‰¹ç”£å“åº—" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">åœ°å…ƒç‰¹ç”£å“åº—</span>
        <span class="sponsor-offer">ãŠåœŸç”£10%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=100&h=60&fit=crop" alt="ã‚«ãƒ•ã‚§æ¡œ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚«ãƒ•ã‚§æ¡œ</span>
        <span class="sponsor-offer">ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=100&h=60&fit=crop" alt="é‡£ã‚Šèˆ¹å¤ªéƒ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">é‡£ã‚Šèˆ¹å¤ªéƒ</span>
        <span class="sponsor-offer">åˆå›åŠé¡</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=100&h=60&fit=crop" alt="ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š</span>
        <span class="sponsor-offer">1æ—¥ãƒ¬ãƒ³ã‚¿ãƒ«</span>
      </div>
      <!-- ç¹°ã‚Šè¿”ã—è¡¨ç¤ºã§ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ -->
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=100&h=60&fit=crop" alt="æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</span>
        <span class="sponsor-offer">20%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=100&h=60&fit=crop" alt="å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«</span>
        <span class="sponsor-offer">ç‰¹åˆ¥ä¾¡æ ¼</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=100&h=60&fit=crop" alt="ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹</span>
        <span class="sponsor-offer">é€è¿ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=60&fit=crop" alt="ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨</span>
        <span class="sponsor-offer">ä½“é¨“å‰²å¼•</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1543083115-638c32cd3d58?w=100&h=60&fit=crop" alt="åœ°å…ƒç‰¹ç”£å“åº—" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">åœ°å…ƒç‰¹ç”£å“åº—</span>
        <span class="sponsor-offer">ãŠåœŸç”£10%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=100&h=60&fit=crop" alt="ã‚«ãƒ•ã‚§æ¡œ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚«ãƒ•ã‚§æ¡œ</span>
        <span class="sponsor-offer">ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=100&h=60&fit=crop" alt="é‡£ã‚Šèˆ¹å¤ªéƒ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">é‡£ã‚Šèˆ¹å¤ªéƒ</span>
        <span class="sponsor-offer">åˆå›åŠé¡</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=100&h=60&fit=crop" alt="ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š</span>
        <span class="sponsor-offer">1æ—¥ãƒ¬ãƒ³ã‚¿ãƒ«</span>
      </div>
    </div>
  </div>



  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="container py-5">
    <!-- äººæ°—ã®ã‚¬ã‚¤ãƒ‰ -->
    <section id="guides" class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="position-relative">
          <button type="button" class="btn btn-sm btn-outline-info me-3" id="filter-tutorial-btn" style="border-radius: 20px;">
            <i class="bi bi-question-circle me-1"></i>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ä½¿ã„æ–¹
          </button>
        </div>
        <h2 class="mb-0 flex-grow-1 text-center">äººæ°—ã®ã‚¬ã‚¤ãƒ‰</h2>
        <div style="width: 140px;"></div> <!-- ã‚¹ãƒšãƒ¼ã‚µãƒ¼ -->
      </div>
      <div class="mb-4">
        <div id="search-results-counter">70äººã®ã‚¬ã‚¤ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</div>
        <div id="no-results-message" class="alert alert-info text-center my-4 d-none">æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚¬ã‚¤ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„ã€‚</div>
        
        <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
        <div class="text-center mb-3">
          <button type="button" class="btn btn-outline-primary" id="toggle-filter-button">
            <i class="bi bi-funnel"></i> ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿
          </button>
        </div>
        
        <div class="row justify-content-center">
          <div class="col-md-10 col-lg-8">
            <div class="card shadow-sm d-none" id="filter-card">
              <div class="card-body">
                <h5 class="card-title mb-3">ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã‚€</h5>
                <form id="guide-filter-form">
                  <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ  -->
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="location-filter" class="form-label">åœ°åŸŸ</label>
                      <select class="form-select" id="location-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <optgroup label="éƒ½é“åºœçœŒ">
                          <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
                          <option value="é’æ£®çœŒ">é’æ£®çœŒ</option>
                          <option value="å²©æ‰‹çœŒ">å²©æ‰‹çœŒ</option>
                          <option value="å®®åŸçœŒ">å®®åŸçœŒ</option>
                          <option value="ç§‹ç”°çœŒ">ç§‹ç”°çœŒ</option>
                          <option value="å±±å½¢çœŒ">å±±å½¢çœŒ</option>
                          <option value="ç¦å³¶çœŒ">ç¦å³¶çœŒ</option>
                          <option value="èŒ¨åŸçœŒ">èŒ¨åŸçœŒ</option>
                          <option value="æ ƒæœ¨çœŒ">æ ƒæœ¨çœŒ</option>
                          <option value="ç¾¤é¦¬çœŒ">ç¾¤é¦¬çœŒ</option>
                          <option value="åŸ¼ç‰çœŒ">åŸ¼ç‰çœŒ</option>
                          <option value="åƒè‘‰çœŒ">åƒè‘‰çœŒ</option>
                          <option value="æ±äº¬éƒ½">æ±äº¬éƒ½</option>
                          <option value="ç¥å¥ˆå·çœŒ">ç¥å¥ˆå·çœŒ</option>
                          <option value="æ–°æ½ŸçœŒ">æ–°æ½ŸçœŒ</option>
                          <option value="å¯Œå±±çœŒ">å¯Œå±±çœŒ</option>
                          <option value="çŸ³å·çœŒ">çŸ³å·çœŒ</option>
                          <option value="ç¦äº•çœŒ">ç¦äº•çœŒ</option>
                          <option value="å±±æ¢¨çœŒ">å±±æ¢¨çœŒ</option>
                          <option value="é•·é‡çœŒ">é•·é‡çœŒ</option>
                          <option value="å²é˜œçœŒ">å²é˜œçœŒ</option>
                          <option value="é™å²¡çœŒ">é™å²¡çœŒ</option>
                          <option value="æ„›çŸ¥çœŒ">æ„›çŸ¥çœŒ</option>
                          <option value="ä¸‰é‡çœŒ">ä¸‰é‡çœŒ</option>
                          <option value="æ»‹è³€çœŒ">æ»‹è³€çœŒ</option>
                          <option value="äº¬éƒ½åºœ">äº¬éƒ½åºœ</option>
                          <option value="å¤§é˜ªåºœ">å¤§é˜ªåºœ</option>
                          <option value="å…µåº«çœŒ">å…µåº«çœŒ</option>
                          <option value="å¥ˆè‰¯çœŒ">å¥ˆè‰¯çœŒ</option>
                          <option value="å’Œæ­Œå±±çœŒ">å’Œæ­Œå±±çœŒ</option>
                          <option value="é³¥å–çœŒ">é³¥å–çœŒ</option>
                          <option value="å³¶æ ¹çœŒ">å³¶æ ¹çœŒ</option>
                          <option value="å²¡å±±çœŒ">å²¡å±±çœŒ</option>
                          <option value="åºƒå³¶çœŒ">åºƒå³¶çœŒ</option>
                          <option value="å±±å£çœŒ">å±±å£çœŒ</option>
                          <option value="å¾³å³¶çœŒ">å¾³å³¶çœŒ</option>
                          <option value="é¦™å·çœŒ">é¦™å·çœŒ</option>
                          <option value="æ„›åª›çœŒ">æ„›åª›çœŒ</option>
                          <option value="é«˜çŸ¥çœŒ">é«˜çŸ¥çœŒ</option>
                          <option value="ç¦å²¡çœŒ">ç¦å²¡çœŒ</option>
                          <option value="ä½è³€çœŒ">ä½è³€çœŒ</option>
                          <option value="é•·å´çœŒ">é•·å´çœŒ</option>
                          <option value="ç†Šæœ¬çœŒ">ç†Šæœ¬çœŒ</option>
                          <option value="å¤§åˆ†çœŒ">å¤§åˆ†çœŒ</option>
                          <option value="å®®å´çœŒ">å®®å´çœŒ</option>
                          <option value="é¹¿å…å³¶çœŒ">é¹¿å…å³¶çœŒ</option>
                          <option value="æ²–ç¸„çœŒ">æ²–ç¸„çœŒ</option>
                        </optgroup>
                        <optgroup label="é›¢å³¶">
                          <option value="å±‹ä¹…å³¶">å±‹ä¹…å³¶</option>
                          <option value="ç¨®å­å³¶">ç¨®å­å³¶</option>
                          <option value="å¥„ç¾å¤§å³¶">å¥„ç¾å¤§å³¶</option>
                          <option value="å®®å¤å³¶">å®®å¤å³¶</option>
                          <option value="çŸ³å£å³¶">çŸ³å£å³¶</option>
                          <option value="ç«¹å¯Œå³¶">ç«¹å¯Œå³¶</option>
                          <option value="è¥¿è¡¨å³¶">è¥¿è¡¨å³¶</option>
                          <option value="ä¸é‚£å›½å³¶">ä¸é‚£å›½å³¶</option>
                          <option value="ä½æ¸¡å³¶">ä½æ¸¡å³¶</option>
                          <option value="éš å²è«¸å³¶">éš å²è«¸å³¶</option>
                          <option value="å£±å²">å£±å²</option>
                          <option value="å¯¾é¦¬">å¯¾é¦¬</option>
                          <option value="äº”å³¶åˆ—å³¶">äº”å³¶åˆ—å³¶</option>
                          <option value="å°ç¬ åŸè«¸å³¶">å°ç¬ åŸè«¸å³¶</option>
                        </optgroup>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="language-filter" class="form-label">è¨€èª</label>
                      <select class="form-select" id="language-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="æ—¥æœ¬èª">æ—¥æœ¬èª</option>
                        <option value="è‹±èª">è‹±èª</option>
                        <option value="ä¸­å›½èª">ä¸­å›½èª</option>
                        <option value="éŸ“å›½èª">éŸ“å›½èª</option>
                        <option value="ãƒ•ãƒ©ãƒ³ã‚¹èª">ãƒ•ãƒ©ãƒ³ã‚¹èª</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="fee-filter" class="form-label">æ–™é‡‘</label>
                      <select class="form-select" id="fee-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="6000">Â¥6,000~/å›</option>
                        <option value="10000">Â¥10,000ä»¥ä¸‹/å›</option>
                        <option value="15000">Â¥15,000ä»¥ä¸‹/å›</option>
                        <option value="20000">Â¥20,000ä»¥ä¸‹/å›</option>
                      </select>
                    </div>
                    <div class="col-12">
                      <label class="form-label">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
                      <div class="d-flex flex-wrap" id="keyword-filter-group">
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼" id="keyword-night">
                          <label class="form-check-label" for="keyword-night">ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ã‚°ãƒ«ãƒ¡" id="keyword-food">
                          <label class="form-check-label" for="keyword-food">ã‚°ãƒ«ãƒ¡</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="å†™çœŸã‚¹ãƒãƒƒãƒˆ" id="keyword-photo">
                          <label class="form-check-label" for="keyword-photo">å†™çœŸã‚¹ãƒãƒƒãƒˆ</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="æ–™ç†" id="keyword-cooking">
                          <label class="form-check-label" for="keyword-cooking">æ–™ç†</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£" id="keyword-activity">
                          <label class="form-check-label" for="keyword-activity">ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£</label>
                        </div>
                      </div>
                      <input type="text" class="form-control mt-2" id="keyword-filter-custom" placeholder="ãã®ä»–ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆã‚³ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å…¥åŠ›å¯ï¼‰">
                      <small class="text-muted mt-1 d-block">
                        <i class="bi bi-info-circle"></i> ä¸Šè¨˜ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¾ãŸã¯ã“ã®å…¥åŠ›æ¬„ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŒ‡å®šã§ãã¾ã™ã€‚è¤‡æ•°ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹å ´åˆã¯ã€ã‚«ãƒ³ãƒï¼ˆ,ï¼‰ã§åŒºåˆ‡ã£ã¦ãã ã•ã„ã€‚ä¾‹: ã€Œæ¸©æ³‰,ç™»å±±,ãƒã‚¤ã‚­ãƒ³ã‚°ã€
                      </small>
                    </div>
                    <div class="col-12 d-flex justify-content-end">
                      <button type="reset" class="btn btn-secondary me-2" id="reset-filters">ãƒªã‚»ãƒƒãƒˆ</button>
                      <button type="button" class="btn btn-primary" id="apply-filters">
                        <i class="bi bi-search"></i> æ¤œç´¢
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row guides-container" id="guide-cards-container">
        <!-- åˆæœŸè¡¨ç¤ºã•ã‚Œã‚‹ã‚¬ã‚¤ãƒ‰ -->
        <!-- ã‚¬ã‚¤ãƒ‰1 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="1" data-location="æ±äº¬éƒ½ æ¸‹è°·åŒº" data-languages="æ—¥æœ¬èª,è‹±èª" data-fee="6000" data-keywords="ã‚°ãƒ«ãƒ¡,å†™çœŸã‚¹ãƒãƒƒãƒˆ">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">æ¡ƒå¤ªéƒ</h5>
                <span class="badge bg-primary">Â¥6,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>æ±äº¬éƒ½ æ¸‹è°·åŒº
              </p>
              <p class="card-text mb-3">æ±äº¬ã®éš ã‚ŒãŸåæ‰€ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚ã‚°ãƒ«ãƒ¡ã‚„å†™çœŸã‚¹ãƒãƒƒãƒˆãŒå¾—æ„ã§ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <span class="text-dark ms-1">4.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="1">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰2 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="2" data-location="äº¬éƒ½åºœ äº¬éƒ½å¸‚" data-languages="æ—¥æœ¬èª,è‹±èª,ä¸­å›½èª" data-fee="8000" data-keywords="æ­´å²,æ–‡åŒ–,å¯ºé™¢,å†™çœŸã‚¹ãƒãƒƒãƒˆ">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">èŠ±å­</h5>
                <span class="badge bg-primary">Â¥5,500/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>äº¬éƒ½åºœ äº¬éƒ½å¸‚
              </p>
              <p class="card-text mb-3">æ­´å²ã¨ä¼çµ±ãŒæ¯ã¥ãäº¬éƒ½ã®é­…åŠ›ã‚’ã”æ¡ˆå†…ã€‚å¯ºç¤¾å·¡ã‚Šã‚„ä¼çµ±æ–‡åŒ–ä½“é¨“ãŒå¾—æ„ã§ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="2">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰3 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="3" data-location="å¤§é˜ªåºœ å¤§é˜ªå¸‚" data-languages="æ—¥æœ¬èª,è‹±èª" data-fee="7000" data-keywords="ã‚°ãƒ«ãƒ¡,ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼,ãƒ­ãƒ¼ã‚«ãƒ«">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">ä¸€éƒ</h5>
                <span class="badge bg-primary">Â¥5,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>å¤§é˜ªåºœ å¤§é˜ªå¸‚
              </p>
              <p class="card-text mb-3">å¤§é˜ªãªã‚‰ã§ã¯ã®é£Ÿã¹æ­©ãã¨è¡—æ­©ããŒå°‚é–€ã€‚åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã‚‹ååº—ã«ã”æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª(åŸºç¤)</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">3.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="3">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- è¿½åŠ ã®ã‚¬ã‚¤ãƒ‰ï¼ˆåˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤ºï¼‰ -->
        <!-- ã‚¬ã‚¤ãƒ‰4 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="4">
            <img src="https://placehold.co/400x300?text=åŒ—æµ·é“ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">é›ª</h5>
                <span class="badge bg-primary">Â¥8,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>åŒ—æµ·é“ æœ­å¹Œå¸‚
              </p>
              <p class="card-text mb-3">åŒ—æµ·é“ãƒ»æœ­å¹Œã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¬ã‚¤ãƒ‰ã€‚å››å­£æŠ˜ã€…ã®è‡ªç„¶ã¨æ–°é®®ãªæµ·ã®å¹¸ã€çµ¶æ™¯ã‚¹ãƒãƒƒãƒˆã‚’ã”æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark me-1">è‹±èª</span>
                  <span class="badge bg-light text-dark">ãƒ­ã‚·ã‚¢èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="4">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰5 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="5">
            <img src="https://placehold.co/400x300?text=æ²–ç¸„ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">æµ·</h5>
                <span class="badge bg-primary">Â¥12,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>æ²–ç¸„çœŒ é‚£è¦‡å¸‚
              </p>
              <p class="card-text mb-3">æ²–ç¸„åœ¨ä½15å¹´ã®ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã€‚ç¾ã—ã„æµ·ã¨ç‹¬è‡ªã®æ–‡åŒ–ãŒæ®‹ã‚‹å³¶ã€…ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <span class="text-dark ms-1">4.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="5">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰6 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="6">
            <img src="https://placehold.co/400x300?text=åºƒå³¶ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">å¹³å’Œ</h5>
                <span class="badge bg-primary">Â¥6,500/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>åºƒå³¶çœŒ åºƒå³¶å¸‚
              </p>
              <p class="card-text mb-3">åºƒå³¶ã®æ­´å²ã¨æ–‡åŒ–ã«ç²¾é€šã—ãŸã‚¬ã‚¤ãƒ‰ã€‚å¹³å’Œè¨˜å¿µå…¬åœ’ã‹ã‚‰å®®å³¶ã¾ã§ã€å¿ƒã«æ®‹ã‚‹æ—…ã‚’ã”æä¾›ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark me-1">è‹±èª</span>
                  <span class="badge bg-light text-dark">ãƒ•ãƒ©ãƒ³ã‚¹èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="6">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
      </div>
      
      <div class="text-center mt-4">
        <button class="btn btn-primary" id="load-more-guides">ã‚‚ã£ã¨è¦‹ã‚‹</button>
      </div>
    </section>
    
    <!-- ä½¿ã„æ–¹ -->
    <section id="how-it-works" class="mb-5">
      <h2 class="text-center mb-4">ä½¿ã„æ–¹</h2>
      <div class="row text-center">
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">1</h3>
            </div>
            <h4>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²</h4>
            <p>ç°¡å˜ãªæƒ…å ±å…¥åŠ›ã¨é›»è©±ç•ªå·èªè¨¼ã§ç™»éŒ²å®Œäº†</p>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">2</h3>
            </div>
            <h4>ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</h4>
            <p>å ´æ‰€ã€è¨€èªã€å°‚é–€æ€§ãªã©ã§ç†æƒ³ã®ã‚¬ã‚¤ãƒ‰ã‚’æ¤œç´¢</p>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">3</h3>
            </div>
            <h4>äºˆç´„ã—ã¦æ¥½ã—ã‚€</h4>
            <p>å¸Œæœ›ã®æ—¥æ™‚ã§äºˆç´„ã—ã€ç‰¹åˆ¥ãªä½“é¨“ã‚’æ¥½ã—ã‚€</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- ã‚¬ã‚¤ãƒ‰ã®ãƒ¡ãƒªãƒƒãƒˆ -->
    <section id="guide-benefits" class="mb-5 py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-4">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»èºã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ</h2>
        <p class="text-center lead mb-5">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’æ´»ã‹ã—ã¦ã€ä¸–ç•Œä¸­ã®æ—…è¡Œè€…ã«ç‰¹åˆ¥ãªä½“é¨“ã‚’æä¾›ã—ã¾ã—ã‚‡ã†</p>
        
        <div class="row">
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>ã‚ãªãŸã®æ—¥å¸¸ãŒè¦³å…‰è³‡æºã«ãªã‚‹</h5>
                  <p class="text-muted mb-0">åœ°å…ƒã®æ–¹ã ã‘ãŒçŸ¥ã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã‚„ä½“é¨“ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€æ—¥å¸¸ãŒã‹ã‘ãŒãˆã®ãªã„æ—…ã®æ€ã„å‡ºã«å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è¦³å…‰å®¢ã®æ–¹ã‚’å‹é”ã¨ã—ã¦ãŠè¿ãˆã™ã‚‹ã ã‘ã§ã™</h5>
                  <p class="text-muted mb-0">å½¢å¼ã°ã£ãŸã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼ã§ã¯ãªãã€å‹äººã¨ã®äº¤æµã®ã‚ˆã†ã«è‡ªç„¶ãªå½¢ã§åœ°å…ƒã®é­…åŠ›ã‚’ä¼ãˆã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>éš™é–“æ™‚é–“ã‚’ä½¿ã£ã¦åŠ¹ç‡ã‚ˆããŠä»•äº‹ã‚’ã™ã‚‹</h5>
                  <p class="text-muted mb-0">è‡ªåˆ†ã®éƒ½åˆã®è‰¯ã„æ™‚é–“ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã‚‹ãŸã‚ã€æœ¬æ¥­ã‚„å­¦æ¥­ã¨ä¸¡ç«‹ã—ãªãŒã‚‰åå…¥ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è‡ªåˆ†ã®å¥½ããªã“ã¨ã‚’ä»•äº‹ã«ã§ãã‚‹</h5>
                  <p class="text-muted mb-0">è¶£å‘³ã‚„ç‰¹æŠ€ã€å°‚é–€çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¬ã‚¤ãƒ‰ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€æƒ…ç†±ã‚’åå…¥ã«å¤‰ãˆã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>ä¸–ç•Œä¸­ã®äººã¨æ–°ã—ã„å‡ºä¼šã„ãŒç”Ÿã¾ã‚Œã‚‹</h5>
                  <p class="text-muted mb-0">æ§˜ã€…ãªå›½ã‚„æ–‡åŒ–ã‹ã‚‰æ¥ãŸæ—…è¡Œè€…ã¨ã®äº¤æµã‚’é€šã˜ã¦ã€å›½éš›çš„ãªäººè„ˆã‚’åºƒã’ã€ç•°æ–‡åŒ–ç†è§£ã‚’æ·±ã‚ã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>èªå­¦åŠ›ã‚’æ´»ã‹ã—ã€ã•ã‚‰ã«å‘ä¸Šã•ã›ã‚‰ã‚Œã‚‹</h5>
                  <p class="text-muted mb-0">å¤–å›½èªã‚’ä½¿ã†å®Ÿè·µçš„ãªæ©Ÿä¼šãŒå¾—ã‚‰ã‚Œã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ãŒè‡ªç„¶ã¨é«˜ã¾ã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>åœ°å…ƒã¸ã®æ„›ç€ã¨èª‡ã‚ŠãŒæ·±ã¾ã‚‹</h5>
                  <p class="text-muted mb-0">åœ°å…ƒã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã§ã€è‡ªåˆ†è‡ªèº«ã®ä½ã‚€åœ°åŸŸã¸ã®ç†è§£ã‚„æ„›ç€ãŒã•ã‚‰ã«å¼·ããªã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>å®‰å¿ƒã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶</h5>
                  <p class="text-muted mb-0">äºˆç´„ç®¡ç†ã€æ±ºæ¸ˆã€ä¿é™ºãªã©ã€ã‚¬ã‚¤ãƒ‰æ´»å‹•ã«å¿…è¦ãªåŸºç›¤ã‚’å½“ã‚µãƒ¼ãƒ“ã‚¹ãŒæä¾›ã™ã‚‹ã®ã§å®‰å¿ƒã—ã¦æ´»å‹•ã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§æ´»å‹•å¯èƒ½</h5>
                  <p class="text-muted mb-0">äºˆç´„ã‚’å—ã‘ã‚‹æ—¥æ™‚ã‚„é »åº¦ã¯å®Œå…¨ã«è‡ªåˆ†ã§æ±ºã‚ã‚‰ã‚Œã‚‹ãŸã‚ã€ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸåƒãæ–¹ãŒã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>åœ°åŸŸæ´»æ€§åŒ–ã«è²¢çŒ®ã§ãã‚‹</h5>
                  <p class="text-muted mb-0">è¦³å…‰å®¢ã‚’åœ°å…ƒã®ãŠåº—ã‚„æ–½è¨­ã«æ¡ˆå†…ã™ã‚‹ã“ã¨ã§ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç™ºå±•ã«è²¢çŒ®ã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-center mt-4">
          <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#registerGuideModal">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²ã™ã‚‹</button>
        </div>
      </div>
    </section>
  </div>

  <!-- è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerTouristModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="tourist-register-form">
            <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">åŸºæœ¬æƒ…å ±</h4>
              <div class="mb-3">
                <label for="tourist-name" class="form-label">æ°å <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tourist-name" required>
              </div>
              <div class="mb-3">
                <label for="tourist-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="tourist-email" required>
              </div>
              <div class="mb-3">
                <label for="tourist-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="password" class="form-control" id="tourist-password" required>
                <div class="form-text">8æ–‡å­—ä»¥ä¸Šã§ã€è‹±æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„</div>
              </div>
            </div>
            
            <!-- é›»è©±ç•ªå·èªè¨¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">é›»è©±ç•ªå·èªè¨¼</h4>
              <div class="mb-3">
                <label for="tourist-phone-number" class="form-label">é›»è©±ç•ªå· <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text">+81</span>
                  <input type="tel" class="form-control" id="tourist-phone-number" placeholder="9012345678ï¼ˆå…ˆé ­ã®0ã¯é™¤ãï¼‰" required>
                  <button type="button" class="btn btn-primary" id="tourist-send-code-btn">èªè¨¼ã‚³ãƒ¼ãƒ‰é€ä¿¡</button>
                </div>
                <div class="form-text">ãƒã‚¤ãƒ•ãƒ³ãªã—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
              </div>
              
              <div class="mb-4" id="tourist-verification-code-container">
                <label for="tourist-verification-code" class="form-label">èªè¨¼ã‚³ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tourist-verification-code" maxlength="6" placeholder="SMSã«é€ä¿¡ã•ã‚ŒãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰">
              </div>
              
              <div id="tourist-recaptcha-container" class="mb-3"></div>
              <div id="tourist-phone-verified" class="alert alert-success d-none">é›»è©±ç•ªå·èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ âœ“</div>
            </div>
            
            <!-- èº«åˆ†è¨¼æ˜æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèª</h4>
              <div class="mb-3">
                <label for="tourist-id-type" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ <span class="text-danger">*</span></label>
                <select class="form-select" id="tourist-id-type" required>
                  <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="passport">ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ</option>
                  <option value="drivers_license">é‹è»¢å…è¨±è¨¼</option>
                  <option value="my_number">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</option>
                </select>
              </div>
              
              <div class="mb-3">
                <label for="tourist-id-front" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="tourist-id-front" accept="image/*" required>
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="tourist-id-front">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="tourist-id-front-preview-container">
                  <div class="document-preview">
                    <img id="tourist-id-front-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è¡¨é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="tourist-id-front-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
              
              <div class="mb-3 d-none" id="tourist-id-back-container">
                <label for="tourist-id-back" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="tourist-id-back" accept="image/*">
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="tourist-id-back">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="tourist-id-back-preview-container">
                  <div class="document-preview">
                    <img id="tourist-id-back-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è£é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="tourist-id-back-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- åˆ©ç”¨è¦ç´„ -->
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="tourist-terms" required>
                <label class="form-check-label" for="tourist-terms">
                  <a href="#" target="_blank">åˆ©ç”¨è¦ç´„</a>ã¨<a href="#" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ã¾ã™
                </label>
              </div>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">ç™»éŒ²ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ãŠå•ã„åˆã‚ã›ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="contactModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ãŠå•ã„åˆã‚ã›</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="contact-form">
            <div class="mb-3">
              <label for="contact-name" class="form-label">ãŠåå‰ <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="contact-name" required>
            </div>
            
            <div class="mb-3">
              <label for="contact-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
              <input type="email" class="form-control" id="contact-email" required>
            </div>
            
            <div class="mb-3">
              <label for="contact-subject" class="form-label">ä»¶å <span class="text-danger">*</span></label>
              <select class="form-select" id="contact-subject" required>
                <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="general">ä¸€èˆ¬çš„ãªãŠå•ã„åˆã‚ã›</option>
                <option value="service">ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦</option>
                <option value="support">ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦</option>
                <option value="feedback">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»ææ¡ˆ</option>
                <option value="other">ãã®ä»–</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="contact-message" class="form-label">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ <span class="text-danger">*</span></label>
              <textarea class="form-control" id="contact-message" rows="5" required></textarea>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">é€ä¿¡ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="loginTouristModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">æ—…è¡Œè€…ãƒ­ã‚°ã‚¤ãƒ³</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="tourist-login-form">
            <div class="mb-3">
              <label for="tourist-login-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
              <input type="email" class="form-control" id="tourist-login-email" required>
            </div>
            <div class="mb-3">
              <label for="tourist-login-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
              <input type="password" class="form-control" id="tourist-login-password" required>
            </div>
            <div class="d-grid mb-3">
              <button type="submit" class="btn btn-primary">ãƒ­ã‚°ã‚¤ãƒ³</button>
            </div>
            <div class="text-center">
              <p class="mb-0">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ <a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">ã“ã¡ã‚‰</a> ã‹ã‚‰ç™»éŒ²ã§ãã¾ã™</p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerPromptModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ä¼šå“¡ç™»éŒ²ãŒå¿…è¦ã§ã™</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="text-center mb-4">
            <i class="bi bi-lock-fill text-primary" style="font-size: 3rem;"></i>
            <h4 class="mt-3">ã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚’è¦‹ã‚‹ã«ã¯ä¼šå“¡ç™»éŒ²ãŒå¿…è¦ã§ã™</h4>
            <p class="text-muted">ç™»éŒ²ã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã€å¤šãã®ç‰¹å…¸ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
          </div>
          
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title"><i class="bi bi-person me-2"></i>æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²</h5>
                  <p class="card-text">ç¾åœ°ã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ç‰¹åˆ¥ãªæ—…è¡Œä½“é¨“ã‚’æ¢ã—ã¾ã—ã‚‡ã†ã€‚</p>
                  <button class="btn btn-primary w-100" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">
                    æ—…è¡Œè€…ç™»éŒ²ã¸é€²ã‚€
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title"><i class="bi bi-map me-2"></i>ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²</h5>
                  <p class="card-text">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’å…±æœ‰ã—ã€åå…¥ã‚’å¾—ã¾ã—ã‚‡ã†ã€‚</p>
                  <button class="btn btn-outline-primary w-100" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerGuideModal">
                    ã‚¬ã‚¤ãƒ‰ç™»éŒ²ã¸é€²ã‚€
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="text-center">
            <p>ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯<a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#loginModal">ã“ã¡ã‚‰ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³</a>ã—ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerGuideModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="guide-register-form">
            <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">åŸºæœ¬æƒ…å ±</h4>
              
              <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ -->
              <div class="mb-4 text-center">
                <label for="guide-profile-photo" class="form-label d-block">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ <span class="text-danger">*</span></label>
                <div class="profile-photo-container mx-auto mb-3">
                  <img id="guide-profile-preview" src="https://placehold.co/150?text=å†™çœŸ" class="img-thumbnail rounded-circle profile-photo" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ">
                  <div class="profile-photo-overlay">
                    <i class="bi bi-camera-fill"></i>
                  </div>
                </div>
                <div class="d-flex justify-content-center">
                  <div class="w-50">
                    <input type="file" class="form-control" id="guide-profile-photo" accept="image/*" required>
                    <button type="button" class="btn btn-outline-secondary document-camera mobile-only mt-2 w-100" data-target="guide-profile-photo">
                      <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©ã§æ’®å½±
                    </button>
                  </div>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
              </div>
              
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="guide-name" class="form-label">æ°å <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="guide-name" required>
                </div>
                <div class="col-md-6">
                  <label for="guide-username" class="form-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼å <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="guide-username" required>
                  <div class="form-text">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«URLã«ä½¿ç”¨ã•ã‚Œã¾ã™</div>
                </div>
              </div>
              <div class="mb-3">
                <label for="guide-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="guide-email" required>
              </div>
              <div class="mb-3">
                <label for="guide-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="password" class="form-control" id="guide-password" required>
                <div class="form-text">8æ–‡å­—ä»¥ä¸Šã§ã€è‹±æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„</div>
              </div>
              <div class="mb-3">
                <label for="guide-location" class="form-label">æ´»å‹•ã‚¨ãƒªã‚¢ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="guide-location" placeholder="ä¾‹ï¼šæ±äº¬éƒ½æ–°å®¿åŒº" required>
              </div>
              <div class="mb-3">
                <label for="guide-languages" class="form-label">å¯¾å¿œè¨€èª <span class="text-danger">*</span></label>
                <select class="form-select" id="guide-languages" multiple required>
                  <option value="ja">æ—¥æœ¬èª</option>
                  <option value="en">è‹±èª</option>
                  <option value="zh">ä¸­å›½èª</option>
                  <option value="ko">éŸ“å›½èª</option>
                  <option value="fr">ãƒ•ãƒ©ãƒ³ã‚¹èª</option>
                  <option value="de">ãƒ‰ã‚¤ãƒ„èª</option>
                  <option value="es">ã‚¹ãƒšã‚¤ãƒ³èª</option>
                </select>
                <div class="form-text">Ctrlã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰è¤‡æ•°é¸æŠã§ãã¾ã™</div>
              </div>
            </div>
            
            <!-- é›»è©±ç•ªå·èªè¨¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">é›»è©±ç•ªå·èªè¨¼</h4>
              <div class="mb-3">
                <label for="guide-phone-number" class="form-label">é›»è©±ç•ªå· <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text">+81</span>
                  <input type="tel" class="form-control" id="guide-phone-number" placeholder="9012345678ï¼ˆå…ˆé ­ã®0ã¯é™¤ãï¼‰" required>
                  <button type="button" class="btn btn-primary" id="guide-send-code-btn">èªè¨¼ã‚³ãƒ¼ãƒ‰é€ä¿¡</button>
                </div>
                <div class="form-text">ãƒã‚¤ãƒ•ãƒ³ãªã—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
              </div>
              
              <div class="mb-4" id="guide-verification-code-container">
                <label for="guide-verification-code" class="form-label">èªè¨¼ã‚³ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="guide-verification-code" maxlength="6" placeholder="SMSã«é€ä¿¡ã•ã‚ŒãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰">
              </div>
              
              <div id="guide-recaptcha-container" class="mb-3"></div>
              <div id="guide-phone-verified" class="alert alert-success d-none">é›»è©±ç•ªå·èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ âœ“</div>
            </div>
            
            <!-- èº«åˆ†è¨¼æ˜æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèª</h4>
              <div class="mb-3">
                <label for="guide-id-type" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ <span class="text-danger">*</span></label>
                <select class="form-select" id="guide-id-type" required>
                  <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="passport">ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ</option>
                  <option value="drivers_license">é‹è»¢å…è¨±è¨¼</option>
                  <option value="my_number">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</option>
                </select>
              </div>
              
              <div class="mb-3">
                <label for="guide-id-front" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="guide-id-front" accept="image/*" required>
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="guide-id-front">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="guide-id-front-preview-container">
                  <div class="document-preview">
                    <img id="guide-id-front-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è¡¨é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="guide-id-front-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
              
              <div class="mb-3 d-none" id="guide-id-back-container">
                <label for="guide-id-back" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="guide-id-back" accept="image/*">
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="guide-id-back">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="guide-id-back-preview-container">
                  <div class="document-preview">
                    <img id="guide-id-back-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è£é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="guide-id-back-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- åˆ©ç”¨è¦ç´„ -->
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="guide-terms" required>
                <label class="form-check-label" for="guide-terms">
                  <a href="#" target="_blank">åˆ©ç”¨è¦ç´„</a>ã€<a href="#" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã€ãŠã‚ˆã³<a href="#" target="_blank">ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ã¾ã™
                </label>
              </div>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">ç™»éŒ²ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">ãƒ­ã‚°ã‚¤ãƒ³</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="login-form">
            <div class="mb-3">
              <label class="form-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—</label>
              <div class="user-type-selector">
                <div class="btn-group w-100" role="group" aria-label="ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—é¸æŠ">
                  <input type="radio" class="btn-check" name="login-user-type" id="login-user-tourist" value="tourist" autocomplete="off" checked>
                  <label class="btn btn-outline-primary" for="login-user-tourist">
                    <i class="bi bi-person me-1"></i> è¦³å…‰å®¢
                  </label>
                  
                  <input type="radio" class="btn-check" name="login-user-type" id="login-user-guide" value="guide" autocomplete="off">
                  <label class="btn btn-outline-primary" for="login-user-guide">
                    <i class="bi bi-map me-1"></i> ã‚¬ã‚¤ãƒ‰
                  </label>
                </div>
              </div>
              <div class="user-type-helper text-center mt-1 mb-3">
                <small id="user-type-description" class="text-muted">
                  è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã—ãŸã‚Šäºˆç´„ã§ãã¾ã™
                </small>
              </div>
            </div>
            <div class="mb-3">
              <label for="login-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-end-0">
                  <i class="bi bi-envelope text-muted"></i>
                </span>
                <input type="email" class="form-control border-start-0" id="login-email" placeholder="example@email.com" required>
              </div>
            </div>
            <div class="mb-3">
              <label for="login-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
              <input type="password" class="form-control" id="login-password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" required>
              <div class="mt-2">
                <a href="#" class="password-reset-link">
                  <i class="bi bi-question-circle me-1"></i>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ
                </a>
              </div>
            </div>
            <div class="mb-3 form-check">
              <input type="checkbox" class="form-check-input" id="login-remember">
              <label class="form-check-label" for="login-remember">ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹</label>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary login-button" id="main-login-btn">
                <i class="bi bi-box-arrow-in-right me-2"></i>ãƒ­ã‚°ã‚¤ãƒ³
              </button>
            </div>
          </form>
          <hr>
          <div class="text-center">
            <div class="bg-light rounded p-3 mb-3">
              <h6 class="text-primary mb-2">ãƒ‡ãƒ¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰</h6>
              <div class="small text-start">
                <div><strong>ãƒ¡ãƒ¼ãƒ«:</strong> test@example.com</div>
                <div><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> password</div>
                <hr class="my-2">
                <div><strong>ãƒ¡ãƒ¼ãƒ«:</strong> tourist@test.com</div>
                <div><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> test123</div>
              </div>
            </div>
            <p class="mb-2">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹</p>
            <button class="btn btn-outline-primary" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">
              <i class="bi bi-person-plus me-1"></i>æ–°è¦ç™»éŒ²
            </button>
          </div>
          
          <!-- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆå°†æ¥çš„ãªæ©Ÿèƒ½ï¼‰ -->
          <div class="social-login d-none">
            <div class="social-login-title">ã¾ãŸã¯</div>
            <div class="social-login-buttons">
              <button class="social-btn" title="Googleã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-google"></i>
              </button>
              <button class="social-btn" title="Facebookã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-facebook"></i>
              </button>
              <button class="social-btn" title="Twitterã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-twitter"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ç¢ºå®ŸãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ -->
  <script>
    // ãƒšãƒ¼ã‚¸ã®ç›®ç«‹ã¤å ´æ‰€ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¡¨ç¤º
    function showStatus(message) {
      const status = document.createElement('div');
      status.style.cssText = 'position:fixed;top:10px;right:10px;background:green;color:white;padding:10px;z-index:9999;border-radius:5px;';
      status.textContent = message;
      document.body.appendChild(status);
      setTimeout(() => status.remove(), 3000);
    }
    
    console.log('ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹å§‹');
    
    // åˆæœŸçŠ¶æ…‹ã‚’æ—¥æœ¬èªã«å¼·åˆ¶è¨­å®š
    function forceJapaneseInitialState() {
      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®è¨€èªè¨­å®šã‚’ã‚¯ãƒªã‚¢
      localStorage.removeItem('selectedLanguage');
      localStorage.removeItem('localGuideLanguage');

      
      // è¨€èªãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«ç½®æ›æ¸ˆã¿ - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³å‰Šé™¤
      
      console.log('åˆæœŸçŠ¶æ…‹ã‚’æ—¥æœ¬èªã«å¼·åˆ¶è¨­å®šã—ã¾ã—ãŸ');
    }
    
    // DOMContentLoadedã§ã¯ãªãã€å³åº§ã«å®Ÿè¡Œ
    function initializeButtons() {
      console.log('ãƒœã‚¿ãƒ³åˆæœŸåŒ–é–‹å§‹');
      showStatus('ãƒœã‚¿ãƒ³åˆæœŸåŒ–ä¸­...');
      // ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³
      const homeBtn = document.getElementById('btn-home');
      if (homeBtn) {
        homeBtn.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('top').scrollIntoView({ behavior: 'smooth' });
        });
      }
      
      // ã‚¬ã‚¤ãƒ‰ãƒœã‚¿ãƒ³
      const guidesBtn = document.getElementById('btn-guides');
      if (guidesBtn) {
        guidesBtn.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('guides').scrollIntoView({ behavior: 'smooth' });
        });
      }
      
      // ä½¿ã„æ–¹ãƒœã‚¿ãƒ³
      const howBtn = document.getElementById('btn-how-it-works');
      if (howBtn) {
        howBtn.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('how-it-works').scrollIntoView({ behavior: 'smooth' });
        });
      }
      
      // å”è³›åº—ç™»éŒ²ãƒœã‚¿ãƒ³
      const sponsorRegisterBtn = document.getElementById('sponsorRegisterBtn');
      if (sponsorRegisterBtn) {
        sponsorRegisterBtn.addEventListener('click', function(e) {
          e.preventDefault();
          window.location.href = 'sponsor-registration.html';
        });
      }
      
      // è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ - å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å§”è¨—
      
      // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒœã‚¿ãƒ³
      const registerDropdownBtn = document.getElementById('registerDropdown');
      if (registerDropdownBtn) {
        console.log('æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š');
        // Bootstrap ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«data-bs-toggleå±æ€§ã‚’ç¢ºèª
        if (!registerDropdownBtn.hasAttribute('data-bs-toggle')) {
          registerDropdownBtn.setAttribute('data-bs-toggle', 'dropdown');
        }
      }
      
      // å”è³›åº—ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
      const sponsorLoginBtn = document.getElementById('sponsorLoginBtn');
      if (sponsorLoginBtn) {
        sponsorLoginBtn.addEventListener('click', function(e) {
          e.preventDefault();
          window.location.href = 'sponsor-login.html';
        });
      }
      
      // è¨€èªãƒœã‚¿ãƒ³ - å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‡¦ç†
      
      console.log('å…¨ã¦ã®ãƒœã‚¿ãƒ³æ©Ÿèƒ½ãŒè¨­å®šã•ã‚Œã¾ã—ãŸ');
      showStatus('å…¨ãƒœã‚¿ãƒ³è¨­å®šå®Œäº†ï¼');
    }
    
    // è¤‡æ•°ã®æ–¹æ³•ã§åˆæœŸåŒ–ã‚’è©¦è¡Œ
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        forceJapaneseInitialState(); // æ—¥æœ¬èªå¼·åˆ¶è¨­å®š
        initializeButtons();
        forceJapaneseButtonText(); // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’å¼·åˆ¶çš„ã«æ—¥æœ¬èªåŒ–
      });
    } else {
      forceJapaneseInitialState();
      initializeButtons();
      forceJapaneseButtonText();
    }
    
    // ã•ã‚‰ã«å®‰å…¨ã®ãŸã‚ã€å°‘ã—é…å»¶ã—ã¦å†å®Ÿè¡Œ
    setTimeout(function() {
      forceJapaneseInitialState();
      initializeButtons();
      forceJapaneseButtonText();
      forceReplaceSeeDetails(); // See Detailsã‚’å¼·åˆ¶ç½®æ›
    }, 1000);
    
    // 2ç§’å¾Œã«ã‚‚å®Ÿè¡Œ
    setTimeout(function() {
      forceReplaceSeeDetails();
    }, 2000);
    
    // ã€ŒSee Detailsã€ã‚’å¼·åˆ¶çš„ã«ã€Œè©³ç´°ã‚’è¦‹ã‚‹ã€ã«ç½®æ›ã™ã‚‹é–¢æ•°
    function forceReplaceSeeDetails() {
      console.log('=== See Detailsãƒœã‚¿ãƒ³ã®å¼·åˆ¶ç½®æ›ã‚’é–‹å§‹ ===');
      console.log('ç¾åœ¨ã®è¨€èªè¨­å®š:', localStorage.getItem('language'));
      
      let replacedCount = 0;
      
      // å…¨ä½“ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦See Detailsã‚’æ¢ã™
      document.querySelectorAll('*').forEach(element => {
        if (element.textContent && element.textContent.includes('See Details')) {
          console.log('See Detailsç™ºè¦‹:', element.tagName, element.className, element.textContent);
          
          if (element.tagName === 'BUTTON' || element.tagName === 'A' || element.classList.contains('btn')) {
            // ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä¿æŒã—ã¤ã¤ãƒ†ã‚­ã‚¹ãƒˆã‚’ç½®æ›
            if (element.innerHTML.includes('<i class="bi bi-eye')) {
              element.innerHTML = '<i class="bi bi-eye me-1"></i>è©³ç´°ã‚’è¦‹ã‚‹';
            } else {
              element.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
            }
            element.setAttribute('data-force-japanese', 'true');
            replacedCount++;
            console.log('ç½®æ›å®Œäº†:', element);
          }
        }
      });
      
      console.log(`=== ç½®æ›å®Œäº†: ${replacedCount}å€‹ã®ãƒœã‚¿ãƒ³ã‚’ä¿®æ­£ ===`);
      return replacedCount;
    }
    
    // å¼·åŠ›ãªMutationObserverã§å‹•çš„ãªDOMã®å¤‰æ›´ã‚’ç›£è¦–
    const observer = new MutationObserver(function(mutations) {
      let shouldReplace = false;
      
      mutations.forEach(function(mutation) {
        // æ–°ã—ã„ãƒãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚ŒãŸå ´åˆ
        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
          mutation.addedNodes.forEach(function(node) {
            if (node.nodeType === Node.ELEMENT_NODE) {
              // See Detailsã‚’å«ã‚€ãƒãƒ¼ãƒ‰ã‚’å³åº§ã«ä¿®æ­£
              if (node.textContent && node.textContent.includes('See Details')) {
                console.log('æ–°è¦è¿½åŠ ãƒãƒ¼ãƒ‰ã§See Detailsæ¤œå‡º:', node);
                shouldReplace = true;
              }
              
              // å­è¦ç´ ã‚‚ãƒã‚§ãƒƒã‚¯
              const seeDetailsElements = node.querySelectorAll && node.querySelectorAll('*');
              if (seeDetailsElements) {
                seeDetailsElements.forEach(child => {
                  if (child.textContent && child.textContent.includes('See Details')) {
                    console.log('å­è¦ç´ ã§See Detailsæ¤œå‡º:', child);
                    shouldReplace = true;
                  }
                });
              }
            }
          });
        }
        
        // ãƒ†ã‚­ã‚¹ãƒˆã‚„HTMLå†…å®¹ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆ
        if (mutation.type === 'characterData') {
          if (mutation.target.textContent && mutation.target.textContent.includes('See Details')) {
            console.log('ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›´ã§See Detailsæ¤œå‡º:', mutation.target);
            shouldReplace = true;
          }
        }
        
        // å±æ€§ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆ
        if (mutation.type === 'attributes') {
          const target = mutation.target;
          if (target.textContent && target.textContent.includes('See Details')) {
            console.log('å±æ€§å¤‰æ›´ã§See Detailsæ¤œå‡º:', target);
            shouldReplace = true;
          }
        }
      });
      
      if (shouldReplace) {
        console.log('MutationObserverãŒå¤‰æ›´ã‚’æ¤œå‡º - å¼·åˆ¶ç½®æ›å®Ÿè¡Œ');
        setTimeout(forceReplaceSeeDetails, 50);
      }
    });
    
    // DOMå…¨ä½“ã‚’åŒ…æ‹¬çš„ã«ç›£è¦–
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      characterData: true,
      attributes: true,
      attributeOldValue: true,
      characterDataOldValue: true
    });
    
    // ç¶™ç¶šçš„ãªç›£è¦–ï¼ˆ1ç§’ã”ã¨ï¼‰- ã‚ˆã‚Šé »ç¹ã«ãƒã‚§ãƒƒã‚¯
    setInterval(function() {
      let replaced = 0;
      document.querySelectorAll('button, a, .btn').forEach(el => {
        if (el.textContent && el.textContent.includes('See Details')) {
          if (el.innerHTML.includes('<i class="bi bi-eye')) {
            el.innerHTML = '<i class="bi bi-eye me-1"></i>è©³ç´°ã‚’è¦‹ã‚‹';
          } else {
            el.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
          }
          el.setAttribute('data-forced-japanese', 'true');
          replaced++;
        }
      });
      if (replaced > 0) {
        console.log(`å®šæœŸãƒã‚§ãƒƒã‚¯: ${replaced}å€‹ã®See Detailsãƒœã‚¿ãƒ³ã‚’è©³ç´°ã‚’è¦‹ã‚‹ã«ä¿®æ­£`);
      }
    }, 1000);
    
    // ã‚ˆã‚Šå¼·åŠ›ãªä¿è­· - DOMå¤‰æ›´ã‚’å³åº§ã«ã‚­ãƒ£ãƒƒãƒ
    const aggressiveObserver = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'characterData' || mutation.type === 'childList') {
          const target = mutation.target;
          if (target.textContent && target.textContent.includes('See Details')) {
            if (target.tagName === 'BUTTON' || target.tagName === 'A' || target.classList.contains('btn')) {
              target.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
              console.log('å³åº§ã«ä¿®æ­£:', target);
            }
          }
        }
      });
    });
    
    aggressiveObserver.observe(document.body, {
      childList: true,
      subtree: true,
      characterData: true
    });
    
    // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’å¼·åˆ¶çš„ã«æ—¥æœ¬èªåŒ–ã™ã‚‹é–¢æ•°
    function forceJapaneseButtonText() {
      console.log('ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’å¼·åˆ¶çš„ã«æ—¥æœ¬èªåŒ–é–‹å§‹');
      
      // è¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ãƒœã‚¿ãƒ³ã‚’å–å¾—
      const buttonSelectors = [
        '.guide-details-link',
        '.btn[onclick*="showGuideDetails"]', 
        '.card-footer .btn',
        '.guide-card .btn-primary',
        'a[data-guide-id]',
        '.btn'
      ];
      
      buttonSelectors.forEach(selector => {
        const buttons = document.querySelectorAll(selector);
        buttons.forEach(btn => {
          if (btn.textContent.includes('See Details') || btn.textContent.includes('Details')) {
            btn.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
            console.log(`ãƒœã‚¿ãƒ³ã‚’æ—¥æœ¬èªåŒ–: ${btn.textContent}`);
          }
        });
      });
      
      // ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªæ¤œç´¢
      document.querySelectorAll('*').forEach(element => {
        if (element.textContent === 'See Details' && (element.tagName === 'A' || element.tagName === 'BUTTON')) {
          element.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
          console.log('See Detailsãƒœã‚¿ãƒ³ã‚’è©³ç´°ã‚’è¦‹ã‚‹ã«å¤‰æ›´');
        }
        
        // ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚‚ç¢ºèª
        if (element.textContent === 'Show More' && (element.tagName === 'A' || element.tagName === 'BUTTON')) {
          element.textContent = 'ã‚‚ã£ã¨è¦‹ã‚‹';
          console.log('Show Moreãƒœã‚¿ãƒ³ã‚’ã‚‚ã£ã¨è¦‹ã‚‹ã«å¤‰æ›´');
        }
      });
      
      // ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚‚å€‹åˆ¥ã«ãƒã‚§ãƒƒã‚¯
      const moreButton = document.querySelector('#load-more-guides');
      if (moreButton && (moreButton.textContent.includes('Show More') || moreButton.textContent.includes('Load More'))) {
        moreButton.textContent = 'ã‚‚ã£ã¨è¦‹ã‚‹';
        console.log('ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã‚’å¼·åˆ¶çš„ã«æ—¥æœ¬èªåŒ–');
      }
    }
  </script>
  
  <!-- Bootstrap JavaScript - æœ€å¾Œã«èª­ã¿è¾¼ã¿ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- è¿½åŠ ã®BootstrapåˆæœŸåŒ– -->
  <script>
    // Bootstrapè¦ç´ ã‚’æ‰‹å‹•ã§åˆæœŸåŒ–
    setTimeout(function() {
      // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’æ‰‹å‹•åˆæœŸåŒ–
      const dropdowns = document.querySelectorAll('[data-bs-toggle="dropdown"]');
      dropdowns.forEach(function(dropdown) {
        dropdown.addEventListener('click', function(e) {
          e.preventDefault();
          const menu = this.nextElementSibling;
          if (menu && menu.classList.contains('dropdown-menu')) {
            menu.classList.toggle('show');
          }
        });
      });
      
      // å”è³›åº—ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’å¼·åˆ¶è¨­å®š
      const sponsorLoginBtn = document.getElementById('sponsorLoginBtn');
      if (sponsorLoginBtn) {
        sponsorLoginBtn.onclick = function() {
          window.location.href = 'sponsor-login.html';
        };
      }
      
      showStatus('æ‰‹å‹•åˆæœŸåŒ–å®Œäº†');
    }, 2000);
    
    // æ—§è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ï¼ˆç„¡åŠ¹åŒ–ï¼‰
    function switchToJapanese_DISABLED() {
      console.log('æ—§ switchToJapanese é–¢æ•°ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸ');
      
      // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
      const mainTitle = document.querySelector('h1');
      if (mainTitle) mainTitle.textContent = 'ã‚ãªãŸã ã‘ã®ç‰¹åˆ¥ãªæ—…ã‚’';
      
      const subtitle = document.querySelector('.hero-section p');
      if (subtitle) subtitle.textContent = 'åœ°å…ƒã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ã€è¦³å…‰ã§ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã„éš ã‚ŒãŸé­…åŠ›ã‚’ä½“é¨“ã—ã¾ã—ã‚‡ã†';
      
      // ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒœã‚¿ãƒ³
      const heroGuideBtn = document.querySelector('.btn-light.btn-lg');
      if (heroGuideBtn) heroGuideBtn.textContent = 'ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™';
      
      const heroContactBtn = document.querySelector('.btn-outline-light.btn-lg');
      if (heroContactBtn) heroContactBtn.textContent = 'ãŠå•ã„åˆã‚ã›';
      
      // å³ä¸‹ã®ãƒœã‚¿ãƒ³
      const sponsorRegBtn = document.querySelector('#sponsorRegisterBtn span');
      if (sponsorRegBtn) sponsorRegBtn.textContent = 'å”è³›åº—ç™»éŒ² ğŸš€';
      
      const sponsorLoginBtn = document.querySelector('#sponsorLoginBtn span');
      if (sponsorLoginBtn) sponsorLoginBtn.textContent = 'ãƒ­ã‚°ã‚¤ãƒ³ âœ¨';
      
      // ä½¿ã„æ–¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³
      const howItWorksH4s = document.querySelectorAll('#how-it-works h4');
      if (howItWorksH4s.length >= 3) {
        howItWorksH4s[0].textContent = 'ç™»éŒ²ã™ã‚‹';
        howItWorksH4s[1].textContent = 'ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™';
        howItWorksH4s[2].textContent = 'ç‰¹åˆ¥ãªæ—…ã‚’ä½“é¨“';
      }
      
      // äººæ°—ã®ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³
      const popularGuidesTitle = document.querySelector('#guides h2');
      if (popularGuidesTitle) popularGuidesTitle.textContent = 'äººæ°—ã®ã‚¬ã‚¤ãƒ‰';
      
      // ã‚¬ã‚¤ãƒ‰ä¸€è¦§ã®è¦ç´ ï¼ˆæ­£ã—ã„ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
      const filterButton = document.querySelector('#toggle-filter-button');
      if (filterButton) filterButton.innerHTML = '<i class="bi bi-funnel"></i> ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿';
      
      const moreButton = document.querySelector('#load-more-guides');
      if (moreButton) moreButton.textContent = 'ã‚‚ã£ã¨è¦‹ã‚‹';
      
      // æ—§æ¤œç´¢çµæœã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ©Ÿèƒ½ï¼ˆç„¡åŠ¹åŒ–ï¼‰
      console.log('æ—§ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ›´æ–°æ©Ÿèƒ½ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸ');
      
      // ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ä½¿ã„æ–¹ã€ãƒœã‚¿ãƒ³
      const filterTutorialBtn = document.querySelector('#filter-tutorial-btn');
      if (filterTutorialBtn) filterTutorialBtn.innerHTML = '<i class="bi bi-question-circle me-1"></i>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ä½¿ã„æ–¹';
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã®è©³ç´°ãƒœã‚¿ãƒ³ã‚’æ—¥æœ¬èªã«ï¼ˆè¤‡æ•°å›è©¦è¡Œï¼‰
      const guideDetailsButtons = document.querySelectorAll('.guide-details-link');
      guideDetailsButtons.forEach(btn => {
        btn.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
      });
      
      // ã‚ˆã‚Šåºƒç¯„å›²ãªãƒœã‚¿ãƒ³ç¿»è¨³ï¼ˆSee Detailsã‚’å«ã‚€ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ï¼‰
      document.querySelectorAll('a, button').forEach(element => {
        if (element.textContent.trim() === 'See Details') {
          element.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
        }
      });
      
      // é…å»¶å®Ÿè¡Œã§ãƒœã‚¿ãƒ³ã‚’å†åº¦ãƒã‚§ãƒƒã‚¯
      setTimeout(() => {
        document.querySelectorAll('.guide-details-link, .btn').forEach(btn => {
          if (btn.textContent.includes('See Details')) {
            btn.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
          }
        });
      }, 500);
      
      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®å¾©å®Ÿè¡Œ
      if (window.nuclearScrollFix) {
        setTimeout(() => {
          window.nuclearScrollFix();
          console.log('æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆå¾Œã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®å¾©å®Ÿè¡Œ');
        }, 100);
      }
      
      // æ›´ã«ç¢ºå®Ÿã«ã™ã‚‹ãŸã‚ã€1ç§’å¾Œã«ã‚‚å†å®Ÿè¡Œ
      setTimeout(() => {
        document.querySelectorAll('a[data-guide-id], .guide-details-link').forEach(link => {
          if (link.textContent.trim() === 'See Details') {
            link.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
          }
        });
        
        // å‹•çš„ç”Ÿæˆã•ã‚ŒãŸã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã®ç¿»è¨³ã‚‚å†å®Ÿè¡Œ
        const dynamicGuideCards = document.querySelectorAll('.guide-card');
        dynamicGuideCards.forEach((card, index) => {
          const description = card.querySelector('.card-text.mb-3');
          if (description && description.textContent.includes('guide you to') || description.textContent.includes('Specializing')) {
            const japaneseDescriptions = [
              'æ±äº¬ã®éš ã‚ŒãŸåæ‰€ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚ã‚°ãƒ«ãƒ¡ã‚„å†™çœŸã‚¹ãƒãƒƒãƒˆãŒå¾—æ„ã§ã™ã€‚',
              'æ­´å²ã¨ä¼çµ±ãŒæ¯ã¥ãäº¬éƒ½ã®é­…åŠ›ã‚’ã”æ¡ˆå†…ã€‚å¯ºç¤¾å·¡ã‚Šã‚„ä¼çµ±æ–‡åŒ–ä½“é¨“ãŒå¾—æ„ã§ã™ã€‚',
              'å¤§é˜ªãªã‚‰ã§ã¯ã®é£Ÿã¹æ­©ãã¨è¡—æ­©ããŒå°‚é–€ã€‚åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã‚‹ååº—ã«ã”æ¡ˆå†…ã—ã¾ã™ã€‚'
            ];
            if (japaneseDescriptions[index]) {
              description.textContent = japaneseDescriptions[index];
            }
          }
        });
        
        // ãƒ¡ãƒªãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®èª¬æ˜æ–‡ã‚‚å†ç¿»è¨³ï¼ˆè‹±èªãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆï¼‰
        const delayedBenefitDescriptions = document.querySelectorAll('#guide-benefits .text-muted, #guide-benefits .guide-benefit-card p');
        delayedBenefitDescriptions.forEach((desc, index) => {
          if (desc.textContent.includes('When and how often') || desc.textContent.includes('By introducing')) {
            const japaneseTexts = [
              'åœ°å…ƒã®æ–¹ã ã‘ãŒçŸ¥ã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã‚„ä½“é¨“ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€æ—¥å¸¸ãŒã‹ã‘ãŒãˆã®ãªã„æ—…ã®æ€ã„å‡ºã«å¤‰ã‚ã‚Šã¾ã™ã€‚',
              'å½¢å¼ã°ã£ãŸã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼ã§ã¯ãªãã€å‹äººã¨ã®äº¤æµã®ã‚ˆã†ã«è‡ªç„¶ãªå½¢ã§åœ°å…ƒã®é­…åŠ›ã‚’ä¼ãˆã‚‰ã‚Œã¾ã™ã€‚',
              'è‡ªåˆ†ã®éƒ½åˆã®è‰¯ã„æ™‚é–“ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã‚‹ãŸã‚ã€æœ¬æ¥­ã‚„å­¦æ¥­ã¨ä¸¡ç«‹ã—ãªãŒã‚‰åå…¥ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚',
              'è¶£å‘³ã‚„ç‰¹æŠ€ã€å°‚é–€çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸç‹¬è‡ªã®ã‚¬ã‚¤ãƒ‰ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€ã‚„ã‚ŠãŒã„ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚ã¾ã™ã€‚',
              'åœ°å…ƒã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã§ã€æ”¹ã‚ã¦æ•…éƒ·ã¸ã®æ„›ç€ãŒæ·±ã¾ã‚Šã€èª‡ã‚Šã‚’æŒã£ã¦ç´¹ä»‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚',
              'äºˆç´„ç®¡ç†ã‚„æ±ºæ¸ˆã€ä¿é™ºãªã©ã€ã‚¬ã‚¤ãƒ‰æ´»å‹•ã«å¿…è¦ãªã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹ãŸã‚ã€å®‰å¿ƒã—ã¦æ´»å‹•ã«é›†ä¸­ã§ãã¾ã™ã€‚',
              'äºˆç´„ã‚’å—ã‘å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã¯å®Œå…¨ã«è‡ªåˆ†æ¬¡ç¬¬ã€‚ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸæ´»å‹•ãŒå¯èƒ½ã§ã™ã€‚',
              'è¦³å…‰å®¢ã‚’åœ°å…ƒã®åº—èˆ—ã‚„æ–½è¨­ã«æ¡ˆå†…ã™ã‚‹ã“ã¨ã§ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã¨åœ°åŸŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç™ºå±•ã«è²¢çŒ®ã§ãã¾ã™ã€‚'
            ];
            if (japaneseTexts[index]) {
              desc.textContent = japaneseTexts[index];
            }
          }
        });
        
        // ãƒ¡ãƒªãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¼·åˆ¶çš„ã«ã™ã¹ã¦æ—¥æœ¬èªã«çµ±ä¸€ï¼ˆ10å€‹ã™ã¹ã¦å¯¾å¿œï¼‰
        function translateBenefitTitlesToJapanese() {
          const selectors = [
            '#guide-benefits h5',
            '#guide-benefits .guide-benefit-card h5',
            '.guide-benefit-card h5',
            'section[id="guide-benefits"] h5',
            '.container .guide-benefit-card h5'
          ];
          
          const japaneseTitles = [
            'ã‚ãªãŸã®æ—¥å¸¸ãŒè¦³å…‰è³‡æºã«ãªã‚‹',
            'è¦³å…‰å®¢ã®æ–¹ã‚’å‹é”ã¨ã—ã¦ãŠè¿ãˆã™ã‚‹ã ã‘ã§ã™',
            'éš™é–“æ™‚é–“ã‚’ä½¿ã£ã¦åŠ¹ç‡ã‚ˆããŠä»•äº‹ã‚’ã™ã‚‹',
            'è‡ªåˆ†ã®å¥½ããªã“ã¨ã‚’ä»•äº‹ã«ã§ãã‚‹',
            'ä¸–ç•Œä¸­ã®äººã¨æ–°ã—ã„å‡ºä¼šã„ãŒç”Ÿã¾ã‚Œã‚‹',
            'èªå­¦åŠ›ã‚’æ´»ã‹ã—ã€ã•ã‚‰ã«å‘ä¸Šã•ã›ã‚‰ã‚Œã‚‹',
            'åœ°å…ƒã¸ã®æ„›ç€ã¨èª‡ã‚ŠãŒæ·±ã¾ã‚‹',
            'å®‰å¿ƒã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶',
            'è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§æ´»å‹•å¯èƒ½',
            'åœ°åŸŸæ´»æ€§åŒ–ã«è²¢çŒ®ã§ãã‚‹'
          ];
          
          selectors.forEach(selector => {
            const titles = document.querySelectorAll(selector);
            console.log(`æ—¥æœ¬èªç¿»è¨³ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ ${selector}: ${titles.length}å€‹ã®ã‚¿ã‚¤ãƒˆãƒ«è¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
            titles.forEach((title, index) => {
              if (japaneseTitles[index]) {
                const oldText = title.textContent;
                title.textContent = japaneseTitles[index];
                console.log(`æ—¥æœ¬èªç¿»è¨³ ${index}: ${oldText} â†’ ${japaneseTitles[index]}`);
              }
            });
          });
        }
        
        // æ®µéšçš„å®Ÿè¡Œã§ç¢ºå®Ÿã«ç¿»è¨³
        translateBenefitTitlesToJapanese();
        setTimeout(translateBenefitTitlesToJapanese, 300);
        setTimeout(translateBenefitTitlesToJapanese, 800);
        setTimeout(translateBenefitTitlesToJapanese, 1500);
        setTimeout(translateBenefitTitlesToJapanese, 3000);
        
        // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ç¿»è¨³ï¼ˆã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’æ—¥æœ¬èªã«æˆ»ã™ãƒ»å¼·åŒ–ç‰ˆï¼‰
        function translateAllGuideCardsToJapanese() {
          // ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§éš ã—ã‚¬ã‚¤ãƒ‰ã‚’å«ã‚€å…¨ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’ã‚­ãƒ£ãƒƒãƒ
          const guideCardSelectors = [
            '.guide-card', 
            '.guide-item', 
            '.guide-item.hidden-guide',
            '.hidden-guide',
            '[data-guide-id]',
            '.col-md-4 .card',
            '.col-lg-4 .card',
            '#guide-cards-container .guide-item',
            '.guides-container .guide-item'
          ];
          
          let allGuideCards = [];
          guideCardSelectors.forEach(selector => {
            const cards = document.querySelectorAll(selector);
            cards.forEach(card => {
              if (!allGuideCards.includes(card)) {
                allGuideCards.push(card);
              }
            });
          });
          
          console.log(`æ—¥æœ¬èªç¿»è¨³: ${allGuideCards.length}å€‹ã®ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’ç¿»è¨³ä¸­`);
          
          allGuideCards.forEach((card, index) => {
            console.log(`ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ ${index + 1} ã‚’æ—¥æœ¬èªç¿»è¨³ä¸­...`);
            
            // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ï¼ˆè¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ç¢ºå®Ÿã«ã‚­ãƒ£ãƒƒãƒï¼‰
            const detailSelectors = [
              '.btn', 
              'a[href*="guide"]', 
              '.guide-details-link',
              'button[onclick*="showGuideDetails"]',
              '.card-footer a',
              '.btn-primary'
            ];
            
            detailSelectors.forEach(selector => {
              const detailBtn = card.querySelector(selector);
              if (detailBtn && (detailBtn.textContent.includes('See Details') || detailBtn.textContent.includes('è©³ç´°'))) {
                detailBtn.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
                console.log(`è©³ç´°ãƒœã‚¿ãƒ³ç¿»è¨³: è©³ç´°ã‚’è¦‹ã‚‹`);
              }
            });
            
            // è¨€èªãƒãƒƒã‚¸ï¼ˆåŒ…æ‹¬çš„ãªç¿»è¨³ï¼‰
            const langBadgeSelectors = [
              '.badge', 
              '.language-badge', 
              '.text-primary',
              '.badge.bg-light',
              '.badge.bg-primary',
              'span[class*="badge"]'
            ];
            
            langBadgeSelectors.forEach(selector => {
              const langBadges = card.querySelectorAll(selector);
              langBadges.forEach(badge => {
                const originalText = badge.textContent.trim();
                if (originalText === 'Japanese' || originalText === 'æ—¥æœ¬èª') {
                  badge.textContent = 'æ—¥æœ¬èª';
                  console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ æ—¥æœ¬èª`);
                } else if (originalText === 'English' || originalText === 'è‹±èª') {
                  badge.textContent = 'è‹±èª';
                  console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ è‹±èª`);
                } else if (originalText === 'French' || originalText === 'ãƒ•ãƒ©ãƒ³ã‚¹èª') {
                  badge.textContent = 'ãƒ•ãƒ©ãƒ³ã‚¹èª';
                  console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ ãƒ•ãƒ©ãƒ³ã‚¹èª`);
                } else if (originalText === 'Chinese' || originalText === 'ä¸­å›½èª') {
                  badge.textContent = 'ä¸­å›½èª';
                  console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ ä¸­å›½èª`);
                } else if (originalText === 'Korean' || originalText === 'éŸ“å›½èª') {
                  badge.textContent = 'éŸ“å›½èª';
                  console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ éŸ“å›½èª`);
                }
              });
            });
            
            // å ´æ‰€ã®ç¿»è¨³ï¼ˆè‹±èªã‹ã‚‰æ—¥æœ¬èªã«æˆ»ã™ï¼‰
            const locationSelectors = [
              '.guide-location', 
              '.text-muted',
              '.location',
              '.area',
              'small.text-muted',
              '.card-subtitle',
              'p.text-muted',
              '.card-text.text-muted'
            ];
            
            locationSelectors.forEach(selector => {
              const location = card.querySelector(selector);
              if (location) {
                const originalText = location.textContent;
                let text = originalText;
                
                // è‹±èªã‹ã‚‰æ—¥æœ¬èªã¸ã®ç¿»è¨³
                text = text.replace('Hokkaido', 'åŒ—æµ·é“').replace('Sapporo City', 'æœ­å¹Œå¸‚');
                text = text.replace('Tokyo', 'æ±äº¬éƒ½').replace('Shibuya', 'æ¸‹è°·åŒº');
                text = text.replace('Okinawa', 'æ²–ç¸„çœŒ').replace('Naha City', 'é‚£è¦‡å¸‚');
                text = text.replace('Hiroshima City', 'åºƒå³¶å¸‚').replace('Hiroshima', 'åºƒå³¶çœŒ');
                text = text.replace('Kyoto City', 'äº¬éƒ½å¸‚').replace('Kyoto', 'äº¬éƒ½åºœ');
                text = text.replace('Osaka City', 'å¤§é˜ªå¸‚').replace('Osaka', 'å¤§é˜ªåºœ');
                
                if (originalText !== text) {
                  location.textContent = text;
                  console.log(`å ´æ‰€ç¿»è¨³: ${originalText} â†’ ${text}`);
                }
              }
            });
          });
          
          console.log(`ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰æ—¥æœ¬èªç¿»è¨³å®Œäº†: åˆè¨ˆ ${allGuideCards.length}ä»¶`);
        }
        
        // å³åº§ã«ç¿»è¨³
        translateAllGuideCardsToJapanese();
        
        // é…å»¶å®Ÿè¡Œã§å‹•çš„ã«è¿½åŠ ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã‚‚ç¿»è¨³
        setTimeout(translateAllGuideCardsToJapanese, 500);
        setTimeout(translateAllGuideCardsToJapanese, 1500);
        setTimeout(translateAllGuideCardsToJapanese, 3000);
        
        // ã€Œã‚‚ã£ã¨ã¿ã‚‹ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ç›£è¦–ã¨ç¿»è¨³é©ç”¨ï¼ˆæ—¥æœ¬èªç‰ˆï¼‰
        const loadMoreBtn = document.getElementById('load-more-guides');
        if (loadMoreBtn) {
          loadMoreBtn.addEventListener('click', function() {
            // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾Œã«æ–°ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã«ç¿»è¨³ã‚’é©ç”¨
            setTimeout(() => {
              console.log('ã€Œã‚‚ã£ã¨ã¿ã‚‹ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾Œã®æ—¥æœ¬èªç¿»è¨³é©ç”¨');
              translateAllGuideCardsToJapanese();
            }, 100);
            
            setTimeout(translateAllGuideCardsToJapanese, 500);
            setTimeout(translateAllGuideCardsToJapanese, 1000);
          });
        }
        
        // MutationObserverã§DOMã®å¤‰æ›´ã‚’ç›£è¦–ï¼ˆæ—¥æœ¬èªç‰ˆï¼‰
        const observer = new MutationObserver(function(mutations) {
          let shouldTranslate = false;
          mutations.forEach(function(mutation) {
            if (mutation.type === 'childList') {
              mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1 && 
                    (node.classList.contains('guide-card') || 
                     node.classList.contains('guide-item') || 
                     node.classList.contains('hidden-guide') ||
                     node.querySelector('.guide-card'))) {
                  shouldTranslate = true;
                }
              });
            }
            
            // ã‚¯ãƒ©ã‚¹å¤‰æ›´ã‚‚ç›£è¦–ï¼ˆhidden-guideã‚¯ãƒ©ã‚¹ã®å‰Šé™¤ãªã©ï¼‰
            if (mutation.type === 'attributes' && 
                mutation.attributeName === 'class' &&
                mutation.target.classList.contains('guide-item')) {
              shouldTranslate = true;
            }
          });
          
          if (shouldTranslate) {
            console.log('æ–°ã—ã„ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ - æ—¥æœ¬èªç¿»è¨³é©ç”¨');
            setTimeout(translateAllGuideCardsToJapanese, 50);
            setTimeout(translateAllGuideCardsToJapanese, 200);
          }
        });
        
        // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã‚’ç›£è¦–ï¼ˆå±æ€§å¤‰æ›´ã‚‚å«ã‚€ï¼‰
        const guideContainer = document.getElementById('guide-cards-container');
        if (guideContainer) {
          observer.observe(guideContainer, { 
            childList: true, 
            subtree: true, 
            attributes: true, 
            attributeFilter: ['class'] 
          });
        }
        
        // éƒ½é“åºœçœŒåã‚’æ—¥æœ¬èªã«å¾©å…ƒ
        const locationElements = document.querySelectorAll('.guide-card .text-muted, .guide-location');
        locationElements.forEach(element => {
          const text = element.textContent;
          if (text.includes('Tokyo')) {
            element.textContent = text.replace('Tokyo', 'æ±äº¬éƒ½');
          } else if (text.includes('Kyoto City')) {
            element.textContent = text.replace('Kyoto City', 'äº¬éƒ½å¸‚');
          } else if (text.includes('Kyoto') && !text.includes('Kyoto City')) {
            element.textContent = text.replace('Kyoto', 'äº¬éƒ½åºœ');
          } else if (text.includes('Osaka City')) {
            element.textContent = text.replace('Osaka City', 'å¤§é˜ªå¸‚');
          } else if (text.includes('Osaka') && !text.includes('Osaka City')) {
            element.textContent = text.replace('Osaka', 'å¤§é˜ªåºœ');
          } else if (text.includes('Shibuya')) {
            element.textContent = text.replace('Shibuya', 'æ¸‹è°·åŒº');
          }
        });
      }, 1000);
      
      // ä½¿ã„æ–¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜æ–‡
      const howItWorksTitle = document.querySelector('#how-it-works h2');
      if (howItWorksTitle) howItWorksTitle.textContent = 'ä½¿ã„æ–¹';
      
      const howItWorksPs = document.querySelectorAll('#how-it-works p');
      if (howItWorksPs.length >= 3) {
        howItWorksPs[0].textContent = 'ç°¡å˜ãªæƒ…å ±å…¥åŠ›ã¨é›»è©±ç•ªå·èªè¨¼ã§ç™»éŒ²å®Œäº†';
        howItWorksPs[1].textContent = 'å ´æ‰€ã€è¨€èªã€å°‚é–€æ€§ãªã©ã§ç†æƒ³ã®ã‚¬ã‚¤ãƒ‰ã‚’æ¤œç´¢';
        howItWorksPs[2].textContent = 'å¸Œæœ›ã®æ—¥æ™‚ã§äºˆç´„ã—ã€ç‰¹åˆ¥ãªä½“é¨“ã‚’æ¥½ã—ã‚€';
      }
      
      // ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»èºã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆï¼ˆæ­£ã—ã„ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
      const benefitsTitle = document.querySelector('#guide-benefits h2');
      if (benefitsTitle) benefitsTitle.textContent = 'ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»èºã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ';
      
      const benefitsSubtitle = document.querySelector('#guide-benefits .lead');
      if (benefitsSubtitle) benefitsSubtitle.textContent = 'ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’æ´»ã‹ã—ã¦ã€ä¸–ç•Œä¸­ã®æ—…è¡Œè€…ã«ç‰¹åˆ¥ãªä½“é¨“ã‚’æä¾›ã—ã¾ã—ã‚‡ã†';
      
      // ãƒ¡ãƒªãƒƒãƒˆé …ç›®ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ­£ã—ã„ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
      const benefitTitles = document.querySelectorAll('#guide-benefits h5');
      if (benefitTitles.length >= 8) {
        benefitTitles[0].textContent = 'ã‚ãªãŸã®æ—¥å¸¸ãŒè¦³å…‰è³‡æºã«ãªã‚‹';
        benefitTitles[1].textContent = 'è¦³å…‰å®¢ã®æ–¹ã‚’å‹é”ã¨ã—ã¦ãŠè¿ãˆã™ã‚‹ã ã‘ã§ã™';
        benefitTitles[2].textContent = 'éš™é–“æ™‚é–“ã‚’ä½¿ã£ã¦åŠ¹ç‡ã‚ˆããŠä»•äº‹ã‚’ã™ã‚‹';
        benefitTitles[3].textContent = 'è‡ªåˆ†ã®å¥½ããªã“ã¨ã‚’ä»•äº‹ã«ã§ãã‚‹';
        benefitTitles[4].textContent = 'åœ°å…ƒã¸ã®æ„›ç€ã¨èª‡ã‚ŠãŒæ·±ã¾ã‚‹';
        benefitTitles[5].textContent = 'å®‰å¿ƒã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶';
        benefitTitles[6].textContent = 'è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§æ´»å‹•å¯èƒ½';
        benefitTitles[7].textContent = 'åœ°åŸŸæ´»æ€§åŒ–ã«è²¢çŒ®ã§ãã‚‹';
      }
      
      // ãƒ¡ãƒªãƒƒãƒˆé …ç›®ã®èª¬æ˜æ–‡ï¼ˆè¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ç¢ºå®Ÿã«ç¿»è¨³ï¼‰
      const benefitDescs = document.querySelectorAll('#guide-benefits .text-muted');
      if (benefitDescs.length >= 8) {
        benefitDescs[0].textContent = 'åœ°å…ƒã®æ–¹ã ã‘ãŒçŸ¥ã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã‚„ä½“é¨“ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€æ—¥å¸¸ãŒã‹ã‘ãŒãˆã®ãªã„æ—…ã®æ€ã„å‡ºã«å¤‰ã‚ã‚Šã¾ã™ã€‚';
        benefitDescs[1].textContent = 'å½¢å¼ã°ã£ãŸã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼ã§ã¯ãªãã€å‹äººã¨ã®äº¤æµã®ã‚ˆã†ã«è‡ªç„¶ãªå½¢ã§åœ°å…ƒã®é­…åŠ›ã‚’ä¼ãˆã‚‰ã‚Œã¾ã™ã€‚';
        benefitDescs[2].textContent = 'è‡ªåˆ†ã®éƒ½åˆã®è‰¯ã„æ™‚é–“ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã‚‹ãŸã‚ã€æœ¬æ¥­ã‚„å­¦æ¥­ã¨ä¸¡ç«‹ã—ãªãŒã‚‰åå…¥ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚';
        benefitDescs[3].textContent = 'è¶£å‘³ã‚„ç‰¹æŠ€ã€å°‚é–€çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸç‹¬è‡ªã®ã‚¬ã‚¤ãƒ‰ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€ã‚„ã‚ŠãŒã„ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚ã¾ã™ã€‚';
        benefitDescs[4].textContent = 'åœ°å…ƒã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã§ã€æ”¹ã‚ã¦æ•…éƒ·ã¸ã®æ„›ç€ãŒæ·±ã¾ã‚Šã€èª‡ã‚Šã‚’æŒã£ã¦ç´¹ä»‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚';
        benefitDescs[5].textContent = 'äºˆç´„ç®¡ç†ã‚„æ±ºæ¸ˆã€ä¿é™ºãªã©ã€ã‚¬ã‚¤ãƒ‰æ´»å‹•ã«å¿…è¦ãªã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹ãŸã‚ã€å®‰å¿ƒã—ã¦æ´»å‹•ã«é›†ä¸­ã§ãã¾ã™ã€‚';
        benefitDescs[6].textContent = 'äºˆç´„ã‚’å—ã‘å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã¯å®Œå…¨ã«è‡ªåˆ†æ¬¡ç¬¬ã€‚ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸæ´»å‹•ãŒå¯èƒ½ã§ã™ã€‚';
        benefitDescs[7].textContent = 'è¦³å…‰å®¢ã‚’åœ°å…ƒã®åº—èˆ—ã‚„æ–½è¨­ã«æ¡ˆå†…ã™ã‚‹ã“ã¨ã§ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã¨åœ°åŸŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç™ºå±•ã«è²¢çŒ®ã§ãã¾ã™ã€‚';
      }
      
      // ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ãƒ¡ãƒªãƒƒãƒˆèª¬æ˜æ–‡ã‚’ç¢ºå®Ÿã«ç¿»è¨³
      const benefitCardDescriptions = document.querySelectorAll('#guide-benefits .guide-benefit-card p.text-muted');
      benefitCardDescriptions.forEach((desc, index) => {
        const japaneseTexts = [
          'åœ°å…ƒã®æ–¹ã ã‘ãŒçŸ¥ã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã‚„ä½“é¨“ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€æ—¥å¸¸ãŒã‹ã‘ãŒãˆã®ãªã„æ—…ã®æ€ã„å‡ºã«å¤‰ã‚ã‚Šã¾ã™ã€‚',
          'å½¢å¼ã°ã£ãŸã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼ã§ã¯ãªãã€å‹äººã¨ã®äº¤æµã®ã‚ˆã†ã«è‡ªç„¶ãªå½¢ã§åœ°å…ƒã®é­…åŠ›ã‚’ä¼ãˆã‚‰ã‚Œã¾ã™ã€‚',
          'è‡ªåˆ†ã®éƒ½åˆã®è‰¯ã„æ™‚é–“ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã‚‹ãŸã‚ã€æœ¬æ¥­ã‚„å­¦æ¥­ã¨ä¸¡ç«‹ã—ãªãŒã‚‰åå…¥ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚',
          'è¶£å‘³ã‚„ç‰¹æŠ€ã€å°‚é–€çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸç‹¬è‡ªã®ã‚¬ã‚¤ãƒ‰ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€ã‚„ã‚ŠãŒã„ã‚’æŒã£ã¦å–ã‚Šçµ„ã‚ã¾ã™ã€‚',
          'åœ°å…ƒã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã§ã€æ”¹ã‚ã¦æ•…éƒ·ã¸ã®æ„›ç€ãŒæ·±ã¾ã‚Šã€èª‡ã‚Šã‚’æŒã£ã¦ç´¹ä»‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚',
          'äºˆç´„ç®¡ç†ã‚„æ±ºæ¸ˆã€ä¿é™ºãªã©ã€ã‚¬ã‚¤ãƒ‰æ´»å‹•ã«å¿…è¦ãªã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹ãŸã‚ã€å®‰å¿ƒã—ã¦æ´»å‹•ã«é›†ä¸­ã§ãã¾ã™ã€‚',
          'äºˆç´„ã‚’å—ã‘å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã¯å®Œå…¨ã«è‡ªåˆ†æ¬¡ç¬¬ã€‚ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸæ´»å‹•ãŒå¯èƒ½ã§ã™ã€‚',
          'è¦³å…‰å®¢ã‚’åœ°å…ƒã®åº—èˆ—ã‚„æ–½è¨­ã«æ¡ˆå†…ã™ã‚‹ã“ã¨ã§ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã¨åœ°åŸŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç™ºå±•ã«è²¢çŒ®ã§ãã¾ã™ã€‚'
        ];
        if (japaneseTexts[index]) {
          desc.textContent = japaneseTexts[index];
        }
      });
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã®ç´¹ä»‹æ–‡ã‚’æ—¥æœ¬èªã«æˆ»ã™
      const guideCards = document.querySelectorAll('.guide-card');
      guideCards.forEach((card, index) => {
        const description = card.querySelector('.card-text.mb-3');
        if (description) {
          const japaneseDescriptions = [
            'æ±äº¬ã®éš ã‚ŒãŸåæ‰€ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚ã‚°ãƒ«ãƒ¡ã‚„å†™çœŸã‚¹ãƒãƒƒãƒˆãŒå¾—æ„ã§ã™ã€‚',
            'æ­´å²ã¨ä¼çµ±ãŒæ¯ã¥ãäº¬éƒ½ã®é­…åŠ›ã‚’ã”æ¡ˆå†…ã€‚å¯ºç¤¾å·¡ã‚Šã‚„ä¼çµ±æ–‡åŒ–ä½“é¨“ãŒå¾—æ„ã§ã™ã€‚',
            'å¤§é˜ªãªã‚‰ã§ã¯ã®é£Ÿã¹æ­©ãã¨è¡—æ­©ããŒå°‚é–€ã€‚åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã‚‹ååº—ã«ã”æ¡ˆå†…ã—ã¾ã™ã€‚'
          ];
          if (japaneseDescriptions[index]) {
            description.textContent = japaneseDescriptions[index];
          }
        }
        
        // è¨€èªãƒãƒƒã‚¸ã‚‚æ—¥æœ¬èªã«
        const languageBadges = card.querySelectorAll('.badge.bg-light');
        languageBadges.forEach(badge => {
          if (badge.textContent.includes('English') || badge.textContent.includes('Basic English')) {
            badge.textContent = badge.textContent.includes('Basic') ? 'è‹±èª(åŸºç¤)' : 'è‹±èª';
          } else if (badge.textContent.includes('Japanese')) {
            badge.textContent = 'æ—¥æœ¬èª';
          } else if (badge.textContent.includes('Chinese')) {
            badge.textContent = 'ä¸­å›½èª';
          }
        });
      });
      
      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆè¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ç¢ºå®Ÿã«å¯¾å¿œï¼‰
      const guideRegisterSelectors = [
        '.btn-register-guide',
        'a[href="#register-guide"]',
        'button[onclick*="register"]',
        'a.btn.btn-primary[href*="register"]',
        '.btn.btn-primary',
        'a.btn-primary'
      ];
      
      guideRegisterSelectors.forEach(selector => {
        const btn = document.querySelector(selector);
        if (btn && (btn.textContent.includes('Register') || btn.textContent.includes('ç™»éŒ²'))) {
          btn.textContent = 'ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²ã™ã‚‹';
        }
      });
      
      // ã‚ˆã‚Šå…·ä½“çš„ã«ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’æ¢ã™
      const allButtons = document.querySelectorAll('a.btn, button.btn');
      allButtons.forEach(btn => {
        if (btn.textContent.includes('Register as Guide') || btn.textContent.includes('ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²')) {
          btn.textContent = 'ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²ã™ã‚‹';
        }
      });
      
      showStatus('æ—¥æœ¬èªã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ');
    }
    




      
      const howItWorksPs = document.querySelectorAll('#how-it-works p');
      if (howItWorksPs.length >= 3) {
        howItWorksPs[0].textContent = 'Complete registration with simple info and phone verification';
        howItWorksPs[1].textContent = 'Search for ideal guides by location, language, and expertise';
        howItWorksPs[2].textContent = 'Book your preferred date and enjoy a special experience';
      }
      
      // éƒ½é“åºœçœŒåã‚’è‹±èªã«ç¿»è¨³
      const locationElements = document.querySelectorAll('.guide-card .text-muted, .guide-location');
      locationElements.forEach(element => {
        const text = element.textContent;
        if (text.includes('æ±äº¬éƒ½')) {
          element.textContent = text.replace('æ±äº¬éƒ½', 'Tokyo');
        } else if (text.includes('äº¬éƒ½åºœ')) {
          element.textContent = text.replace('äº¬éƒ½åºœ', 'Kyoto');
        } else if (text.includes('å¤§é˜ªåºœ')) {
          element.textContent = text.replace('å¤§é˜ªåºœ', 'Osaka');
        } else if (text.includes('æ¸‹è°·åŒº')) {
          element.textContent = text.replace('æ¸‹è°·åŒº', 'Shibuya');
        } else if (text.includes('äº¬éƒ½å¸‚')) {
          element.textContent = text.replace('äº¬éƒ½å¸‚', 'Kyoto City');
        } else if (text.includes('å¤§é˜ªå¸‚')) {
          element.textContent = text.replace('å¤§é˜ªå¸‚', 'Osaka City');
        }
      });
      
      // ãƒ¡ãƒªãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¼·åˆ¶çš„ã«ã™ã¹ã¦è‹±èªã«çµ±ä¸€ï¼ˆ10å€‹ã™ã¹ã¦å¯¾å¿œï¼‰
      function translateBenefitTitlesToEnglish() {
        const selectors = [
          '#guide-benefits h5',
          '#guide-benefits .guide-benefit-card h5',
          '.guide-benefit-card h5',
          'section[id="guide-benefits"] h5',
          '.container .guide-benefit-card h5'
        ];
        
        const englishTitles = [
          'Your daily life becomes a tourism resource',
          'Welcome tourists as friends', 
          'Efficient work using spare time',
          'Turn your passion into work',
          'Meet people from around the world',
          'Improve and utilize language skills',
          'Deepen your love and pride for your hometown',
          'Reliable support system',
          'Work at your own pace',
          'Contribute to local revitalization'
        ];
        
        selectors.forEach(selector => {
          const titles = document.querySelectorAll(selector);
          console.log(`è‹±èªç¿»è¨³ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ ${selector}: ${titles.length}å€‹ã®ã‚¿ã‚¤ãƒˆãƒ«è¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
          titles.forEach((title, index) => {
            if (englishTitles[index]) {
              const oldText = title.textContent;
              title.textContent = englishTitles[index];
              console.log(`è‹±èªç¿»è¨³ ${index}: ${oldText} â†’ ${englishTitles[index]}`);
            }
          });
        });
      }
      
      // æ®µéšçš„å®Ÿè¡Œã§ç¢ºå®Ÿã«ç¿»è¨³
      translateBenefitTitlesToEnglish();
      setTimeout(translateBenefitTitlesToEnglish, 300);
      setTimeout(translateBenefitTitlesToEnglish, 800);
      setTimeout(translateBenefitTitlesToEnglish, 1500);
      setTimeout(translateBenefitTitlesToEnglish, 3000);
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ç¿»è¨³ï¼ˆã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’å¯¾è±¡ãƒ»å¼·åŒ–ç‰ˆï¼‰
      function translateAllGuideCards() {
        // ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§éš ã—ã‚¬ã‚¤ãƒ‰ã‚’å«ã‚€å…¨ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’ã‚­ãƒ£ãƒƒãƒ
        const guideCardSelectors = [
          '.guide-card', 
          '.guide-item', 
          '.guide-item.hidden-guide',
          '.hidden-guide',
          '[data-guide-id]',
          '.col-md-4 .card',
          '.col-lg-4 .card',
          '#guide-cards-container .guide-item',
          '.guides-container .guide-item'
        ];
        
        let allGuideCards = [];
        guideCardSelectors.forEach(selector => {
          const cards = document.querySelectorAll(selector);
          cards.forEach(card => {
            if (!allGuideCards.includes(card)) {
              allGuideCards.push(card);
            }
          });
        });
        
        console.log(`è‹±èªç¿»è¨³: ${allGuideCards.length}å€‹ã®ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’ç¿»è¨³ä¸­`);
        console.log('å¯¾è±¡ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰:', allGuideCards.map(card => card.querySelector('.card-title')?.textContent || 'No Title'));
        
        allGuideCards.forEach((card, index) => {
          console.log(`ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ ${index + 1} ã‚’è‹±èªç¿»è¨³ä¸­...`);
          
          // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ï¼ˆè¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ç¢ºå®Ÿã«ã‚­ãƒ£ãƒƒãƒï¼‰
          const detailSelectors = [
            '.btn', 
            'a[href*="guide"]', 
            '.guide-details-link',
            'button[onclick*="showGuideDetails"]',
            '.card-footer a',
            '.btn-primary'
          ];
          
          detailSelectors.forEach(selector => {
            const detailBtn = card.querySelector(selector);
            if (detailBtn && (detailBtn.textContent.includes('è©³ç´°') || detailBtn.textContent.includes('See Details'))) {
              detailBtn.textContent = 'See Details';
              console.log(`è©³ç´°ãƒœã‚¿ãƒ³ç¿»è¨³: See Details`);
            }
          });
          
          // è¨€èªãƒãƒƒã‚¸ï¼ˆåŒ…æ‹¬çš„ãªç¿»è¨³ï¼‰
          const langBadgeSelectors = [
            '.badge', 
            '.language-badge', 
            '.text-primary',
            '.badge.bg-light',
            '.badge.bg-primary',
            'span[class*="badge"]'
          ];
          
          langBadgeSelectors.forEach(selector => {
            const langBadges = card.querySelectorAll(selector);
            langBadges.forEach(badge => {
              const originalText = badge.textContent.trim();
              if (originalText === 'æ—¥æœ¬èª' || originalText === 'Japanese') {
                badge.textContent = 'Japanese';
                console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ Japanese`);
              } else if (originalText === 'è‹±èª' || originalText === 'English') {
                badge.textContent = 'English';
                console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ English`);
              } else if (originalText === 'ãƒ•ãƒ©ãƒ³ã‚¹èª' || originalText === 'French') {
                badge.textContent = 'French';
                console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ French`);
              } else if (originalText === 'ä¸­å›½èª' || originalText === 'Chinese') {
                badge.textContent = 'Chinese';
                console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ Chinese`);
              } else if (originalText === 'éŸ“å›½èª' || originalText === 'Korean') {
                badge.textContent = 'Korean';
                console.log(`è¨€èªãƒãƒƒã‚¸ç¿»è¨³: ${originalText} â†’ Korean`);
              }
            });
          });
          
          // å ´æ‰€ã®ç¿»è¨³ï¼ˆéƒ½é“åºœçœŒãƒ»å¸‚åŒºç”ºæ‘å®Œå…¨å¯¾å¿œï¼‰
          const locationSelectors = [
            '.guide-location', 
            '.text-muted',
            '.location',
            '.area',
            'small.text-muted',
            '.card-subtitle',
            'p.text-muted',
            '.card-text.text-muted'
          ];
          
          locationSelectors.forEach(selector => {
            const location = card.querySelector(selector);
            if (location) {
              const originalText = location.textContent;
              let text = originalText;
              
              // éƒ½é“åºœçœŒã¨å¸‚åŒºç”ºæ‘ã®ç¿»è¨³
              text = text.replace('åŒ—æµ·é“', 'Hokkaido').replace('æœ­å¹Œå¸‚', 'Sapporo City');
              text = text.replace('æ±äº¬éƒ½', 'Tokyo').replace('æ¸‹è°·åŒº', 'Shibuya');
              text = text.replace('æ²–ç¸„çœŒ', 'Okinawa').replace('é‚£è¦‡å¸‚', 'Naha City');
              text = text.replace('åºƒå³¶çœŒ', 'Hiroshima').replace('åºƒå³¶å¸‚', 'Hiroshima City');
              text = text.replace('äº¬éƒ½åºœ', 'Kyoto').replace('äº¬éƒ½å¸‚', 'Kyoto City');
              text = text.replace('å¤§é˜ªåºœ', 'Osaka').replace('å¤§é˜ªå¸‚', 'Osaka City');
              
              if (originalText !== text) {
                location.textContent = text;
                console.log(`å ´æ‰€ç¿»è¨³: ${originalText} â†’ ${text}`);
              }
            }
          });
        });
        
        console.log(`ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰è‹±èªç¿»è¨³å®Œäº†: åˆè¨ˆ ${allGuideCards.length}ä»¶`);
      }
      
      // å³åº§ã«ç¿»è¨³
      translateAllGuideCards();
      
      // é…å»¶å®Ÿè¡Œã§å‹•çš„ã«è¿½åŠ ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã‚‚ç¿»è¨³
      setTimeout(translateAllGuideCards, 500);
      setTimeout(translateAllGuideCards, 1500);
      setTimeout(translateAllGuideCards, 3000);
      
      // ã€Œã‚‚ã£ã¨ã¿ã‚‹ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ç›£è¦–ã¨ç¿»è¨³é©ç”¨
      const loadMoreBtn = document.getElementById('load-more-guides');
      if (loadMoreBtn) {
        loadMoreBtn.addEventListener('click', function() {
          // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾Œã«æ–°ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã«ç¿»è¨³ã‚’é©ç”¨
          setTimeout(() => {
            console.log('ã€Œã‚‚ã£ã¨ã¿ã‚‹ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¾Œã®ç¿»è¨³é©ç”¨');
            translateAllGuideCards();
          }, 100);
          
          setTimeout(translateAllGuideCards, 500);
          setTimeout(translateAllGuideCards, 1000);
        });
      }
      
      // MutationObserverã§DOMã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦æ–°ã—ã„ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã«ç¿»è¨³ã‚’é©ç”¨
      const observer = new MutationObserver(function(mutations) {
        let shouldTranslate = false;
        mutations.forEach(function(mutation) {
          if (mutation.type === 'childList') {
            mutation.addedNodes.forEach(function(node) {
              if (node.nodeType === 1 && 
                  (node.classList.contains('guide-card') || 
                   node.classList.contains('guide-item') || 
                   node.classList.contains('hidden-guide') ||
                   node.querySelector('.guide-card'))) {
                shouldTranslate = true;
              }
            });
          }
          
          // ã‚¯ãƒ©ã‚¹å¤‰æ›´ã‚‚ç›£è¦–ï¼ˆhidden-guideã‚¯ãƒ©ã‚¹ã®å‰Šé™¤ãªã©ï¼‰
          if (mutation.type === 'attributes' && 
              mutation.attributeName === 'class' &&
              mutation.target.classList.contains('guide-item')) {
            shouldTranslate = true;
          }
        });
        
        if (shouldTranslate) {
          console.log('æ–°ã—ã„ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ - ç¿»è¨³é©ç”¨');
          setTimeout(translateAllGuideCards, 50);
          setTimeout(translateAllGuideCards, 200);
        }
      });
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã‚’ç›£è¦–ï¼ˆå±æ€§å¤‰æ›´ã‚‚å«ã‚€ï¼‰
      const guideContainer = document.getElementById('guide-cards-container');
      if (guideContainer) {
        observer.observe(guideContainer, { 
          childList: true, 
          subtree: true, 
          attributes: true, 
          attributeFilter: ['class'] 
        });
      }
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã‚’ç›£è¦–
      const guideContainer = document.getElementById('guide-cards-container');
      if (guideContainer) {
        observer.observe(guideContainer, { childList: true, subtree: true });
      }
      
      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³ã®ç¿»è¨³ï¼ˆè‹±èªç‰ˆï¼‰
      function translateGuideRegisterButtonToEnglish() {
        const guideRegisterSelectors = [
          '.btn-register-guide',
          'a[href="#register-guide"]',
          'button[onclick*="register"]',
          'a.btn.btn-primary[href*="register"]',
          '.btn.btn-primary',
          'a.btn-primary'
        ];
        
        guideRegisterSelectors.forEach(selector => {
          const btn = document.querySelector(selector);
          if (btn && (btn.textContent.includes('ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²') || btn.textContent.includes('Register as Guide'))) {
            btn.textContent = 'Register as Guide';
          }
        });
        
        // ã‚ˆã‚Šå…·ä½“çš„ã«ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’æ¢ã™
        const allButtons = document.querySelectorAll('a.btn, button.btn');
        allButtons.forEach(btn => {
          if (btn.textContent.includes('ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²') || btn.textContent.includes('Register as Guide')) {
            btn.textContent = 'Register as Guide';
          }
        });
      }
      
      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³ã®ç¿»è¨³ã‚’å®Ÿè¡Œ
      translateGuideRegisterButtonToEnglish();
      
      // é…å»¶å®Ÿè¡Œã§ãƒœã‚¿ãƒ³ç¿»è¨³ã‚‚ç¢ºå®Ÿã«
      setTimeout(translateGuideRegisterButtonToEnglish, 300);
      setTimeout(translateGuideRegisterButtonToEnglish, 800);
      setTimeout(translateGuideRegisterButtonToEnglish, 1500);
      
      // ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»èºã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆï¼ˆæ­£ã—ã„ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
      const benefitsTitle = document.querySelector('#guide-benefits h2');
      if (benefitsTitle) benefitsTitle.textContent = 'Benefits of Being a Guide';
      
      const benefitsSubtitle = document.querySelector('#guide-benefits .lead');
      if (benefitsSubtitle) benefitsSubtitle.textContent = 'Utilize your knowledge and experience to provide special experiences for travelers worldwide';
      
      // ãƒ¡ãƒªãƒƒãƒˆé …ç›®ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ­£ã—ã„ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
      const benefitTitles = document.querySelectorAll('#guide-benefits h5');
      if (benefitTitles.length >= 8) {
        benefitTitles[0].textContent = 'Your daily life becomes a tourism resource';
        benefitTitles[1].textContent = 'Simply welcome tourists as friends';
        benefitTitles[2].textContent = 'Work efficiently during your free time';
        benefitTitles[3].textContent = 'Turn your passion into work';
        benefitTitles[4].textContent = 'Deepen your love and pride for your hometown';
        benefitTitles[5].textContent = 'Reliable support system';
        benefitTitles[6].textContent = 'Work at your own pace';
        benefitTitles[7].textContent = 'Contribute to local revitalization';
      }
      
      // ãƒ¡ãƒªãƒƒãƒˆé …ç›®ã®èª¬æ˜æ–‡ï¼ˆè¤‡æ•°ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ç¢ºå®Ÿã«ç¿»è¨³ï¼‰
      const benefitDescs = document.querySelectorAll('#guide-benefits .text-muted');
      if (benefitDescs.length >= 8) {
        benefitDescs[0].textContent = 'By sharing special places that only locals know about, your everyday surroundings become valuable tourism resources.';
        benefitDescs[1].textContent = 'Rather than a formal guided tour, you can naturally convey the charm of your local area as if spending time with friends.';
        benefitDescs[2].textContent = 'You can set your schedule according to your convenience, allowing you to earn income while balancing with your main job or studies.';
        benefitDescs[3].textContent = 'By providing unique guided experiences that utilize your hobbies, skills, and specialized knowledge, you can turn your passion into income.';
        benefitDescs[4].textContent = 'By promoting the attractions of your local area, you will develop a deeper appreciation and attachment to your hometown.';
        benefitDescs[5].textContent = 'We provide the essential support for guide activities such as reservation management, payment, and insurance, so you can work with peace of mind.';
        benefitDescs[6].textContent = 'When and how often you accept bookings is completely up to you, allowing for a lifestyle that suits your needs.';
        benefitDescs[7].textContent = 'By introducing tourists to local shops and facilities, you contribute to the revitalization of the local economy and community development.';
      }
      
      // ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ãƒ¡ãƒªãƒƒãƒˆèª¬æ˜æ–‡ã‚’ç¢ºå®Ÿã«ç¿»è¨³
      const benefitCardDescriptions = document.querySelectorAll('#guide-benefits .guide-benefit-card p.text-muted');
      benefitCardDescriptions.forEach((desc, index) => {
        const englishTexts = [
          'By sharing special places that only locals know about, your everyday surroundings become valuable tourism resources.',
          'Rather than a formal guided tour, you can naturally convey the charm of your local area as if spending time with friends.',
          'You can set your schedule according to your convenience, allowing you to earn income while balancing with your main job or studies.',
          'By providing unique guided experiences that utilize your hobbies, skills, and specialized knowledge, you can turn your passion into income.',
          'By promoting the attractions of your local area, you will develop a deeper appreciation and attachment to your hometown.',
          'We provide the essential support for guide activities such as reservation management, payment, and insurance, so you can work with peace of mind.',
          'When and how often you accept bookings is completely up to you, allowing for a lifestyle that suits your needs.',
          'By introducing tourists to local shops and facilities, you contribute to the revitalization of the local economy and community development.'
        ];
        if (englishTexts[index]) {
          desc.textContent = englishTexts[index];
        }
      });
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã®ç´¹ä»‹æ–‡ã‚’è‹±èªã«ç¿»è¨³
      const guideCards = document.querySelectorAll('.guide-card');
      guideCards.forEach((card, index) => {
        const description = card.querySelector('.card-text.mb-3');
        if (description) {
          const englishDescriptions = [
            'I guide you to hidden gems in Tokyo. Specializing in gourmet food and photo spots.',
            'Introducing the charm of Kyoto where history and tradition live. Specializing in temple visits and traditional cultural experiences.',
            'Specializing in Osaka\'s unique food tours and city walks. I\'ll guide you to local restaurants only locals know about.'
          ];
          if (englishDescriptions[index]) {
            description.textContent = englishDescriptions[index];
          }
        }
        
        // è¨€èªãƒãƒƒã‚¸ã‚‚è‹±èªã«
        const languageBadges = card.querySelectorAll('.badge.bg-light');
        languageBadges.forEach(badge => {
          if (badge.textContent.includes('æ—¥æœ¬èª')) {
            badge.textContent = 'Japanese';
          } else if (badge.textContent.includes('è‹±èª(åŸºç¤)')) {
            badge.textContent = 'Basic English';
          } else if (badge.textContent.includes('è‹±èª')) {
            badge.textContent = 'English';
          } else if (badge.textContent.includes('ä¸­å›½èª')) {
            badge.textContent = 'Chinese';
          }
        });
      });
      
      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒœã‚¿ãƒ³
      const guideRegisterBtn = document.querySelector('.btn-register-guide');
      if (guideRegisterBtn) guideRegisterBtn.textContent = 'Register as Guide';
      
      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®å¾©å®Ÿè¡Œ
      if (window.nuclearScrollFix) {
        setTimeout(() => {
          window.nuclearScrollFix();

        }, 100);
      }
      
      showStatus('Switched to English');
    }
  </script>
  
  <!-- ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨CSS -->
  <style>
    html {
      scroll-behavior: smooth;
    }
  </style>
  
  <!-- å”è³›åº—ãƒœã‚¿ãƒ³æ©Ÿèƒ½ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£ -->
  <script>
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ 
    function enableScrolling() {
      document.body.style.overflow = 'auto';
      document.documentElement.style.overflow = 'auto';
      document.body.style.position = 'static';
      document.body.style.height = 'auto';
      document.documentElement.style.height = 'auto';
      
      // modal-openã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç„¡åŠ¹åŒ–ã‚’é˜²æ­¢
      const modalObserver = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.attributeName === 'class') {
            if (document.body.classList.contains('modal-open')) {
              document.body.style.overflow = 'auto';
              document.body.style.paddingRight = '0';
            }
          }
        });
      });
      
      modalObserver.observe(document.body, {
        attributes: true,
        attributeFilter: ['class']
      });
      
      // å®šæœŸçš„ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç¢ºèªãƒ»ä¿®æ­£
      setInterval(function() {
        if (document.body.style.overflow === 'hidden' || 
            document.documentElement.style.overflow === 'hidden') {
          document.body.style.overflow = 'auto';
          document.documentElement.style.overflow = 'auto';
        }
      }, 100);
    }

    // å”è³›åº—ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    document.addEventListener('DOMContentLoaded', function() {
      enableScrolling();
      
      // å”è³›åº—ç™»éŒ²ãƒœã‚¿ãƒ³
      const sponsorRegisterBtn = document.getElementById('sponsorRegisterBtn');
      if (sponsorRegisterBtn) {
        sponsorRegisterBtn.addEventListener('click', function() {
          alert('å”è³›åº—ç™»éŒ²ã‚·ã‚¹ãƒ†ãƒ ã«ç§»å‹•ã—ã¾ã™');
          // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ sponsor-registration.html ã«ç§»å‹•
          // window.location.href = 'sponsor-registration.html';
        });
      }

      // å”è³›åº—ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
      const sponsorLoginBtn = document.getElementById('sponsorLoginBtn');
      if (sponsorLoginBtn) {
        sponsorLoginBtn.addEventListener('click', function() {
          alert('å”è³›åº—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ç§»å‹•ã—ã¾ã™');
          // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ sponsor-dashboard.html ã«ç§»å‹•
          // window.location.href = 'sponsor-dashboard.html';
        });
      }
    });

    // å³åº§ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£ã‚’å®Ÿè¡Œ
    enableScrolling();
  </script>
  
  <!-- å•é¡Œã®ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡åŠ¹åŒ– -->
  <!-- <script src="debug-redirect-tracker.js"></script> -->
  
  <!-- è¤‡é›‘ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å…¨ã¦ç„¡åŠ¹åŒ–ã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ã™ã‚‹ -->
  <!--
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«èªè¨¼çŠ¶æ…‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
    window.TouristAuthManager = (function() {
      let authData = null;
      let isProtected = false;
      
      // èªè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ã®å ´æ‰€ã«åˆ†æ•£ä¿å­˜
      function distributeAuthData(data) {
        if (!data) return;
        
        const dataString = JSON.stringify(data);
        authData = data;
        
        // ãƒ¡ã‚¤ãƒ³ä¿å­˜å ´æ‰€
        localStorage.setItem('touristData', dataString);
        sessionStorage.setItem('currentUser', dataString);
        
        // åˆ†æ•£ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        localStorage.setItem('auth_backup_1', dataString);
        localStorage.setItem('auth_backup_2', dataString);
        sessionStorage.setItem('auth_session_backup', dataString);
        
        // ãƒ¡ãƒ¢ãƒªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        window.touristAuthData = data;
        window.protectTouristAuth = true;
        
        console.log('ğŸ” èªè¨¼ãƒ‡ãƒ¼ã‚¿åˆ†æ•£ä¿å­˜å®Œäº†:', data.name);
      }
      
      // èªè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ
      function recoverAuthData() {
        // ãƒ¡ãƒ¢ãƒªã‹ã‚‰å¾©å…ƒ
        if (authData && authData.type === 'tourist' && authData.isAuthenticated) {
          console.log('ğŸ”„ ãƒ¡ãƒ¢ãƒªã‹ã‚‰èªè¨¼ãƒ‡ãƒ¼ã‚¿å¾©å…ƒ:', authData.name);
          distributeAuthData(authData);
          return authData;
        }
        
        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
        const backupKeys = ['touristData', 'currentUser', 'auth_backup_1', 'auth_backup_2', 'auth_session_backup'];
        
        for (const key of backupKeys) {
          try {
            const storage = key.includes('session') ? sessionStorage : localStorage;
            const data = storage.getItem(key);
            if (data) {
              const userData = JSON.parse(data);
              if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
                console.log('ğŸ”„ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰èªè¨¼ãƒ‡ãƒ¼ã‚¿å¾©å…ƒ:', userData.name, '(from:', key, ')');
                authData = userData;
                distributeAuthData(userData);
                return userData;
              }
            }
          } catch (e) {
            console.warn('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¾©å…ƒã‚¨ãƒ©ãƒ¼:', key, e);
          }
        }
        
        return null;
      }
      
      // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
      function checkAuth() {
        const mainData = localStorage.getItem('touristData');
        if (mainData) {
          try {
            const userData = JSON.parse(mainData);
            if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
              authData = userData;
              return userData;
            }
          } catch (e) {
            console.warn('ãƒ¡ã‚¤ãƒ³èªè¨¼ãƒ‡ãƒ¼ã‚¿ç ´æ - å¾©å…ƒã‚’è©¦è¡Œ');
          }
        }
        
        // ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯å¾©å…ƒã‚’è©¦è¡Œ
        return recoverAuthData();
      }
      
      // åˆæœŸåŒ–
      function init() {
        console.log('ğŸš€ èªè¨¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–');
        
        const existingData = checkAuth();
        if (existingData) {
          console.log('ğŸ›¡ï¸ æ—¢å­˜èªè¨¼ãƒ‡ãƒ¼ã‚¿æ¤œå‡º:', existingData.name);
          distributeAuthData(existingData);
          setupProtection();
        }
        
        // å®šæœŸçš„ãªå¥åº·ãƒã‚§ãƒƒã‚¯
        setInterval(() => {
          if (!localStorage.getItem('touristData') && authData) {
            console.log('ğŸš¨ èªè¨¼ãƒ‡ãƒ¼ã‚¿æ¶ˆå¤±æ¤œå‡º - è‡ªå‹•å¾©æ—§');
            distributeAuthData(authData);
          }
        }, 1000);

        // ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã®ä¿è­·
        window.addEventListener('beforeunload', () => {
          if (authData) {
            sessionStorage.setItem('nav_backup', JSON.stringify(authData));
          }
        });

        // ãƒšãƒ¼ã‚¸å¾©å¸°æ™‚ã®å¾©æ—§
        window.addEventListener('pageshow', () => {
          const navBackup = sessionStorage.getItem('nav_backup');
          if (navBackup && !localStorage.getItem('touristData')) {
            try {
              const backupData = JSON.parse(navBackup);
              distributeAuthData(backupData);
              console.log('ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¾©æ—§å®Œäº†');
            } catch (e) {
              console.warn('ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¾©æ—§ã‚¨ãƒ©ãƒ¼:', e);
            }
          }
        });
      }
      
      // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿è­·
      function setupProtection() {
        if (isProtected) return;
        isProtected = true;
        
        const originalMethods = {
          localRemove: localStorage.removeItem,
          localClear: localStorage.clear,

          sessionClear: sessionStorage.clear
        };
        
        localStorage.removeItem = function(key) {
          if (key === 'touristData' || key.startsWith('auth_backup') || key.startsWith('touristBackup_')) {
            console.log('ğŸš« èªè¨¼ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚’é˜»æ­¢:', key);
            return;
          }
          return originalMethods.localRemove.call(this, key);
        };
        
        localStorage.clear = function() {
          console.log('ğŸš« localStorageå…¨å‰Šé™¤ã‚’é˜»æ­¢');
          const authKeys = ['touristData', 'auth_backup_1', 'auth_backup_2'];
          const backupData = {};
          authKeys.forEach(key => {
            const data = localStorage.getItem(key);
            if (data) backupData[key] = data;
          });
          
          originalMethods.localClear.call(this);
          
          Object.keys(backupData).forEach(key => {
            localStorage.setItem(key, backupData[key]);
          });
        };
        
        sessionStorage.removeItem = function(key) {
          if (key === 'currentUser' || key === 'auth_session_backup') {
            console.log('ğŸš« ã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚’é˜»æ­¢:', key);
            return;
          }
          return originalMethods.sessionRemove.call(this, key);
        };
        
        sessionStorage.clear = function() {
          console.log('ğŸš« sessionStorageå…¨å‰Šé™¤ã‚’é˜»æ­¢');
          const authData = sessionStorage.getItem('currentUser');
          const backupData = sessionStorage.getItem('auth_session_backup');
          
          originalMethods.sessionClear.call(this);
          
          if (authData) sessionStorage.setItem('currentUser', authData);
          if (backupData) sessionStorage.setItem('auth_session_backup', backupData);
        };
      }
      
      return {
        init: init,
        save: distributeAuthData,
        recover: recoverAuthData,
        check: checkAuth,
        isAuthenticated: function() {
          const auth = checkAuth();
          return auth && auth.type === 'tourist' && auth.isAuthenticated;
        }
      };
    })();

    // çµ±ä¸€èªè¨¼ãƒã‚§ãƒƒã‚¯é–¢æ•°ã‚’ä½œæˆ
    function isUserAuthenticated() {
      console.log('=== èªè¨¼ãƒã‚§ãƒƒã‚¯é–‹å§‹ ===');
      
      // è¤‡æ•°ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰èªè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
      const sources = [
        { key: 'touristData', storage: localStorage },
        { key: 'currentUser', storage: sessionStorage },
        { key: 'auth_backup_1', storage: localStorage },
        { key: 'auth_backup_2', storage: localStorage }
      ];
      
      for (const source of sources) {
        try {
          const data = source.storage.getItem(source.key);
          console.log(`ãƒã‚§ãƒƒã‚¯ä¸­: ${source.key} = ${data ? 'å­˜åœ¨' : 'ãªã—'}`);
          if (data) {
            const userData = JSON.parse(data);
            console.log(`ãƒ‘ãƒ¼ã‚¹çµæœ:`, userData);
            if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
              console.log('èªè¨¼æˆåŠŸ:', userData.name, 'from', source.key);
              return true;
            }
          }
        } catch (e) {
          console.warn(`${source.key} ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:`, e);
          continue;
        }
      }
      
      console.log('èªè¨¼ãƒã‚§ãƒƒã‚¯å¤±æ•— - æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      return false;
    }
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦è¨­å®š
    window.isUserAuthenticated = isUserAuthenticated;

    // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
    let storageMonitor = setInterval(() => {
      const hasTouristData = localStorage.getItem('touristData');
      if (!hasTouristData) {
        console.log('è­¦å‘Š: touristDataãŒæ¶ˆå¤±ã—ã¾ã—ãŸ');
        
        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§ã‚’è©¦è¡Œ
        const backup1 = localStorage.getItem('auth_backup_1');
        const backup2 = localStorage.getItem('auth_backup_2');
        const sessionBackup = sessionStorage.getItem('currentUser');
        
        if (backup1 || backup2 || sessionBackup) {
          console.log('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰è‡ªå‹•å¾©æ—§ã‚’å®Ÿè¡Œ');
          const recoveryData = backup1 || backup2 || sessionBackup;
          localStorage.setItem('touristData', recoveryData);
          sessionStorage.setItem('currentUser', recoveryData);
        }
      }
    }, 2000);
      
      function protectTouristStorageEarly(touristData) {
        const originalRemoveItem = localStorage.removeItem;
        const originalClear = localStorage.clear;
        const originalSessionRemove = sessionStorage.removeItem;
        const originalSessionClear = sessionStorage.clear;
        
        localStorage.removeItem = function(key) {
          if (window.protectTouristAuth && (key === 'touristData' || key.startsWith('touristBackup_'))) {
            console.log('ğŸš« æ—©æœŸä¿è­·: è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚’é˜»æ­¢:', key);
            return;
          }
          return originalRemoveItem.call(this, key);
        };
        
        localStorage.clear = function() {
          if (window.protectTouristAuth) {
            console.log('ğŸš« æ—©æœŸä¿è­·: localStorageå…¨å‰Šé™¤ã‚’é˜»æ­¢');
            const keysToKeep = [];
            for (let i = 0; i < localStorage.length; i++) {
              const key = localStorage.key(i);
              if (key === 'touristData' || key.startsWith('touristBackup_')) {
                keysToKeep.push({ key, value: localStorage.getItem(key) });
              }
            }
            originalClear.call(this);
            keysToKeep.forEach(item => {
              localStorage.setItem(item.key, item.value);
            });
            return;
          }
          return originalClear.call(this);
        };
        
        sessionStorage.removeItem = function(key) {
          if (window.protectTouristAuth && key === 'currentUser') {
            console.log('ğŸš« æ—©æœŸä¿è­·: ã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚’é˜»æ­¢:', key);
            return;
          }
          return originalSessionRemove.call(this, key);
        };
        
        sessionStorage.clear = function() {
          if (window.protectTouristAuth) {
            console.log('ğŸš« æ—©æœŸä¿è­·: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å…¨å‰Šé™¤ã‚’é˜»æ­¢');
            const userData = sessionStorage.getItem('currentUser');
            originalClear.call(this);
            if (userData) {
              sessionStorage.setItem('currentUser', userData);
            }
            return;
          }
          return originalSessionClear.call(this);
        };
      }
    })();

    document.addEventListener('DOMContentLoaded', function() {
      // å¼·åŠ›ãªèªè¨¼çŠ¶æ…‹å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ 
      function forceAuthRecovery() {
        console.log('ğŸ”§ å¼·åˆ¶èªè¨¼å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹');
        
        // è¤‡æ•°ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚½ãƒ¼ã‚¹ã‹ã‚‰æ¤œç´¢
        const backupSources = [
          { key: 'auth_backup_1', storage: localStorage },
          { key: 'auth_backup_2', storage: localStorage },
          { key: 'auth_session_backup', storage: sessionStorage },
          { key: 'currentUser', storage: sessionStorage }
        ];
        
        for (const source of backupSources) {
          try {
            const data = source.storage.getItem(source.key);
            if (data) {
              const userData = JSON.parse(data);
              if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
                console.log('âœ… èªè¨¼ãƒ‡ãƒ¼ã‚¿å¾©æ—§:', userData.name);
                
                // å…¨ã¦ã®ä¿å­˜å ´æ‰€ã«å¾©å…ƒ
                localStorage.setItem('touristData', data);
                sessionStorage.setItem('currentUser', data);
                localStorage.setItem('auth_backup_1', data);
                localStorage.setItem('auth_backup_2', data);
                sessionStorage.setItem('auth_session_backup', data);
                
                window.touristAuthData = userData;
                window.protectTouristAuth = true;
                
                updateLoginStateUI();
                return true;
              }
            }
          } catch (e) {
            console.warn('å¾©æ—§è©¦è¡Œã‚¨ãƒ©ãƒ¼:', source.key, e);
          }
        }
        
        return false;
      }
      
      // ç«¶åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œå…¨ç„¡åŠ¹åŒ–
      window.disableAuthCleanup = true;
      window.preventLogout = true;
      window.blockAuthReset = true;
      
      // æœ‰å®³ãªé–¢æ•°ã‚’ç„¡åŠ¹åŒ–
      const dangerousFunctions = [
        'cleanupInvalidAuthData',
        'performCompleteLogout', 
        'clearAuthenticationData',
        'updateUIAfterLogout',
        'executeForceLogout',
        'handleLogout'
      ];
      
      dangerousFunctions.forEach(funcName => {
        const originalFunction = window[funcName];
        Object.defineProperty(window, funcName, {
          value: function() {
            // ç™»éŒ²ä¸­ã¾ãŸã¯èªè¨¼ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯å…ƒã®é–¢æ•°ã‚’å®Ÿè¡Œ
            if (window.isRegistering || !localStorage.getItem('touristData')) {
              console.log(`ğŸ›¡ï¸ ${funcName} allowed (registering or not authenticated)`);
              return originalFunction ? originalFunction.apply(this, arguments) : false;
            }
            console.log(`ğŸ›¡ï¸ ${funcName} blocked`);
            return false;
          },
          writable: false,
          configurable: false
        });
      });
      
      // ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èªè¨¼ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–
      const originalRemoveItem = localStorage.removeItem;
      localStorage.removeItem = function(key) {
        if (key === 'touristData' && window.protectTouristAuth) {
          console.log('ğŸ›¡ï¸ touristDataå‰Šé™¤ã‚’ãƒ–ãƒ­ãƒƒã‚¯:', key);
          return;
        }
        return originalRemoveItem.call(this, key);
      };
      
      const originalSessionRemove = sessionStorage.removeItem;
      sessionStorage.removeItem = function(key) {
        if ((key === 'currentUser' || key === 'auth_session_backup') && window.protectTouristAuth) {
          console.log('ğŸ›¡ï¸ ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚’ãƒ–ãƒ­ãƒƒã‚¯:', key);
          return;
        }
        return originalSessionRemove.call(this, key);
      };

      // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®å³åº§å¾©æ—§
      forceAuthRecovery();
      
      // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®UIçŠ¶æ…‹ç¢ºèªã¨æ›´æ–°ã‚’è¤‡æ•°å›å®Ÿè¡Œ
      function performAuthCheckAndUIUpdate() {
        const touristData = localStorage.getItem('touristData');
        if (touristData) {
          try {
            const userData = JSON.parse(touristData);
            if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
              console.log('ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’æ¤œå‡º - UIæ›´æ–°');
              updateLoginStateUI();
              return true;
            }
          } catch (e) {
            console.warn('ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚èªè¨¼ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:', e);
          }
        }
        return false;
      }
      
      // å³åº§ã«å®Ÿè¡Œ
      performAuthCheckAndUIUpdate();
      
      // å°‘ã—é…å»¶ã—ã¦å†å®Ÿè¡Œ
      setTimeout(() => {
        performAuthCheckAndUIUpdate();
      }, 100);
      
      // ã•ã‚‰ã«é…å»¶ã—ã¦å†å®Ÿè¡Œ
      setTimeout(() => {
        performAuthCheckAndUIUpdate();
      }, 500);
      
      // æœ€çµ‚ç¢ºèª
      setTimeout(() => {
        performAuthCheckAndUIUpdate();
      }, 1000);

      // DOMContentLoadedæ™‚ã®ç¢ºå®Ÿãªå®Ÿè¡Œ
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOMContentLoaded - èªè¨¼UIç¢ºèªå®Ÿè¡Œ');
        performAuthCheckAndUIUpdate();
      });

      // UIè¦ç´ ã®ç›£è¦–ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¿®æ­£
      function setupUIMonitoring() {
        const targetNode = document.querySelector('#registerDropdown');
        if (!targetNode) {
          setTimeout(setupUIMonitoring, 100);
          return;
        }

        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'childList' || mutation.type === 'characterData') {
              const registerBtn = document.getElementById('registerDropdown');
              if (registerBtn && registerBtn.textContent.includes('æ–°è¦ç™»éŒ²')) {
                const touristData = localStorage.getItem('touristData');
                if (touristData) {
                  try {
                    const userData = JSON.parse(touristData);
                    if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
                      console.log('UIå¤‰æ›´æ¤œå‡º - èªè¨¼çŠ¶æ…‹ã‚’å¾©å…ƒ');
                      updateLoginStateUI();
                    }
                  } catch (e) {
                    console.warn('UIç›£è¦–ä¸­ã®èªè¨¼ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:', e);
                  }
                }
              }
            }
          });
        });

        observer.observe(targetNode, {
          childList: true,
          subtree: true,
          characterData: true
        });

        console.log('UIç›£è¦–ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹');
      }

      // UIç›£è¦–ã‚’é–‹å§‹
      setTimeout(setupUIMonitoring, 200);

      // ãƒšãƒ¼ã‚¸ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã®èªè¨¼çŠ¶æ…‹ä¿æŒ
      window.addEventListener('beforeunload', function() {
        const touristData = localStorage.getItem('touristData');
        if (touristData) {
          // æ¬¡å›ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®ãŸã‚ã«ç¢ºå®Ÿã«ä¿å­˜
          sessionStorage.setItem('auth_navigation_backup', touristData);
          console.log('ãƒšãƒ¼ã‚¸é›¢è„±å‰ã«èªè¨¼çŠ¶æ…‹ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—');
        }
      });

      // ãƒšãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®èªè¨¼çŠ¶æ…‹å¾©å…ƒã‚’å¼·åŒ–
      window.addEventListener('focus', function() {
        console.log('ãƒšãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å–å¾— - èªè¨¼çŠ¶æ…‹ç¢ºèª');
        const navBackup = sessionStorage.getItem('auth_navigation_backup');
        if (navBackup && !localStorage.getItem('touristData')) {
          console.log('ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ');
          localStorage.setItem('touristData', navBackup);
          updateLoginStateUI();
        }
      });

      // æœ€å¾Œã®ç ¦ - å®šæœŸçš„ãªUIçŠ¶æ…‹ç›£è¦–ã¨ä¿®æ­£
      setInterval(() => {
        const touristData = localStorage.getItem('touristData');
        const registerBtn = document.getElementById('registerDropdown');
        
        if (touristData && registerBtn) {
          try {
            const userData = JSON.parse(touristData);
            if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
              // èªè¨¼æ¸ˆã¿ãªã®ã«ãƒœã‚¿ãƒ³ãŒã€Œæ–°è¦ç™»éŒ²ã€ã®ã¾ã¾ã®å ´åˆã¯ä¿®æ­£
              if (registerBtn.textContent.includes('æ–°è¦ç™»éŒ²')) {
                console.log('UIä¸æ•´åˆæ¤œå‡º - å¼·åˆ¶ä¿®æ­£å®Ÿè¡Œ');
                updateLoginStateUI();
              }
            }
          } catch (e) {
            console.warn('å®šæœŸUIç›£è¦–ã‚¨ãƒ©ãƒ¼:', e);
          }
        }
      }, 3000);
      
      // å®šæœŸçš„ãªèªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ã¨å¾©æ—§
      setInterval(() => {
        const mainData = localStorage.getItem('touristData');
        if (!mainData && window.touristAuthData) {
          console.log('ğŸš¨ èªè¨¼ãƒ‡ãƒ¼ã‚¿æ¶ˆå¤±æ¤œå‡º - å¾©æ—§å®Ÿè¡Œ');
          forceAuthRecovery();
          // UIçŠ¶æ…‹ã‚‚ç¢ºèªã—ã¦æ›´æ–°
          setTimeout(() => {
            const registerBtn = document.getElementById('registerDropdown');
            if (registerBtn && registerBtn.textContent.includes('æ–°è¦ç™»éŒ²')) {
              console.log('UIçŠ¶æ…‹ãŒä¸æ­£ - å¼·åˆ¶æ›´æ–°');
              updateLoginStateUI();
            }
          }, 100);
        }
      }, 1000);

      // ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ã®å¹²æ¸‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯
      const protectedKeys = ['touristData', 'currentUser', 'auth_backup_1', 'auth_backup_2', 'auth_session_backup'];
      
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã®ä¸Šæ›¸ãã‚’é˜²æ­¢
      Object.defineProperty(window, 'performCompleteLogout', {
        value: function() {
          if (window.protectTouristAuth) {
            console.log('ğŸ›¡ï¸ å¤–éƒ¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆè©¦è¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯');
            return false;
          }
        },
        writable: false
      });
      
      Object.defineProperty(window, 'clearAuthenticationData', {
        value: function() {
          if (window.protectTouristAuth) {
            console.log('ğŸ›¡ï¸ å¤–éƒ¨èªè¨¼ã‚¯ãƒªã‚¢è©¦è¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯');
            return false;
          }
        },
        writable: false
      });
      
      // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
      if (sessionStorage.getItem('showLoginOnLoad') === 'true') {
        sessionStorage.removeItem('showLoginOnLoad');
        const accessMessage = sessionStorage.getItem('accessAttemptMessage');
        if (accessMessage) {
          sessionStorage.removeItem('accessAttemptMessage');
        }
        setTimeout(() => {
          const pendingGuideId = sessionStorage.getItem('pendingGuideId');
          if (pendingGuideId) {
            showTouristLoginPrompt(pendingGuideId);
          } else {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šé€šå¸¸ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
          }
        }, 800);
      }
      
      // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ç›´æ¥ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ãŸå ´åˆã®å‡¦ç†
      const urlParams = new URLSearchParams(window.location.search);
      const requireLogin = urlParams.get('requireLogin');
      const directGuideId = urlParams.get('guide');
      
      if (requireLogin === 'true') {
        // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ãªå ´åˆ
        if (directGuideId) {
          sessionStorage.setItem('pendingGuideId', directGuideId);
        }
        setTimeout(() => {
          if (directGuideId) {
            showTouristLoginPrompt(directGuideId);
          } else {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
          }
        }, 1000);
        // URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤
        window.history.replaceState({}, document.title, window.location.pathname);
      } else if (directGuideId && !localStorage.getItem('touristData')) {
        // æœªãƒ­ã‚°ã‚¤ãƒ³ã§ç›´æ¥ã‚¬ã‚¤ãƒ‰ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ãŸå ´åˆ
        sessionStorage.setItem('pendingGuideId', directGuideId);
        setTimeout(() => {
          showTouristLoginPrompt(directGuideId);
        }, 1000);
        // URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤
        window.history.replaceState({}, document.title, window.location.pathname);
      }
      
      // ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
      const touristRadio = document.getElementById('login-user-tourist');
      const guideRadio = document.getElementById('login-user-guide');
      const userTypeDescription = document.getElementById('user-type-description');
      
      function updateUserTypeDescription() {
        if (touristRadio && guideRadio && userTypeDescription) {
          if (touristRadio.checked) {
            userTypeDescription.textContent = 'è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã—ãŸã‚Šäºˆç´„ã§ãã¾ã™';
          } else if (guideRadio.checked) {
            userTypeDescription.textContent = 'ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ç·¨é›†ã‚„äºˆç´„ã®ç®¡ç†ãŒã§ãã¾ã™';
          }
          console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ:', touristRadio.checked ? 'tourist' : 'guide');
        }
      }
      
      // åˆæœŸçŠ¶æ…‹ã§èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
      updateUserTypeDescription();
      
      // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®å¤‰æ›´ã‚’ç›£è¦–
      if (touristRadio) touristRadio.addEventListener('change', updateUserTypeDescription);
      if (guideRadio) guideRadio.addEventListener('change', updateUserTypeDescription);
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // èº«åˆ†è¨¼æ˜æ›¸ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡æ›¿ï¼ˆã‚¬ã‚¤ãƒ‰ï¼‰
      const guideIdTypeSelect = document.getElementById('guide-id-type');
      const guideIdBackContainer = document.getElementById('guide-id-back-container');
      
      if (guideIdTypeSelect && guideIdBackContainer) {
        guideIdTypeSelect.addEventListener('change', function() {
          if (this.value === 'drivers_license' || this.value === 'my_number') {
            guideIdBackContainer.classList.remove('d-none');
          } else {
            guideIdBackContainer.classList.add('d-none');
          }
        });
      }
      
      // èº«åˆ†è¨¼æ˜æ›¸ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡æ›¿ï¼ˆæ—…è¡Œè€…ï¼‰
      const touristIdTypeSelect = document.getElementById('tourist-id-type');
      const touristIdBackContainer = document.getElementById('tourist-id-back-container');
      
      if (touristIdTypeSelect && touristIdBackContainer) {
        touristIdTypeSelect.addEventListener('change', function() {
          if (this.value === 'drivers_license' || this.value === 'my_number') {
            touristIdBackContainer.classList.remove('d-none');
          } else {
            touristIdBackContainer.classList.add('d-none');
          }
        });
      }

      // èº«åˆ†è¨¼æ˜æ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨å‰Šé™¤æ©Ÿèƒ½ã®è¨­å®š
      setupDocumentPreview('guide-id-front');
      setupDocumentPreview('guide-id-back');
      setupDocumentPreview('tourist-id-front');
      setupDocumentPreview('tourist-id-back');
      
      function setupDocumentPreview(inputId) {
        const fileInput = document.getElementById(inputId);
        const previewImg = document.getElementById(`${inputId}-preview`);
        const deleteBtn = document.getElementById(`${inputId}-delete`);
        
        if (fileInput && previewImg && deleteBtn) {
          // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
          fileInput.addEventListener('change', function(e) {
            if (this.files && this.files[0]) {
              const reader = new FileReader();
              
              reader.onload = function(e) {
                previewImg.src = e.target.result;
                previewImg.classList.remove('d-none');
                deleteBtn.classList.remove('d-none');
              };
              
              reader.readAsDataURL(this.files[0]);
            }
          });
          
          // å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
          deleteBtn.addEventListener('click', function() {
            fileInput.value = '';
            previewImg.src = '';
            previewImg.classList.add('d-none');
            deleteBtn.classList.add('d-none');
          });
        }
      }
      
      // ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºã¨ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤º
      function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      }
      
      // PCã®å ´åˆã¯ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
      if (!isMobile()) {
        document.querySelectorAll('.mobile-only').forEach(elem => {
          elem.style.display = 'none';
        });
      }
      
      // é›»è©±ç•ªå·èªè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      setupPhoneVerification('tourist');
      setupPhoneVerification('guide');
      
      function setupPhoneVerification(prefix) {
        const sendCodeBtn = document.getElementById(`${prefix}-send-code-btn`);
        const codeInput = document.getElementById(`${prefix}-verification-code`);
        const verifiedDiv = document.getElementById(`${prefix}-phone-verified`);
        const phoneInput = document.getElementById(`${prefix}-phone-number`);
        
        if (sendCodeBtn && codeInput && verifiedDiv && phoneInput) {
          sendCodeBtn.addEventListener('click', function() {
            const phone = phoneInput.value.trim();
            if (!phone) {
              alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
            
            // é€ä¿¡ä¸­çŠ¶æ…‹ã‚’è¡¨ç¤º
            const originalBtnText = sendCodeBtn.textContent;
            sendCodeBtn.disabled = true;
            sendCodeBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> é€ä¿¡ä¸­...';
            
            // é€ä¿¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1ç§’å¾Œï¼‰
            setTimeout(() => {
              sendCodeBtn.disabled = false;
              sendCodeBtn.textContent = originalBtnText;
              alert('ãƒ†ã‚¹ãƒˆç”¨èªè¨¼ã‚³ãƒ¼ãƒ‰: 123456');
              codeInput.value = '123456';
            }, 1000);
          });
          
          // èªè¨¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
          const verifyContainer = document.createElement('div');
          verifyContainer.className = 'mt-3';
          const verifyButton = document.createElement('button');
          verifyButton.type = 'button';
          verifyButton.className = 'btn btn-success';
          verifyButton.textContent = 'èªè¨¼ã™ã‚‹';
          verifyButton.id = `${prefix}-verify-code-btn`;
          verifyContainer.appendChild(verifyButton);
          
          const codeContainer = document.getElementById(`${prefix}-verification-code-container`);
          if (codeContainer && !document.getElementById(`${prefix}-verify-code-btn`)) {
            codeContainer.appendChild(verifyContainer);
          }
          
          // èªè¨¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
          verifyButton.addEventListener('click', function() {
            const code = codeInput.value.trim();
            if (!code) {
              alert('èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
            
            // èªè¨¼ä¸­çŠ¶æ…‹ã‚’è¡¨ç¤º
            const originalBtnText = verifyButton.textContent;
            verifyButton.disabled = true;
            verifyButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> èªè¨¼ä¸­...';
            
            // èªè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1ç§’å¾Œï¼‰
            setTimeout(() => {
              if (code === '123456') {
                verifiedDiv.classList.remove('d-none');
                phoneInput.readOnly = true;
                sendCodeBtn.disabled = true;
                verifyButton.disabled = true;
                
                // èªè¨¼æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                alert('é›»è©±ç•ªå·ãŒèªè¨¼ã•ã‚Œã¾ã—ãŸ');
                
                // èªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã‚’éè¡¨ç¤ºã«
                setTimeout(() => {
                  if (codeContainer) {
                    codeContainer.style.display = 'none';
                  }
                }, 1500);
              } else {
                verifyButton.disabled = false;
                verifyButton.textContent = originalBtnText;
                alert('èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
              }
            }, 1000);
          });
          
          // å…¥åŠ›æ™‚ã®è‡ªå‹•æ¤œè¨¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
          codeInput.addEventListener('input', function() {
            // 6æ¡ã®èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒå…¥åŠ›ã•ã‚ŒãŸã‚‰èªè¨¼ãƒœã‚¿ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            if (this.value.length === 6) {
              verifyButton.classList.add('btn-pulse');
            } else {
              verifyButton.classList.remove('btn-pulse');
            }
          });
        }
      }
      
      // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      const touristForm = document.getElementById('tourist-register-form');
      const guideForm = document.getElementById('guide-register-form');
      const loginForm = document.getElementById('login-form');
      
      if (touristForm) {
        touristForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // é›»è©±ç•ªå·èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ¢ç”¨ã«ç°¡ç•¥åŒ–ï¼‰
          const phoneVerified = document.getElementById('tourist-phone-verified');
          if (phoneVerified.classList.contains('d-none')) {
            // ãƒ‡ãƒ¢ç”¨ï¼šé›»è©±ç•ªå·ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚Œã°è‡ªå‹•èªè¨¼
            const phoneNumber = document.getElementById('tourist-phone-number').value;
            if (phoneNumber && phoneNumber.length >= 10) {
              phoneVerified.classList.remove('d-none');
            } else {
              alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
          }
          
          // èº«åˆ†è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ¢ç”¨ã«ç°¡ç•¥åŒ–ï¼‰
          const touristIdType = document.getElementById('tourist-id-type').value;
          if (!touristIdType) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„');
            return;
          }
          
          const touristIdFront = document.getElementById('tourist-id-front');
          if (!touristIdFront.files || touristIdFront.files.length === 0) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è£é¢ãŒå¿…è¦ãªå ´åˆã¯ç¢ºèªï¼ˆé‹è»¢å…è¨±è¨¼ã¨ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã®ã¿ï¼‰
          const touristIdBack = document.getElementById('tourist-id-back');
          if ((touristIdType === 'drivers_license' || touristIdType === 'my_number') && 
              (!touristIdBack.files || touristIdBack.files.length === 0)) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆãƒ»ä¿å­˜
          const touristData = {
            id: 'tourist_' + Date.now(),
            name: document.getElementById('tourist-name').value,
            email: document.getElementById('tourist-email').value,
            phone: document.getElementById('tourist-phone-number').value,
            idType: document.getElementById('tourist-id-type').value,
            registrationDate: new Date().toISOString(),
            isVerified: true
          };
          
          // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
          localStorage.setItem('touristData', JSON.stringify(touristData));
          sessionStorage.setItem('currentUser', JSON.stringify(touristData));
          
          // ç™»éŒ²å®Œäº†ã¨æ©Ÿèƒ½ã‚¢ãƒ³ãƒ­ãƒƒã‚¯é€šçŸ¥ã‚’è¡¨ç¤º
          showTouristRegistrationSuccess(touristData);
          
          // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
          const modal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
          modal.hide();
          
          // ä¿å­˜ã•ã‚Œã¦ã„ãŸã‚¬ã‚¤ãƒ‰IDã‚’å–å¾—
          const pendingGuideId = sessionStorage.getItem('pendingGuideId');
          
          // ç™»éŒ²å®Œäº†å¾Œã¯ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ã‚¬ã‚¤ãƒ‰è©³ç´°è¡¨ç¤º
          setTimeout(() => {
            if (pendingGuideId) {
              sessionStorage.removeItem('pendingGuideId');
              console.log('è¦³å…‰å®¢ç™»éŒ²å®Œäº† - ã‚¬ã‚¤ãƒ‰è©³ç´°è¡¨ç¤º:', pendingGuideId);
              // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã›ãšã«ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ã‚¬ã‚¤ãƒ‰æƒ…å ±ã‚’è¡¨ç¤º
              updateLoginStateUI();
              showGuideDetailsAfterLogin(pendingGuideId);
            } else {
              // ã‚¬ã‚¤ãƒ‰IDãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ãƒ›ãƒ¼ãƒ ã®äººæ°—ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
              document.getElementById('guides').scrollIntoView({ behavior: 'smooth' });
            }
          }, 500);
        });
      }
      
      if (guideForm) {
        guideForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // é›»è©±ç•ªå·èªè¨¼ãƒã‚§ãƒƒã‚¯
          if (document.getElementById('guide-phone-verified').classList.contains('d-none')) {
            alert('é›»è©±ç•ªå·èªè¨¼ã‚’å®Œäº†ã—ã¦ãã ã•ã„');
            return;
          }
          
          // èº«åˆ†è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
          const guideIdFront = document.getElementById('guide-id-front');
          if (!guideIdFront.files || guideIdFront.files.length === 0) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è£é¢ãŒå¿…è¦ãªå ´åˆã¯ç¢ºèª
          const guideIdType = document.getElementById('guide-id-type').value;
          const guideIdBack = document.getElementById('guide-id-back');
          if ((guideIdType === 'drivers_license' || guideIdType === 'my_number') && 
              (!guideIdBack.files || guideIdBack.files.length === 0)) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¯å°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆguide_registration_handler.jsï¼‰ã§è¡Œã„ã¾ã™
          
          // ã™ã¹ã¦ã®æ¤œè¨¼ã«é€šéã—ãŸå ´åˆ
          alert('ç™»éŒ²ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèªå¾Œã«æ‰¿èªã•ã‚Œã¾ã™ã€‚');
          const modal = bootstrap.Modal.getInstance(document.getElementById('registerGuideModal'));
          modal.hide();
        });
      }
      
      // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const userType = document.querySelector('input[name="login-user-type"]:checked').value;
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-password').value;
          
          if (!email || !password) {
            alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
          if (userType === 'tourist') {
            handleTouristLogin(email, password);
          } else {
            // ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ã¯åˆ¥é€”å®Ÿè£…
            alert('ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™');
          }
        });
      }
      
      // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
      window.handleGuideDetailsClick = function(guideId) {
        // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        const touristData = localStorage.getItem('touristData');
        
        if (touristData) {
          // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»ï¼ˆç„¡åŠ¹åŒ–ï¼‰
          console.log('ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ - ã‚¬ã‚¤ãƒ‰è©³ç´°è¡¨ç¤º:', guideId);
          // window.location.replace(`guide-details.html?id=${guideId}`);
          return;
        }
        
        // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        sessionStorage.setItem('pendingGuideId', guideId);
        showTouristLoginPrompt(guideId);
      };

      // ã‚¬ã‚¤ãƒ‰è©³ç´°é–²è¦§ã«ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤ºï¼ˆæ—§é–¢æ•°ã€äº’æ›æ€§ã®ãŸã‚ï¼‰
      function showLoginRequirement(guideId) {
        handleGuideDetailsClick(guideId);
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºï¼ˆç„¡åŠ¹åŒ–ï¼‰
      function showTouristLoginPrompt(guideId) {
        // ã“ã®æ©Ÿèƒ½ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - æ–°ã—ã„èªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’ä½¿ç”¨
        console.log('showTouristLoginPrompt ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™');
        return;
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‹•çš„ä½œæˆ
      function createTouristLoginPromptModal() {
        const modalHTML = `
          <div class="modal fade" id="touristLoginPromptModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                  <h5 class="modal-title">
                    <i class="bi bi-shield-lock me-2"></i>ã‚¬ã‚¤ãƒ‰è©³ç´°ã®é–²è¦§ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™
                  </h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                  <div class="mb-4">
                    <i class="bi bi-person-check-fill text-primary" style="font-size: 3rem;"></i>
                  </div>
                  <h4 class="mb-3">å®‰å…¨ã§ä¿¡é ¼ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ã«</h4>
                  <p class="lead mb-4">
                    ã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚„äºˆç´„æ©Ÿèƒ½ã‚’ã”åˆ©ç”¨ã„ãŸã ãã«ã¯ã€è¦³å…‰å®¢ã¨ã—ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚
                  </p>
                  <div class="alert alert-info">
                    <strong>ãªãœãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ãªã®ã‹ï¼Ÿ</strong><br>
                    â€¢ ãŠå®¢æ§˜ã¨ã‚¬ã‚¤ãƒ‰ã®å®‰å…¨ç¢ºä¿<br>
                    â€¢ ä¿¡é ¼æ€§ã®é«˜ã„ãƒãƒƒãƒãƒ³ã‚°<br>
                    â€¢ äºˆç´„å±¥æ­´ã®ç®¡ç†<br>
                    â€¢ å“è³ªå‘ä¸Šã®ãŸã‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                  </div>
                  <p id="selectedGuideInfo" class="text-muted small"></p>
                </div>
                <div class="modal-footer justify-content-center">
                  <button type="button" class="btn btn-primary btn-lg me-3" onclick="showTouristRegistration()">
                    <i class="bi bi-person-plus me-1"></i>æ–°è¦ç™»éŒ²ï¼ˆæ¨å¥¨ï¼‰
                  </button>
                  <button type="button" class="btn btn-outline-primary btn-lg" onclick="showExistingLogin()">
                    <i class="bi bi-box-arrow-in-right me-1"></i>æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHTML);
      }

      // æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
      function showTouristRegistration() {
        // ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('touristLoginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const registerModal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          registerModal.show();
        }, 300);
      }

      // æ—¢å­˜ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
      function showExistingLogin() {
        // ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('touristLoginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          // è¦³å…‰å®¢ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’é¸æŠ
          document.getElementById('login-user-tourist').checked = true;
          loginModal.show();
        }, 300);
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ï¼ˆçµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ç§»ç®¡æ¸ˆã¿ï¼‰
      function handleTouristLogin(email, password) {
        console.log('æ—§ãƒ­ã‚°ã‚¤ãƒ³é–¢æ•°ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨');
        return;
      }
      
      // è¦³å…‰å®¢èªè¨¼æƒ…å ±ã®æ¤œè¨¼ï¼ˆçµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ç§»ç®¡æ¸ˆã¿ï¼‰
      function isValidTouristCredentials(email, password) {
        console.log('æ—§èªè¨¼é–¢æ•°ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨');
        return false;
      }
      
      // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰åå‰ã‚’æŠ½å‡º
      function extractNameFromEmail(email) {
        const localPart = email.split('@')[0];
        return localPart.charAt(0).toUpperCase() + localPart.slice(1);
      }
      
      /**
       * è¦³å…‰å®¢ç™»éŒ²æˆåŠŸæ™‚ã®åŒ…æ‹¬çš„ãªé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
       * ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’è©³ç´°ã«èª¬æ˜
       */
      function showTouristRegistrationSuccess(userData) {
        // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
        if (registerModal) {
          registerModal.hide();
        }
        
        // æˆåŠŸé€šçŸ¥ãƒ¢ãƒ¼ãƒ€ãƒ«ã®HTML
        const successModalHTML = `
          <div class="modal fade show" id="touristSuccessModal" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">
                <div class="modal-header border-0 pb-0" style="background: linear-gradient(135deg, #28a745, #20c997); border-radius: 20px 20px 0 0;">
                  <div class="w-100 text-center text-white">
                    <div class="mb-3">
                      <i class="bi bi-check-circle-fill" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="modal-title fw-bold mb-2">ç™»éŒ²å®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h3>
                    <p class="mb-0">${userData.name}æ§˜ã€TomoTripã¸ã‚ˆã†ã“ã</p>
                  </div>
                </div>
                <div class="modal-body px-4 py-4">
                  <div class="alert alert-success border-0 mb-4" style="background: linear-gradient(135deg, #d4edda, #c3e6cb);">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-shield-check text-success me-2" style="font-size: 1.5rem;"></i>
                      <div>
                        <strong>èªè¨¼å®Œäº†</strong><br>
                        <small>é›»è©±ç•ªå·ã¨èº«åˆ†è¨¼æ˜æ›¸ã®èªè¨¼ãŒå®Œäº†ã—ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™</small>
                      </div>
                    </div>
                  </div>
                  
                  <h5 class="mb-3 text-primary">
                    <i class="bi bi-unlock-fill me-2"></i>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸæ©Ÿèƒ½
                  </h5>
                  
                  <div class="row">
                    <div class="col-md-6">
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-person-lines-fill" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ã‚¬ã‚¤ãƒ‰è©³ç´°ã®é–²è¦§</h6>
                            <p class="small text-muted mb-0">ã™ã¹ã¦ã®ã‚¬ã‚¤ãƒ‰ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€çµŒæ­´ã€æ–™é‡‘è©³ç´°ã‚’ç¢ºèªã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-calendar-plus" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ã‚¬ã‚¤ãƒ‰äºˆç´„æ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">å¸Œæœ›ã®æ—¥æ™‚ã§ã‚¬ã‚¤ãƒ‰ã‚’äºˆç´„ã—ã€ç‰¹åˆ¥ãªä½“é¨“ã‚’æ¥½ã—ã‚ã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-chat-dots" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">ã‚¬ã‚¤ãƒ‰ã¨ç›´æ¥ã‚„ã‚Šå–ã‚Šã—ã¦è©³ç´°ãªç›¸è«‡ãŒã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="col-md-6">
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-heart" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">æ°—ã«ãªã‚‹ã‚¬ã‚¤ãƒ‰ã‚’ä¿å­˜ã—ã¦å¾Œã‹ã‚‰ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-star" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿</h6>
                            <p class="small text-muted mb-0">ä½“é¨“å¾Œã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¦ä»–ã®è¦³å…‰å®¢ã‚’ã‚µãƒãƒ¼ãƒˆ</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-credit-card" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">å®‰å…¨ãªæ±ºæ¸ˆ</h6>
                            <p class="small text-muted mb-0">ã‚»ã‚­ãƒ¥ã‚¢ãªæ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ã§å®‰å¿ƒã—ã¦ãŠæ”¯æ‰•ã„ã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="alert alert-info border-0 mt-4" style="background: linear-gradient(135deg, #d1ecf1, #bee5eb);">
                    <div class="d-flex">
                      <i class="bi bi-info-circle text-info me-2 flex-shrink-0"></i>
                      <div>
                        <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong><br>
                        <small>ä»Šã™ããŠå¥½ã¿ã®ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã¤ã‘ã¦ã€æ—¥æœ¬ã§ã®ç´ æ™´ã‚‰ã—ã„ä½“é¨“ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</small>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer border-0 pt-0">
                  <div class="w-100 d-flex justify-content-center gap-3">
                    <button type="button" class="btn btn-success btn-lg px-4" onclick="exploreGuides()">
                      <i class="bi bi-search me-2"></i>ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-lg" onclick="closeSuccessModal()">
                      å¾Œã§è¦‹ã‚‹
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // æ—¢å­˜ã®æˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‰Šé™¤
        const existingModal = document.getElementById('touristSuccessModal');
        if (existingModal) {
          existingModal.remove();
        }
        
        // æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
        document.body.insertAdjacentHTML('beforeend', successModalHTML);
        
        // 5ç§’å¾Œã«è‡ªå‹•ã§ã‚¬ã‚¤ãƒ‰æ¢ç´¢ã‚’ä¿ƒã™ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        setTimeout(() => {
          const exploreBtn = document.querySelector('#touristSuccessModal .btn-success');
          if (exploreBtn) {
            exploreBtn.classList.add('animate__animated', 'animate__pulse');
          }
        }, 5000);
      }
      
      /**
       * ã‚¬ã‚¤ãƒ‰æ¢ç´¢ã«ç§»å‹•ï¼ˆå‰Šé™¤æ¸ˆã¿ - ä¸‹ã®åŒ…æ‹¬çš„ãªexploreGuidesé–¢æ•°ã‚’ä½¿ç”¨ï¼‰
       */
      // window.exploreGuides = function() {
      //   closeSuccessModal();
      //   // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã®ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      //   document.getElementById('guides').scrollIntoView({ behavior: 'smooth' });
      //   
      //   // å°‘ã—é…å»¶ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º
      //   setTimeout(() => {
      //     if (typeof window.showFilterHint === 'function') {
      //       window.showFilterHint();
      //     }
      //   }, 1000);
      // }
      
      /**
       * æˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
       */
      window.closeSuccessModal = function() {
        console.log('ğŸ§¹ closeSuccessModalé–‹å§‹');
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œ
        if (typeof forceCleanupAllModals === 'function') {
          forceCleanupAllModals();
        }
        
        // è¿½åŠ ã®å¼·åˆ¶ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        document.querySelectorAll('.modal, .modal-backdrop, .fade.show').forEach(el => el.remove());
        document.body.className = document.body.className.replace(/modal-[^\s]*/g, '');
        document.body.removeAttribute('style');
        document.documentElement.removeAttribute('style');
        
        console.log('âœ… closeSuccessModalå®Œäº†');
      }
      
      // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡å‡¦ç†
      const contactForm = document.getElementById('contact-form');
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          alert('ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ‹…å½“è€…ã‹ã‚‰ã®è¿”ä¿¡ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚');
          const modal = bootstrap.Modal.getInstance(document.getElementById('contactModal'));
          modal.hide();
        });
      }
      
      // ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã®æ©Ÿèƒ½è¿½åŠ 
      const loadMoreButton = document.getElementById('load-more-guides');
      if (loadMoreButton) {
        loadMoreButton.addEventListener('click', function() {
          // éè¡¨ç¤ºã®ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹
          const hiddenGuides = document.querySelectorAll('.hidden-guide');
          hiddenGuides.forEach(guide => {
            guide.classList.remove('hidden-guide');
            // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            guide.style.opacity = 0;
            guide.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
              guide.style.opacity = 1;
            }, 50);
          });
          
          // ã™ã¹ã¦è¡¨ç¤ºã—ãŸã‚‰ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
          if (hiddenGuides.length > 0) {
            this.textContent = 'ã™ã¹ã¦è¡¨ç¤ºã—ã¾ã—ãŸ';
            this.disabled = true;
            setTimeout(() => {
              this.style.display = 'none';
            }, 2000);
          }
        });
      }
      
      // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
      const guideProfilePhoto = document.getElementById('guide-profile-photo');
      const guideProfilePreview = document.getElementById('guide-profile-preview');
      const profilePhotoContainer = document.querySelector('.profile-photo-container');
      
      if (guideProfilePhoto && guideProfilePreview) {
        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        guideProfilePhoto.addEventListener('change', function(e) {
          if (this.files && this.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
              guideProfilePreview.src = e.target.result;
            }
            
            reader.readAsDataURL(this.files[0]);
          }
        });
        
        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’é–‹ã
        if (profilePhotoContainer) {
          profilePhotoContainer.addEventListener('click', function() {
            guideProfilePhoto.click();
          });
        }
      }
      
      // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
      document.addEventListener('click', function(e) {
        // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆï¼ˆè¤‡æ•°ã®æ¡ä»¶ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
        const isDetailsButton = e.target.classList.contains('guide-details-link') ||
                               (e.target.classList.contains('btn-outline-primary') && 
                                (e.target.textContent.includes('è©³ç´°ã‚’è¦‹ã‚‹') || e.target.textContent.includes('See Details'))) ||
                               e.target.hasAttribute('data-guide-id');
        
        if (isDetailsButton) {
          e.preventDefault();
          
          // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ããƒ‡ãƒãƒƒã‚°
          const timestamp = new Date().toISOString();
          console.log(`[${timestamp}] ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ¤œå‡º`);
          
          // ã‚¬ã‚¤ãƒ‰IDã‚’å–å¾—
          let guideId = e.target.getAttribute('data-guide-id');
          if (!guideId) {
            const guideCard = e.target.closest('.guide-card');
            if (guideCard) {
              guideId = guideCard.getAttribute('data-guide-id');
            }
          }
          
          if (!guideId) {
            alert('ã‚¬ã‚¤ãƒ‰IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
          }
          
          console.log(`[${timestamp}] å¯¾è±¡ã‚¬ã‚¤ãƒ‰ID: ${guideId}`);
          
          // è©³ç´°ãƒ‡ãƒãƒƒã‚°ä»˜ãèªè¨¼ãƒã‚§ãƒƒã‚¯
          console.log('ğŸ” ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚¢ã‚¯ã‚»ã‚¹é–‹å§‹ - ã‚¬ã‚¤ãƒ‰ID:', guideId);
          console.log('ğŸ” ãƒ–ãƒ©ã‚¦ã‚¶ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å…¨ä½“ç¢ºèª:');
          console.log('localStorage keys:', Object.keys(localStorage));
          console.log('sessionStorage keys:', Object.keys(sessionStorage));
          
          let isAuthenticated = false;
          let userData = null;
          
          // å…¨ã¦ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼ã‚’è©³ç´°ãƒã‚§ãƒƒã‚¯
          console.log('=== èªè¨¼ãƒ‡ãƒ¼ã‚¿è©³ç´°ãƒã‚§ãƒƒã‚¯ ===');
          
          const touristData = localStorage.getItem('touristData');
          console.log('localStorage.touristData:', touristData);
          
          const sessionData = sessionStorage.getItem('currentUser');
          console.log('sessionStorage.currentUser:', sessionData);
          
          const backup1 = localStorage.getItem('auth_backup_1');
          console.log('localStorage.auth_backup_1:', backup1);
          
          const backup2 = localStorage.getItem('auth_backup_2');
          console.log('localStorage.auth_backup_2:', backup2);
          
          // ãƒ¡ã‚¤ãƒ³èªè¨¼ãƒã‚§ãƒƒã‚¯
          if (touristData) {
            try {
              userData = JSON.parse(touristData);
              console.log('ãƒ‘ãƒ¼ã‚¹æ¸ˆã¿userData:', userData);
              console.log('userData.type:', userData?.type);
              console.log('userData.isAuthenticated:', userData?.isAuthenticated);
              
              if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
                isAuthenticated = true;
                console.log('âœ… èªè¨¼æˆåŠŸ - ãƒ¦ãƒ¼ã‚¶ãƒ¼:', userData.name);
              } else {
                console.log('âŒ èªè¨¼å¤±æ•— - æ¡ä»¶ä¸ä¸€è‡´');
              }
            } catch (e) {
              console.error('âŒ JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:', e);
            }
          } else {
            console.log('âŒ touristDataãŒå­˜åœ¨ã—ã¾ã›ã‚“');
          }
          

          
          console.log('ğŸ” èªè¨¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ çµæœ:');
          console.log('  - isAuthenticated:', isAuthenticated);
          console.log('  - userData:', userData);
          
          if (isAuthenticated && userData) {
            console.log('ğŸ‰ èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ - ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º:', guideId);
            console.log('ğŸ“Š èªè¨¼ãƒ‡ãƒ¼ã‚¿è©³ç´°:', {
              name: userData.name,
              type: userData.type,
              isAuthenticated: userData.isAuthenticated,
              id: userData.id
            });
            showGuideDetailModal(guideId);
            return;
          }
          
          // èªè¨¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§ã‚’è©¦è¡Œ
          console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„ãŸã‚å¾©æ—§ã‚’è©¦è¡Œ');
          
          const backupKeys = ['auth_backup_1', 'auth_backup_2', 'currentUser'];
          let recovered = false;
          
          for (const key of backupKeys) {
            try {
              const storage = key === 'currentUser' ? sessionStorage : localStorage;
              const backupData = storage.getItem(key);
              if (backupData) {
                const backupUserData = JSON.parse(backupData);
                if (backupUserData && backupUserData.type === 'tourist' && backupUserData.isAuthenticated) {
                  console.log('ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§æˆåŠŸ:', backupUserData.name);
                  localStorage.setItem('touristData', backupData);
                  sessionStorage.setItem('currentUser', backupData);
                  userData = backupUserData;
                  isAuthenticated = true;
                  recovered = true;
                  break;
                }
              }
            } catch (e) {
              continue;
            }
          }
          
          if (recovered) {
            console.log('å¾©æ—§æˆåŠŸ - ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚’è¡¨ç¤º');
            showGuideDetailModal(guideId);
            return;
          }
          
          console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„ - ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤º');
          sessionStorage.setItem('pendingGuideId', guideId);
          showTouristLoginPrompt(guideId);
        }
      });
      
      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ã‚’ä¿ƒã™ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
      function showTouristLoginPrompt(guideId) {
        console.log('è¦³å…‰å®¢ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º:', guideId);
        
        // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ä½œæˆ
        const modalHTML = `
          <div class="modal fade" id="loginPromptModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header border-0 text-center pb-0">
                  <div class="w-100">
                    <i class="bi bi-lock-fill text-warning" style="font-size: 3rem;"></i>
                    <h4 class="modal-title mt-3">ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™</h4>
                  </div>
                </div>
                <div class="modal-body text-center">
                  <p class="mb-4">é¸æŠã•ã‚ŒãŸã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚’è¦‹ã‚‹ã«ã¯ã€è¦³å…‰å®¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚</p>
                  
                  <div class="alert alert-info mb-4">
                    <i class="bi bi-info-circle me-2"></i>
                    <strong>åˆå›ã”åˆ©ç”¨ã®æ–¹ã¸ï¼š</strong><br>
                    ã¾ã ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„å ´åˆã¯ã€æ–°è¦ç™»éŒ²ï¼ˆç„¡æ–™ï¼‰ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚ç™»éŒ²å¾Œã€ã™ãã«ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚
                  </div>
                  
                  <div class="bg-light rounded p-3 mb-4">
                    <h6 class="mb-2">ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ã§ãã‚‹ã“ã¨</h6>
                    <div class="text-start small">
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ã‚¬ã‚¤ãƒ‰ã®è©³ç´°ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§</div>
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ã‚¬ã‚¤ãƒ‰ã¨ã®ç›´æ¥äºˆç´„ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é–²è¦§ãƒ»æŠ•ç¨¿</div>
                      <div><i class="bi bi-check-circle-fill text-success me-2"></i>ãŠæ°—ã«å…¥ã‚Šã‚¬ã‚¤ãƒ‰ã®ä¿å­˜</div>
                    </div>
                  </div>
                  
                  <div class="d-grid gap-2">
                    <button type="button" class="btn btn-success btn-lg" onclick="showTouristRegistration()">
                      <i class="bi bi-person-plus me-2"></i>æ–°è¦ç™»éŒ²ï¼ˆç„¡æ–™ãƒ»1åˆ†ã§å®Œäº†ï¼‰
                    </button>
                    <button type="button" class="btn btn-outline-primary" onclick="showTouristLogin()">
                      <i class="bi bi-box-arrow-in-right me-2"></i>æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
                    </button>
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                      å¾Œã§åˆ©ç”¨ã™ã‚‹
                    </button>
                  </div>
                  
                  <div class="mt-3 border-top pt-3">
                    <div class="d-flex align-items-center justify-content-center">
                      <i class="bi bi-shield-check text-success me-2"></i>
                      <small class="text-muted">å®‰å…¨ã§ç°¡å˜ãªç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹</small>
                    </div>
                    <div class="small text-muted mt-1">
                      æ–°è¦ç™»éŒ²ã¯å®Œå…¨ç„¡æ–™ã§ã™ã€‚ãƒ¡ãƒ¼ãƒ«èªè¨¼ã®ã¿ã§ã€ã™ãã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‰Šé™¤
        const existingModal = document.getElementById('loginPromptModal');
        if (existingModal) {
          existingModal.remove();
        }
        
        // æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        const modal = new bootstrap.Modal(document.getElementById('loginPromptModal'));
        modal.show();
      }
      
      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ã‚’è¡¨ç¤º
      window.showTouristLogin = function() {
        // ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('loginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          loginModal.show();
        }, 300);
      };
      
      // è¦³å…‰å®¢æ–°è¦ç™»éŒ²ã‚’è¡¨ç¤º
      window.showTouristRegistration = function() {
        // ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('loginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const registerModal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          registerModal.show();
        }, 300);
      };

      // ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆãƒšãƒ¼ã‚¸ã‹ã‚‰æˆ»ã£ã¦ããŸå ´åˆã®å‡¦ç†
      const shouldOpenLogin = sessionStorage.getItem('openLoginAfterReturn');
      if (shouldOpenLogin === 'true') {
        sessionStorage.removeItem('openLoginAfterReturn');
        
        // å°‘ã—é…å»¶ã—ã¦ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          loginModal.show();
        }, 500);
      }
    });
  </script>
  
  <!-- åŒ…æ‹¬çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="filter-tutorial.js"></script>
  
  <!-- ç™»éŒ²ãƒœã‚¿ãƒ³ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="registration-fix.js"></script> -->
  
  <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="minimal-language.js"></script> -->
  
  <!-- æ”¹è‰¯ã•ã‚ŒãŸè¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="improved-language-switcher.js"></script> -->
  
  <!-- ã‚·ãƒ³ãƒ—ãƒ«å‹•ä½œä¿®æ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="simple-working-fix.js"></script> -->
  
  <!-- ç›´æ¥ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- 70äººã‚¬ã‚¤ãƒ‰è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ  - å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä¸€æ™‚ç„¡åŠ¹åŒ–ï¼ˆç«¶åˆé˜²æ­¢ï¼‰ -->
  <!-- <script src="bootstrap-disable-fix.js"></script> -->
  <!-- <script src="nuclear-scroll-fix.js"></script> -->
  <!-- <script src="direct-scroll-force.js"></script> -->
  
  <!-- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ‡ãƒãƒƒã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  - å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- æ·±å±¤ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«èª¿æŸ»ã‚·ã‚¹ãƒ†ãƒ  - å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- Bootstrap Modal ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ç©¶æ¥µã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾©å…ƒã‚·ã‚¹ãƒ†ãƒ  - å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- å®Œå…¨ç‹¬ç«‹è¨€èªã‚·ã‚¹ãƒ†ãƒ å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- å°‚ç”¨ãƒœã‚¿ãƒ³ç¿»è¨³æ©Ÿèƒ½ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="button-translator.js"></script> -->
  
  <!-- çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="unified-auth-system.js"></script>
  
  <!-- èªè¨¼ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ -->
  <script src="auth-test-helper.js"></script>
  
  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã®å°‚ç”¨ç¿»è¨³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="benefits-translator.js"></script> -->
  <!-- <script src="dropdown-translator.js"></script> -->
  <!-- <script src="direct-benefit-card-translator.js"></script> -->
  <!-- <script src="benefit-html-inspector.js"></script> -->
  <!-- <script src="guide-cards-translator.js"></script> -->
  
  <!-- ã‚¬ã‚¤ãƒ‰ç™»éŒ²å‡¦ç† -->
  <script src="guide_registration_handler.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ -->
  <!-- ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ»è¡¨ç¤ºã‚¹ã‚¯ãƒªãƒ—ãƒˆ - ä¸€æ™‚ç„¡åŠ¹åŒ– -->
  <!-- <script src="generate-guide-data.js"></script> -->
  <!-- <script src="add-guide-data.js"></script> -->
  <script src="guide-login.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ -->

  
  <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ -->
  <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒãƒƒã‚¬ãƒ¼å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡æ©Ÿèƒ½ -->

  
  <!-- ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®æœ€é©åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - å„ç’°å¢ƒã§ã®ã¿å®Ÿè¡Œ -->

  <!-- desktop-fixes.js å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- å…±æœ‰è¨€èªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ - è¨€èªè¨­å®šã®ä¿å­˜ã¨å¾©å…ƒ -->
  <script src="shared-language-utils.js"></script>
  
  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
  <script src="navigation-buttons.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ã‚¿ã‚°è¡¨ç¤º -->
  <script src="guide-tags-display.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿API (æ–°æ©Ÿèƒ½) -->
  <script src="guide-data-storage-api.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ– (æ–°æ©Ÿèƒ½) -->
  <script src="initialize-guide-data.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºå™¨ (ä¿®æ­£ç‰ˆ) -->
  <script src="guide-card-extractor.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->

  <script src="data-reset.js"></script>
  <script src="password-toggle.js"></script>
  
  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®èª­ã¿è¾¼ã¿ -->
  <div id="modals-container"></div>
  <!-- å•é¡Œã®ã‚ã‚‹è¿½åŠ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ç„¡åŠ¹åŒ– -->
  <!-- å‰Šé™¤æ¸ˆã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ: auto-fill-system.js, load-70-guides.js, filter-toggle.js -->
  
  <script>
    // ãƒ¢ãƒ¼ãƒ€ãƒ«HTMLã‚’èª­ã¿è¾¼ã‚€
    fetch('modals.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('modals-container').innerHTML = html;
        initializeRegistrationModals();
      })
      .catch(error => console.error('ãƒ¢ãƒ¼ãƒ€ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error));

    // ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«åˆæœŸåŒ–
    function initializeRegistrationModals() {
      // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ã®é·ç§»
      const guideRegisterLinks = document.querySelectorAll('[data-bs-target="#registerGuideModal"]');
      const touristRegisterLinks = document.querySelectorAll('[data-bs-target="#registerTouristModal"]');
      
      guideRegisterLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const modal = new bootstrap.Modal(document.getElementById('registerGuideModal'));
          modal.show();
        });
      });
      
      touristRegisterLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const modal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          modal.show();
        });
      });

      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const submitGuideBtn = document.getElementById('submitGuideRegistration');
      if (submitGuideBtn) {
        submitGuideBtn.addEventListener('click', function() {
          handleGuideRegistration();
        });
      }

      // è¦³å…‰å®¢ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const submitTouristBtn = document.getElementById('submitTouristRegistration');
      if (submitTouristBtn) {
        submitTouristBtn.addEventListener('click', function() {
          handleTouristRegistration();
        });
      }
    }

    // ã‚¬ã‚¤ãƒ‰ç™»éŒ²å‡¦ç†
    function handleGuideRegistration() {
      const form = document.getElementById('guideRegistrationForm');
      const formData = new FormData(form);
      
      const name = formData.get('name');
      const email = formData.get('email');
      const sessionFee = formData.get('sessionFee');
      
      if (!name || !email) {
        showNotification('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        return;
      }
      
      if (sessionFee < 6000) {
        showNotification('ã‚»ãƒƒã‚·ãƒ§ãƒ³æ–™é‡‘ã¯æœ€ä½Â¥6,000ä»¥ä¸Šã«è¨­å®šã—ã¦ãã ã•ã„', 'error');
        return;
      }

      const languages = Array.from(form.querySelectorAll('input[name="languages"]:checked')).map(cb => cb.value);
      if (languages.length === 0) {
        showNotification('å¯¾å¿œè¨€èªã‚’å°‘ãªãã¨ã‚‚1ã¤é¸æŠã—ã¦ãã ã•ã„', 'error');
        return;
      }

      const verifyStatus = document.getElementById('verifyStatus');
      if (verifyStatus && verifyStatus.textContent !== 'èªè¨¼æ¸ˆã¿') {
        showNotification('é›»è©±ç•ªå·èªè¨¼ã‚’å®Œäº†ã—ã¦ãã ã•ã„', 'error');
        return;
      }

      showNotification('ã‚¬ã‚¤ãƒ‰ç™»éŒ²ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚å¯©æŸ»å®Œäº†ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚', 'success');
      
      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('registerGuideModal'));
        if (modal) {
          modal.hide();
        }
      }, 2000);
    }

    // è¦³å…‰å®¢èªè¨¼ãƒ‡ãƒ¼ã‚¿ä¿è­·ã‚·ã‚¹ãƒ†ãƒ 
    function protectTouristStorage(touristData) {
      console.log('ğŸ›¡ï¸ è¦³å…‰å®¢èªè¨¼ãƒ‡ãƒ¼ã‚¿ä¿è­·ã‚’é–‹å§‹');
      
      // ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¿å­˜
      const originalRemoveItem = localStorage.removeItem;
      const originalClear = localStorage.clear;
      const originalSessionRemove = sessionStorage.removeItem;
      const originalSessionClear = sessionStorage.clear;
      
      // localStorage.removeItem ã‚’ä¿è­·
      localStorage.removeItem = function(key) {
        if (window.protectTouristAuth && (key === 'touristData' || key.startsWith('touristBackup_'))) {
          console.log('ğŸš« è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ã‚’é˜»æ­¢:', key);
          return;
        }
        return originalRemoveItem.call(this, key);
      };
      
      // localStorage.clear ã‚’ä¿è­·
      localStorage.clear = function() {
        if (window.protectTouristAuth) {
          console.log('ğŸš« localStorageå…¨å‰Šé™¤ã‚’é˜»æ­¢ - è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä¿è­·');
          // è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ä»¥å¤–ã®ã¿ã‚¯ãƒªã‚¢
          const keysToKeep = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key === 'touristData' || key.startsWith('touristBackup_')) {
              keysToKeep.push({ key, value: localStorage.getItem(key) });
            }
          }
          originalClear.call(this);
          keysToKeep.forEach(item => {
            localStorage.setItem(item.key, item.value);
          });
          return;
        }
        return originalClear.call(this);
      };
      
      // sessionStorage.removeItem ã‚’ä¿è­·
      sessionStorage.removeItem = function(key) {
        if (window.protectTouristAuth && key === 'currentUser') {
          console.log('ğŸš« ã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ã‚’é˜»æ­¢:', key);
          return;
        }
        return originalSessionRemove.call(this, key);
      };
      
      // sessionStorage.clear ã‚’ä¿è­·
      sessionStorage.clear = function() {
        if (window.protectTouristAuth) {
          console.log('ğŸš« ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å…¨å‰Šé™¤ã‚’é˜»æ­¢ - è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä¿è­·');
          const userData = sessionStorage.getItem('currentUser');
          originalClear.call(this);
          if (userData) {
            sessionStorage.setItem('currentUser', userData);
          }
          return;
        }
        return originalClear.call(this);
      };
      
      // å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿å¾©æ—§ãƒã‚§ãƒƒã‚¯
      const protectionInterval = setInterval(() => {
        if (!window.protectTouristAuth) {
          clearInterval(protectionInterval);
          return;
        }
        
        const currentData = localStorage.getItem('touristData');
        if (!currentData && window.touristAuthData) {
          console.log('ğŸ”„ è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆå¤± - è‡ªå‹•å¾©æ—§');
          localStorage.setItem('touristData', JSON.stringify(window.touristAuthData));
          sessionStorage.setItem('currentUser', JSON.stringify(window.touristAuthData));
        }
      }, 2000);
    }

    // è¦³å…‰å®¢ç™»éŒ²å‡¦ç†
    function handleTouristRegistration() {
      const form = document.getElementById('touristRegistrationForm');
      const formData = new FormData(form);
      
      const name = formData.get('name');
      const email = formData.get('email');
      const password = formData.get('password');
      
      if (!name || !email || !password) {
        showNotification('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        return;
      }
      
      // è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¦ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«ã™ã‚‹
      const touristData = {
        id: 'tourist_' + Date.now(),
        name: name,
        email: email,
        type: 'tourist',
        loginTime: new Date().toISOString(),
        isAuthenticated: true,
        registrationDate: new Date().toISOString()
      };
      
      // ç›´æ¥ä¿å­˜ - ç¢ºå®Ÿãªæ–¹æ³•ã§å®Ÿè£…
      console.log('ğŸ’¾ è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ä¿å­˜é–‹å§‹:', touristData);
      
      try {
        const dataString = JSON.stringify(touristData);
        
        // è¤‡æ•°ã®å ´æ‰€ã«ä¿å­˜
        localStorage.setItem('touristData', dataString);
        sessionStorage.setItem('currentUser', dataString);
        localStorage.setItem('auth_backup_1', dataString);
        localStorage.setItem('auth_backup_2', dataString);
        sessionStorage.setItem('auth_session_backup', dataString);
        
        console.log('âœ… å…¨ã¦ã®ä¿å­˜å ´æ‰€ã«ãƒ‡ãƒ¼ã‚¿ä¿å­˜å®Œäº†');
        console.log('localStorageç¢ºèª:', localStorage.getItem('touristData'));
        console.log('sessionStorageç¢ºèª:', sessionStorage.getItem('currentUser'));
        
        // ãƒ¡ãƒ¢ãƒªã«ã‚‚ä¿å­˜
        window.touristAuthData = touristData;
        window.protectTouristAuth = true;
        
        // TouristAuthManagerã«ç™»éŒ²
        if (window.TouristAuthManager) {
          window.TouristAuthManager.save(touristData);
        }
        
        // å³åº§ã«UIæ›´æ–°ã‚’å¼·åˆ¶å®Ÿè¡Œ
        console.log('ç™»éŒ²ç›´å¾Œã®UIæ›´æ–°ã‚’å®Ÿè¡Œ');
        updateLoginStateUI();
        
        // å°‘ã—é…å»¶ã—ã¦ã‚‚ã†ä¸€åº¦ç¢ºå®Ÿã«å®Ÿè¡Œ
        setTimeout(() => {
          updateLoginStateUI();
        }, 500);
        
        // ã•ã‚‰ã«é…å»¶ã—ã¦æœ€çµ‚ç¢ºèª
        setTimeout(() => {
          updateLoginStateUI();
          // ç™»éŒ²å®Œäº†ãƒ•ãƒ©ã‚°ã‚’ã‚¯ãƒªã‚¢
          window.isRegistering = false;
        }, 1000);
        
      } catch (e) {
        console.error('âŒ ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼:', e);
      }
      
      // ç™»éŒ²ç›´å¾Œã®èªè¨¼ç¢ºèª
      setTimeout(() => {
        console.log('=== ç™»éŒ²ç›´å¾Œèªè¨¼ç¢ºèª ===');
        console.log('localStorage keys:', Object.keys(localStorage));
        console.log('localStorage.touristData:', localStorage.getItem('touristData'));
        console.log('sessionStorage.currentUser:', sessionStorage.getItem('currentUser'));
        
        // ç›´æ¥çš„ãªèªè¨¼ãƒã‚§ãƒƒã‚¯
        const savedData = localStorage.getItem('touristData');
        if (savedData) {
          try {
            const parsed = JSON.parse(savedData);
            console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿æ­£å¸¸:', parsed.name, parsed.isAuthenticated);
          } catch (e) {
            console.error('èªè¨¼ãƒ‡ãƒ¼ã‚¿ç ´æ:', e);
          }
        } else {
          console.error('èªè¨¼ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“');
        }
      }, 100);
      
      showNotification('è¦³å…‰å®¢ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼', 'success');
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
        if (modal) {
          modal.hide();
        }
        
        // ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã®ã‚¬ã‚¤ãƒ‰IDãŒã‚ã‚Œã°è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
        const pendingGuideId = sessionStorage.getItem('pendingGuideId');
        if (pendingGuideId) {
          sessionStorage.removeItem('pendingGuideId');
          showNotification('ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚’è¡¨ç¤ºã—ã¾ã™...', 'success');
          
          // ç™»éŒ²å®Œäº†å¾Œã¯ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚’è¡¨ç¤º
          setTimeout(() => {
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’åæ˜ 
            updateLoginStateUI();
            
            // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ã¾ãŸã¯æƒ…å ±ã‚’è¡¨ç¤º
            showGuideDetailsAfterLogin(pendingGuideId);
          }, 1000);
        } else {
          // ç™»éŒ²å®Œäº†å¾Œã®UIæ›´æ–°ã‚’å¼·åˆ¶å®Ÿè¡Œ
          console.log('ç™»éŒ²å®Œäº† - UIæ›´æ–°é–‹å§‹');
          
          // å³åº§ã«UIæ›´æ–°
          updateLoginStateUI();
          
          // å°‘ã—é…å»¶ã•ã›ã¦ã‚‚ã†ä¸€åº¦UIæ›´æ–°ã‚’ç¢ºå®Ÿã«å®Ÿè¡Œ
          setTimeout(() => {
            console.log('é…å»¶UIæ›´æ–°å®Ÿè¡Œ');
            updateLoginStateUI();
          }, 100);
          
          // ã•ã‚‰ã«ç¢ºå®Ÿã«ã™ã‚‹ãŸã‚500mså¾Œã«ã‚‚å®Ÿè¡Œ
          setTimeout(() => {
            console.log('æœ€çµ‚UIæ›´æ–°ç¢ºèª');
            const touristData = localStorage.getItem('touristData');
            if (touristData) {
              console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿ç¢ºèªæ¸ˆã¿ - UIæœ€çµ‚æ›´æ–°');
              updateLoginStateUI();
            }
          }, 500);
        }
      }, 2000);
    }

    // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹UIã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
    function updateLoginStateUI() {
      console.log('ğŸ”„ ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹UIæ›´æ–°é–‹å§‹');
      
      // èªè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
      const touristData = localStorage.getItem('touristData');
      if (!touristData) {
        console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿ãªã— - ã‚²ã‚¹ãƒˆUIç¶­æŒ');
        return;
      }
      
      try {
        const userData = JSON.parse(touristData);
        if (userData && userData.type === 'tourist' && userData.isAuthenticated) {
          console.log('âœ… ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼:', userData.name);
          
          // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’éš ã™
          const loginBtn = document.querySelector('button[data-bs-target="#loginModal"]');
          if (loginBtn) {
            loginBtn.style.display = 'none';
            console.log('ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³éè¡¨ç¤º');
          }
          
          // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’æ­£ç¢ºã«ç‰¹å®š
          const registerDropdown = document.getElementById('registerDropdown');
          console.log('ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ :', registerDropdown);
          
          if (registerDropdown) {
            console.log('ç¾åœ¨ã®ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ:', registerDropdown.textContent);
            
            // æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤ºã«å¤‰æ›´
            registerDropdown.innerHTML = `
              <i class="bi bi-person-circle me-1"></i>
              ${userData.name}ã•ã‚“
              <i class="bi bi-chevron-down ms-1"></i>
            `;
            // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ç„¡åŠ¹åŒ– - ç›´æ¥ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¶­æŒ
            
            console.log('ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°:', userData.name);
            
            // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ›´æ–°
            const dropdownMenu = registerDropdown.nextElementSibling;
            if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
              dropdownMenu.innerHTML = `
                <li><a class="dropdown-item" href="#" onclick="showUserProfile()">
                  <i class="bi bi-person me-2"></i>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
                </a></li>
                <li><a class="dropdown-item" href="#" onclick="showBookingHistory()">
                  <i class="bi bi-calendar-check me-2"></i>äºˆç´„å±¥æ­´
                </a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#" onclick="logout()">
                  <i class="bi bi-box-arrow-right me-2"></i>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                </a></li>
              `;
              console.log('ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ›´æ–°å®Œäº†');
            }
          } else {
            console.warn('ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
          }
          
          // ãƒšãƒ¼ã‚¸å±æ€§ã‚’è¨­å®š
          document.body.setAttribute('data-user-authenticated', 'true');
          document.body.setAttribute('data-user-type', 'tourist');
          
          console.log('âœ… UIæ›´æ–°å®Œäº† - ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤ºä¸­');
        }
      } catch (e) {
        console.error('UIæ›´æ–°ã‚¨ãƒ©ãƒ¼:', e);
      }
    }
    
    // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆé–¢æ•°
    function logout() {
      console.log('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†é–‹å§‹');
      
      // èªè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
      localStorage.removeItem('touristData');
      sessionStorage.removeItem('currentUser');
      localStorage.removeItem('auth_backup_1');
      localStorage.removeItem('auth_backup_2');
      sessionStorage.removeItem('auth_session_backup');
      
      // ãƒ¡ãƒ¢ãƒªã‚¯ãƒªã‚¢
      window.touristAuthData = null;
      window.protectTouristAuth = false;
      
      // UIã‚’ãƒªã‚»ãƒƒãƒˆ
      location.reload();
    }
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
    function showUserProfile() {
      alert('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™');
    }
    
    // äºˆç´„å±¥æ­´è¡¨ç¤º
    function showBookingHistory() {
      alert('äºˆç´„å±¥æ­´æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™');
    }

    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
    
    function scrollToSection(sectionId) {
      const element = document.getElementById(sectionId);
      if (element) {
        element.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      } else {
        console.log('ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:', sectionId);
      }
    }
    
    // è¨€èªé¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®è¨­å®š
    function setupLanguageDropdown() {
      const languageItems = document.querySelectorAll('[data-lang]');
      // è¨€èªãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã¯å‰Šé™¤æ¸ˆã¿ - ç›´æ¥ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«ç§»è¡Œ
          
          // è¨€èªå¤‰æ›´å‡¦ç†
          if (typeof changeLanguage === 'function') {
            changeLanguage(lang);
          } else {
            console.log('è¨€èªã‚’å¤‰æ›´:', langText);
            showNotification(`è¨€èªã‚’${langText}ã«å¤‰æ›´ã—ã¾ã—ãŸ`, 'success');
          }
        });
      });
    }
    
    // è¨€èªå¤‰æ›´å‡¦ç†ï¼ˆç›´æ¥å®Ÿè¡Œç‰ˆï¼‰
    function changeLanguageDirectly(lang) {
      // è¨€èªãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã¯å‰Šé™¤æ¸ˆã¿ - ç›´æ¥ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«ç§»è¡Œ
      
      console.log('è¨€èªã‚’å¤‰æ›´:', langText);
      showNotification(`è¨€èªã‚’${langText}ã«å¤‰æ›´ã—ã¾ã—ãŸ`, 'success');
      
      // å®Ÿéš›ã®ç¿»è¨³å‡¦ç†ãŒã‚ã‚Œã°ã“ã“ã§å®Ÿè¡Œ
      if (typeof changeLanguage === 'function') {
        changeLanguage(lang);
      }
    }
    
    // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®è¨­å®š
    function setupRegisterDropdown() {
      const registerDropdown = document.getElementById('registerDropdown');
      
      if (registerDropdown) {
        console.log('æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’åˆæœŸåŒ–');
        
        // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        const dropdownItems = document.querySelectorAll('.register-dropdown .dropdown-item');
        dropdownItems.forEach(item => {
          item.addEventListener('click', function(e) {
            console.log('æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
            // Bootstrapãƒ¢ãƒ¼ãƒ€ãƒ«ã®å‡¦ç†ã¯æ—¢å­˜ã®data-bs-toggleå±æ€§ã§å‡¦ç†ã•ã‚Œã‚‹
          });
        });
      }
    }

    // é€šçŸ¥è¡¨ç¤ºé–¢æ•°
    function showNotification(message, type = 'info') {
      let alertContainer = document.getElementById('alert-container');
      if (!alertContainer) {
        alertContainer = document.createElement('div');
        alertContainer.id = 'alert-container';
        alertContainer.style.cssText = 'position: fixed; top: 20px; right: 20px; max-width: 400px; z-index: 9999;';
        document.body.appendChild(alertContainer);
      }
      
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} alert-dismissible fade show`;
      alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `;
      
      alertContainer.appendChild(alertDiv);
      
      setTimeout(() => {
        if (alertDiv.parentNode) {
          alertDiv.remove();
        }
      }, 5000);
    }

    // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹UIã®æ›´æ–° - å¼·åŒ–ç‰ˆ
    function updateLoginStateUI() {
      console.log('ğŸ¨ ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹UIã‚’æ›´æ–°ä¸­...');
      
      // èªè¨¼çŠ¶æ…‹ã‚’å†ç¢ºèª
      const isAuth = isUserAuthenticated();
      const touristData = localStorage.getItem('touristData') || sessionStorage.getItem('currentUser');
      
      if (isAuth && touristData) {
        try {
          const userData = JSON.parse(touristData);
          console.log('âœ… èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼UIã‚’è¨­å®š:', userData.name);
          
          // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
          const loginBtn = document.querySelector('a[data-bs-target="#loginModal"]');
          if (loginBtn) {
            loginBtn.style.display = 'none';
          }
          
          // æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
          // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ ã¯å‰Šé™¤æ¸ˆã¿ - ç›´æ¥ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¶­æŒ
          
          // æ—¢å­˜ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å‰Šé™¤
          const existingStatus = document.getElementById('user-status');
          if (existingStatus) {
            existingStatus.remove();
          }
          
          // æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¿½åŠ 
          const navbar = document.querySelector('.navbar-nav');
          if (navbar) {
            const userStatus = document.createElement('li');
            userStatus.className = 'nav-item';
            userStatus.id = 'user-status';
            userStatus.innerHTML = `
              <div class="nav-link text-success d-flex align-items-center">
                <i class="bi bi-person-check-fill me-2"></i>
                <span>${userData.name}ã•ã‚“</span>
                <small class="ms-2 badge bg-success">è¦³å…‰å®¢</small>
              </div>
            `;
            navbar.appendChild(userStatus);
          }
          
          // ãƒšãƒ¼ã‚¸å…¨ä½“ã«ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’åæ˜ 
          document.body.setAttribute('data-user-authenticated', 'true');
          document.body.setAttribute('data-user-type', 'tourist');
          
        } catch (e) {
          console.error('âŒ ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹UIæ›´æ–°ã‚¨ãƒ©ãƒ¼:', e);
          resetToGuestUI();
        }
      } else {
        console.log('âŒ æœªèªè¨¼çŠ¶æ…‹ - ã‚²ã‚¹ãƒˆUIã«è¨­å®š');
        resetToGuestUI();
      }
    }

    // ã‚²ã‚¹ãƒˆçŠ¶æ…‹UIã«ãƒªã‚»ãƒƒãƒˆ
    function resetToGuestUI() {
      console.log('ğŸ”„ ã‚²ã‚¹ãƒˆUIã«ãƒªã‚»ãƒƒãƒˆ');
      
      // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
      const loginBtn = document.querySelector('a[data-bs-target="#loginModal"]');
      if (loginBtn) {
        loginBtn.style.display = '';
      }
      
      // æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
      // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³è¦ç´ ã¯å‰Šé™¤æ¸ˆã¿ - ç›´æ¥ãƒœã‚¿ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¶­æŒ
      
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å‰Šé™¤
      const userStatus = document.getElementById('user-status');
      if (userStatus) {
        userStatus.remove();
      }
      
      // ãƒšãƒ¼ã‚¸å±æ€§ã‚’ãƒªã‚»ãƒƒãƒˆ
      document.body.removeAttribute('data-user-authenticated');
      document.body.removeAttribute('data-user-type');
    }

    // ç™»éŒ²å®Œäº†å¾Œã®ã‚¬ã‚¤ãƒ‰è©³ç´°è¡¨ç¤º
    function showGuideDetailsAfterLogin(guideId) {
      showNotification(`ã‚¬ã‚¤ãƒ‰è©³ç´°ãŒé–²è¦§å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚ã‚¬ã‚¤ãƒ‰${guideId}ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚`, 'success');
      
      // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      const guideCard = document.querySelector(`[data-guide-id="${guideId}"]`);
      if (guideCard) {
        guideCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // ã‚«ãƒ¼ãƒ‰ã‚’ä¸€æ™‚çš„ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        guideCard.style.boxShadow = '0 0 15px rgba(0, 123, 255, 0.5)';
        guideCard.style.border = '2px solid #007bff';
        
        setTimeout(() => {
          guideCard.style.boxShadow = '';
          guideCard.style.border = '';
        }, 3000);
      }
    }

    // ã€Œã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™ã€ãƒœã‚¿ãƒ³ã®å‡¦ç†
    function exploreGuides() {
      console.log('ğŸš€ exploreGuidesé–¢æ•°ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ');
      
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’å³åº§ã«å®Ÿè¡Œ
      forceCleanupAllModals();
      
      // è¿½åŠ ã®å³åº§ã®å¼·åˆ¶ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
      document.querySelectorAll('.modal, .modal-backdrop, .fade.show').forEach(el => el.remove());
      document.body.className = document.body.className.replace(/modal-[^\s]*/g, '');
      document.body.removeAttribute('style');
      document.documentElement.removeAttribute('style');
      
      // ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å³åº§ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      console.log('ğŸ“ ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–‹å§‹');
      const guidesSection = document.getElementById('guides');
      if (guidesSection) {
        guidesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’å¼·èª¿è¡¨ç¤º
        setTimeout(() => {
          const guideCards = document.querySelectorAll('.guide-card');
          console.log(`ğŸ¨ ${guideCards.length}å€‹ã®ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’å¼·èª¿è¡¨ç¤º`);
          guideCards.forEach((card, index) => {
            setTimeout(() => {
              card.style.transform = 'scale(1.02)';
              card.style.boxShadow = '0 8px 25px rgba(0, 123, 255, 0.15)';
              
              setTimeout(() => {
                card.style.transform = '';
                card.style.boxShadow = '';
              }, 1000);
            }, index * 200);
          });
        }, 100);
      } else {
        console.error('âŒ ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
      
      showNotification('ã‚¬ã‚¤ãƒ‰ä¸€è¦§ã‚’ã”è¦§ãã ã•ã„ã€‚ãŠæ°—ã«å…¥ã‚Šã®ã‚¬ã‚¤ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’ç¢ºèªã§ãã¾ã™ã€‚', 'success');
      console.log('âœ… exploreGuideså‡¦ç†å®Œäº†');
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«exploreGuidesé–¢æ•°ã‚’è¨­å®š
    window.exploreGuides = exploreGuides;

    // ã€Œå¾Œã§è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã®å‡¦ç†
    function closeSuccessModal() {
      const successModal = bootstrap.Modal.getInstance(document.getElementById('touristSuccessModal'));
      if (successModal) {
        successModal.hide();
      }
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ã¨ãƒãƒƒã‚¯ãƒ‰ãƒ­ãƒƒãƒ—ã‚’å¼·åˆ¶å‰Šé™¤
      setTimeout(() => {
        const modalElement = document.getElementById('touristSuccessModal');
        if (modalElement) {
          modalElement.remove();
        }
        
        // ãƒãƒƒã‚¯ãƒ‰ãƒ­ãƒƒãƒ—ã‚’å¼·åˆ¶å‰Šé™¤
        const backdrops = document.querySelectorAll('.modal-backdrop');
        backdrops.forEach(backdrop => backdrop.remove());
        
        // bodyè¦ç´ ã‹ã‚‰ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
        
        // ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ä¸Šéƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        showNotification('ã„ã¤ã§ã‚‚ã‚¬ã‚¤ãƒ‰ä¸€è¦§ã‹ã‚‰ãŠé¸ã³ã„ãŸã ã‘ã¾ã™ã€‚', 'info');
      }, 100);
    }

    // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºï¼ˆèªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ï¼‰
    function showGuideDetailModal(guideId) {
      const guideData = getGuideDataById(guideId);
      if (!guideData) {
        showNotification('ã‚¬ã‚¤ãƒ‰æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚', 'error');
        return;
      }

      const modalHTML = `
        <div class="modal fade" id="guideDetailModal" tabindex="-1" aria-hidden="true">
          <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header border-0 bg-primary text-white">
                <h5 class="modal-title">
                  <i class="bi bi-person-circle me-2"></i>${guideData.name}ã•ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <div class="row">
                  <div class="col-md-4 text-center">
                    <img src="${guideData.image}" class="rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;" alt="${guideData.name}">
                    <div class="mb-3">
                      <span class="badge bg-primary fs-6">${guideData.fee}/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
                    </div>
                    <div class="text-warning mb-3">
                      ${'â˜…'.repeat(Math.floor(guideData.rating))}${'â˜†'.repeat(5 - Math.floor(guideData.rating))}
                      <span class="text-dark ms-1">${guideData.rating}</span>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <h6><i class="bi bi-geo-alt-fill text-primary me-2"></i>æ´»å‹•ã‚¨ãƒªã‚¢</h6>
                    <p class="mb-3">${guideData.location}</p>
                    
                    <h6><i class="bi bi-translate text-primary me-2"></i>å¯¾å¿œè¨€èª</h6>
                    <p class="mb-3">
                      ${guideData.languages.map(lang => `<span class="badge bg-light text-dark me-1">${lang}</span>`).join('')}
                    </p>
                    
                    <h6><i class="bi bi-person-lines-fill text-primary me-2"></i>ã‚¬ã‚¤ãƒ‰ç´¹ä»‹</h6>
                    <p class="mb-3">${guideData.description}</p>
                    
                    <h6><i class="bi bi-star-fill text-primary me-2"></i>å¾—æ„ãªåˆ†é‡</h6>
                    <p class="mb-3">
                      ${guideData.keywords.map(keyword => `<span class="badge bg-secondary me-1">${keyword}</span>`).join('')}
                    </p>
                  </div>
                </div>
                
                <div class="alert alert-success mt-4">
                  <i class="bi bi-check-circle-fill me-2"></i>
                  <strong>èªè¨¼æ¸ˆã¿è¦³å…‰å®¢</strong> - ã“ã®ã‚¬ã‚¤ãƒ‰ã«äºˆç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™
                </div>
              </div>
              <div class="modal-footer border-0">
                <button type="button" class="btn btn-success btn-lg flex-fill" onclick="requestBooking('${guideId}')">
                  <i class="bi bi-calendar-plus me-2"></i>äºˆç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹
                </button>
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
              </div>
            </div>
          </div>
        </div>
      `;

      // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‰Šé™¤
      const existingModal = document.getElementById('guideDetailModal');
      if (existingModal) {
        existingModal.remove();
      }

      // æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
      document.body.insertAdjacentHTML('beforeend', modalHTML);

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
      const modal = new bootstrap.Modal(document.getElementById('guideDetailModal'));
      modal.show();
    }

    // ã‚¬ã‚¤ãƒ‰IDã‹ã‚‰ã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    function getGuideDataById(guideId) {
      const guides = {
        '1': {
          name: 'æ¸…æ°´ å®ç¾',
          image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face',
          fee: 'Â¥6,000',
          rating: 4.5,
          location: 'çŸ³å·çœŒ é‡‘æ²¢å¸‚',
          languages: ['æ—¥æœ¬èª', 'è‹±èª'],
          description: 'é‡‘æ²¢ã®ä¼çµ±æ–‡åŒ–ã¨æ­´å²ã«ç²¾é€šã—ãŸã‚¬ã‚¤ãƒ‰ã§ã™ã€‚å…¼å…­åœ’ã€é‡‘æ²¢åŸã€ã²ãŒã—èŒ¶å±‹è¡—ãªã©ã®åæ‰€ã‹ã‚‰ã€åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã‚‹éš ã‚ŒãŸé­…åŠ›ã‚¹ãƒãƒƒãƒˆã¾ã§ã”æ¡ˆå†…ã—ã¾ã™ã€‚',
          keywords: ['æ­´å²', 'æ–‡åŒ–', 'ä¼çµ±å·¥èŠ¸', 'ã‚°ãƒ«ãƒ¡']
        },
        '2': {
          name: 'è—¤äº• ç›´ç¾',
          image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face',
          fee: 'Â¥10,000',
          rating: 4.0,
          location: 'åƒè‘‰çœŒ åƒè‘‰å¸‚',
          languages: ['æ—¥æœ¬èª', 'è‹±èª', 'ä¸­å›½èª'],
          description: 'åƒè‘‰çœŒã‚’æ‹ ç‚¹ã«æ´»å‹•ã—ã¦ã„ã‚‹ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚æˆç”°å±±æ–°å‹å¯ºã‚„ä¹åä¹é‡Œæµœãªã©ã®è¦³å…‰åœ°ã‹ã‚‰ã€åœ°å…ƒã‚°ãƒ«ãƒ¡ã¾ã§å¹…åºƒãã”æ¡ˆå†…ã§ãã¾ã™ã€‚',
          keywords: ['è‡ªç„¶', 'å¯ºç¤¾ä»é–£', 'æµ·', 'ã‚°ãƒ«ãƒ¡']
        },
        '3': {
          name: 'å°å· åšæ–‡',
          image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop&crop=face',
          fee: 'Â¥20,000',
          rating: 3.5,
          location: 'å¥ˆè‰¯çœŒ å¥ˆè‰¯å¸‚',
          description: 'å¥ˆè‰¯ã®é¹¿ã¨æ­´å²çš„å»ºé€ ç‰©ã‚’æ„›ã™ã‚‹ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚æ±å¤§å¯ºã€æ˜¥æ—¥å¤§ç¤¾ã€å¥ˆè‰¯å…¬åœ’ã§ã®ç‰¹åˆ¥ãªä½“é¨“ã‚’ãŠç´„æŸã—ã¾ã™ã€‚',
          languages: ['æ—¥æœ¬èª', 'è‹±èª(åŸºç¤)'],
          keywords: ['æ­´å²', 'å‹•ç‰©', 'å¯ºç¤¾ä»é–£', 'å†™çœŸã‚¹ãƒãƒƒãƒˆ']
        }
      };
      
      return guides[guideId] || null;
    }

    // äºˆç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½
    function requestBooking(guideId) {
      const modal = bootstrap.Modal.getInstance(document.getElementById('guideDetailModal'));
      if (modal) {
        modal.hide();
      }
      
      setTimeout(() => {
        showNotification(`ã‚¬ã‚¤ãƒ‰${guideId}ã¸ã®äºˆç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚ç¾åœ¨ã¯ã‚¬ã‚¤ãƒ‰è©³ç´°ã®é–²è¦§ã®ã¿å¯èƒ½ã§ã™ã€‚`, 'info');
      }, 300);
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–¢æ•°
    function forceCleanupAllModals() {
      console.log('ğŸ§¹ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–‹å§‹');
      
      // ã™ã¹ã¦ã®Bootstrapãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é–‰ã˜ã‚‹
      const allModalElements = document.querySelectorAll('.modal');
      allModalElements.forEach(modalEl => {
        const modalInstance = bootstrap.Modal.getInstance(modalEl);
        if (modalInstance) {
          console.log('ğŸ”’ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é–‰ã˜ã‚‹:', modalEl.id);
          modalInstance.hide();
        }
      });
      
      // ç‰©ç†çš„ã«ã™ã¹ã¦ã®ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ã‚’å‰Šé™¤
      setTimeout(() => {
        // ã™ã¹ã¦ã®ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ 
        document.querySelectorAll('.modal').forEach(el => el.remove());
        
        // ã™ã¹ã¦ã®ãƒãƒƒã‚¯ãƒ‰ãƒ­ãƒƒãƒ—
        document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
        
        // ã™ã¹ã¦ã®fadeè¦ç´ ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®å¯èƒ½æ€§ï¼‰
        document.querySelectorAll('.fade.show').forEach(el => {
          if (el.classList.contains('modal') || el.getAttribute('id')?.includes('modal')) {
            el.remove();
          }
        });
        
        // bodyè¦ç´ ã®å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
        document.body.classList.remove('modal-open');
        document.body.style.cssText = '';
        document.documentElement.style.cssText = '';
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        const events = ['hidden.bs.modal', 'hide.bs.modal', 'show.bs.modal', 'shown.bs.modal'];
        events.forEach(eventType => {
          document.removeEventListener(eventType, arguments.callee);
        });
        
        console.log('âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');
      }, 100);
    }

    // èªè¨¼çŠ¶æ…‹ã®æ°¸ç¶šåŒ–ã¨æ¤œè¨¼
    function validateAndRestoreAuthState() {
      console.log('ğŸ” èªè¨¼çŠ¶æ…‹ã®æ¤œè¨¼ã¨å¾©å…ƒã‚’é–‹å§‹');
      
      const touristData = localStorage.getItem('touristData');
      const sessionData = sessionStorage.getItem('currentUser');
      
      let validAuthData = null;
      
      // localStorageå„ªå…ˆã§ãƒã‚§ãƒƒã‚¯
      if (touristData) {
        try {
          const userData = JSON.parse(touristData);
          if (userData && userData.type === 'tourist' && userData.isAuthenticated && userData.id) {
            validAuthData = userData;
            console.log('âœ… localStorageèªè¨¼ãƒ‡ãƒ¼ã‚¿æœ‰åŠ¹:', userData.name);
            
            // sessionStorageã«ã‚‚åŒæœŸ
            sessionStorage.setItem('currentUser', touristData);
          }
        } catch (e) {
          console.warn('âš ï¸ localStorageèªè¨¼ãƒ‡ãƒ¼ã‚¿ç ´æ:', e);
          localStorage.removeItem('touristData');
        }
      }
      
      // sessionStorageã‹ã‚‰ã®å¾©å…ƒ
      if (!validAuthData && sessionData) {
        try {
          const userData = JSON.parse(sessionData);
          if (userData && userData.type === 'tourist' && userData.isAuthenticated && userData.id) {
            validAuthData = userData;
            console.log('âœ… sessionStorageèªè¨¼ãƒ‡ãƒ¼ã‚¿æœ‰åŠ¹:', userData.name);
            
            // localStorageã«ã‚‚ä¿å­˜
            localStorage.setItem('touristData', sessionData);
          }
        } catch (e) {
          console.warn('âš ï¸ sessionStorageèªè¨¼ãƒ‡ãƒ¼ã‚¿ç ´æ:', e);
          sessionStorage.removeItem('currentUser');
        }
      }
      
      // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã®å¾©å…ƒ
      if (!validAuthData) {
        console.log('ğŸ” ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰å¾©å…ƒã‚’è©¦è¡Œ');
        const allKeys = Object.keys(localStorage);
        const backupKeys = allKeys.filter(key => key.startsWith('touristBackup_'));
        
        for (const backupKey of backupKeys) {
          try {
            const backupData = localStorage.getItem(backupKey);
            const userData = JSON.parse(backupData);
            if (userData && userData.type === 'tourist' && userData.isAuthenticated && userData.id) {
              validAuthData = userData;
              console.log('âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰èªè¨¼ãƒ‡ãƒ¼ã‚¿å¾©å…ƒ:', userData.name);
              
              // ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å¾©å…ƒ
              localStorage.setItem('touristData', backupData);
              sessionStorage.setItem('currentUser', backupData);
              break;
            }
          } catch (e) {
            console.warn('âš ï¸ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ç ´æ:', backupKey);
            localStorage.removeItem(backupKey);
          }
        }
      }
      
      if (validAuthData) {
        console.log('ğŸ‰ èªè¨¼çŠ¶æ…‹å¾©å…ƒå®Œäº†:', validAuthData.name);
        updateLoginStateUI();
        return true;
      } else {
        console.log('âŒ æœ‰åŠ¹ãªèªè¨¼ãƒ‡ãƒ¼ã‚¿ãªã— - ã‚²ã‚¹ãƒˆçŠ¶æ…‹');
        // ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        localStorage.removeItem('touristData');
        sessionStorage.removeItem('currentUser');
        return false;
      }
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«èªè¨¼ãƒã‚§ãƒƒã‚«ãƒ¼
    function isUserAuthenticated() {
      const touristData = localStorage.getItem('touristData');
      const sessionData = sessionStorage.getItem('currentUser');
      
      // é«˜é€Ÿãƒã‚§ãƒƒã‚¯
      if (touristData) {
        try {
          const userData = JSON.parse(touristData);
          return userData && userData.type === 'tourist' && userData.isAuthenticated;
        } catch (e) {
          return false;
        }
      }
      
      if (sessionData) {
        try {
          const userData = JSON.parse(sessionData);
          return userData && userData.type === 'tourist' && userData.isAuthenticated;
        } catch (e) {
          return false;
        }
      }
      
      return false;
    }

    // æ³¨æ„ï¼šãƒœã‚¿ãƒ³åˆæœŸåŒ–ã¯ header-buttons-debug.js ã§å‡¦ç†ã•ã‚Œã¾ã™

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
    document.addEventListener('DOMContentLoaded', function() {
      // èªè¨¼çŠ¶æ…‹ã‚’æ¤œè¨¼ãƒ»å¾©å…ƒ
      validateAndRestoreAuthState();
      
      // æ³¨æ„ï¼šãƒœã‚¿ãƒ³åˆæœŸåŒ–ã¯ header-buttons-debug.js ã§å‡¦ç†ã•ã‚Œã¾ã™
      console.log('ğŸ”§ ãƒ¡ã‚¤ãƒ³DOMContentLoadedå®Ÿè¡Œ - ãƒœã‚¿ãƒ³åˆæœŸåŒ–ã¯header-buttons-debug.jsã§å‡¦ç†');
      
      // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
      setupRegisterDropdown();
      
      // ä»»æ„ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
      document.addEventListener('keydown', function(e) {
        // Ctrl+Shift+C ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        if (e.ctrlKey && e.shiftKey && e.key === 'C') {
          e.preventDefault();
          forceCleanupAllModals();
          console.log('ğŸ”§ æ‰‹å‹•ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ');
        }
        
        // Ctrl+Shift+A ã§èªè¨¼çŠ¶æ…‹ãƒ‡ãƒãƒƒã‚°
        if (e.ctrlKey && e.shiftKey && e.key === 'A') {
          e.preventDefault();
          console.log('ğŸ” èªè¨¼çŠ¶æ…‹ãƒ‡ãƒãƒƒã‚°:');
          console.log('isAuthenticated:', isUserAuthenticated());
          console.log('localStorage:', localStorage.getItem('touristData'));
          console.log('sessionStorage:', sessionStorage.getItem('currentUser'));
        }
      });
      
      // ãƒšãƒ¼ã‚¸å¯è¦–æ€§å¤‰æ›´æ™‚ã®èªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
          console.log('ğŸ”„ ãƒšãƒ¼ã‚¸å†è¡¨ç¤º - èªè¨¼çŠ¶æ…‹ã‚’å†ç¢ºèª');
          validateAndRestoreAuthState();
        }
      });
      
      // å®šæœŸçš„ãªèªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ï¼ˆ30ç§’ã”ã¨ï¼‰
      setInterval(function() {
        const currentAuth = isUserAuthenticated();
        const bodyAuth = document.body.getAttribute('data-user-authenticated') === 'true';
        
        if (currentAuth !== bodyAuth) {
          console.log('ğŸ”§ èªè¨¼çŠ¶æ…‹ã®ä¸æ•´åˆã‚’æ¤œå‡º - UIåŒæœŸ');
          updateLoginStateUI();
        }
      }, 30000);
      
      // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¤‰æ›´ã®ç›£è¦–
      window.addEventListener('storage', function(e) {
        if (e.key === 'touristData' || e.key === 'currentUser') {
          console.log('ğŸ”„ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¤‰æ›´æ¤œå‡º - èªè¨¼çŠ¶æ…‹ã‚’æ›´æ–°');
          validateAndRestoreAuthState();
        }
      });
    });
  -->
  </script>

  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="filterTutorialModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title">
            <i class="bi bi-funnel text-primary me-2"></i>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã®ä½¿ã„æ–¹
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="tutorial-content">
            <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
            <div class="tutorial-step mb-4" data-step="1">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">1</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é–‹ã</h6>
                  <p class="text-muted mb-2">ã€Œã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”»é¢ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-outline-primary" disabled>
                      <i class="bi bi-funnel"></i> ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
            <div class="tutorial-step mb-4" data-step="2">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">2</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">æ¡ä»¶ã‚’é¸æŠ</h6>
                  <p class="text-muted mb-2">åœ°åŸŸã€è¨€èªã€æ–™é‡‘ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãªã©ã€ãŠå¥½ã¿ã®æ¡ä»¶ã‚’é¸æŠã§ãã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <div class="row g-2">
                      <div class="col-6">
                        <select class="form-select form-select-sm" disabled>
                          <option>åœ°åŸŸã‚’é¸æŠ</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <select class="form-select form-select-sm" disabled>
                          <option>è¨€èªã‚’é¸æŠ</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
            <div class="tutorial-step mb-4" data-step="3">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">3</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨</h6>
                  <p class="text-muted mb-2">ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨ã€ãƒœã‚¿ãƒ³ã§æ¤œç´¢çµæœãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-primary btn-sm" disabled>
                      <i class="bi bi-search"></i> ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨
                    </button>
                    <button class="btn btn-outline-secondary btn-sm ms-2" disabled>
                      <i class="bi bi-arrow-clockwise"></i> ãƒªã‚»ãƒƒãƒˆ
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—4 -->
            <div class="tutorial-step mb-4" data-step="4">
              <div class="d-flex align-items-start">
                <div class="step-number bg-secondary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">4</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã«ã¤ã„ã¦</h6>
                  <p class="text-muted mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸå¾Œã¯ã€æœ€åˆã®3åã®ã‚¬ã‚¤ãƒ‰ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-primary btn-sm" disabled>ã‚‚ã£ã¨è¦‹ã‚‹</button>
                    <div class="small text-muted mt-2">
                      â†‘ ã“ã®ãƒœã‚¿ãƒ³ã§æ®‹ã‚Šã®ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã§ãã¾ã™
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ãƒ’ãƒ³ãƒˆ -->
            <div class="alert alert-info border-0" style="background: linear-gradient(135deg, #e3f2fd, #f0f9ff);">
              <div class="d-flex">
                <i class="bi bi-lightbulb text-info me-2 flex-shrink-0" style="font-size: 1.2em;"></i>
                <div>
                  <h6 class="fw-bold mb-1 text-info">ä¾¿åˆ©ãªãƒ’ãƒ³ãƒˆ</h6>
                  <ul class="mb-0 ps-3">
                    <li class="text-muted">è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã¦çµã‚Šè¾¼ã¿ãŒã§ãã¾ã™</li>
                    <li class="text-muted">ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã§ã„ã¤ã§ã‚‚åˆæœŸçŠ¶æ…‹ã«æˆ»ã›ã¾ã™</li>
                    <li class="text-muted">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã§ã¯è¶£å‘³ã‚„å¾—æ„åˆ†é‡ã§æ¢ã›ã¾ã™</li>
                    <li class="text-muted"><strong>ãƒªã‚»ãƒƒãƒˆå¾Œã¯ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§å…¨ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤º</strong></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer border-0 pt-0">
          <button type="button" class="btn btn-success" id="try-filter-btn">
            <i class="bi bi-play-circle me-1"></i>å®Ÿéš›ã«è©¦ã—ã¦ã¿ã‚‹
          </button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="sponsor-buttons-redesign.css">
  <!-- åŸºæœ¬çš„ãªBootstrapã®ã¿æœ‰åŠ¹ã«ã™ã‚‹ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Filter Toggle Functionality -->
  <script src="filter-toggle.js"></script>
  <!-- å‰Šé™¤æ¸ˆã¿: guide-filter-fix.js -->
  
  <!-- å‰Šé™¤æ¸ˆã¿: japanese-counter-fix.js -->
  
  <!-- å‰Šé™¤æ¸ˆã¿: enhanced-filter-fix-ja.js -->
  
  <!-- Back to Top Button -->
  <button id="backToTopBtn" class="btn btn-primary back-to-top-btn" title="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹">
    <i class="bi bi-arrow-up"></i>
  </button>

  <style>
    .back-to-top-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: none;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .back-to-top-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    
    .back-to-top-btn.show {
      display: block;
      animation: fadeInUp 0.3s ease;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <!-- Back to Top Script -->
  <script>
    // Back to Top functionality
    const backToTopBtn = document.getElementById('backToTopBtn');
    
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        backToTopBtn.classList.add('show');
      } else {
        backToTopBtn.classList.remove('show');
      }
    });
    
    backToTopBtn.addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
    
    // Filter functions for Japanese version
    function resetFilters() {
      const locationFilter = document.getElementById('filter-location');
      const languageFilter = document.getElementById('filter-language');
      const specialtyFilter = document.getElementById('filter-specialties');
      const searchInput = document.getElementById('search-guides');
      
      if (locationFilter) locationFilter.value = '';
      if (languageFilter) languageFilter.value = '';
      if (specialtyFilter) specialtyFilter.value = '';
      if (searchInput) searchInput.value = '';
      
      // Reset all guide cards to visible
      const cards = document.querySelectorAll('.guide-item');
      cards.forEach(card => {
        card.style.display = 'block';
      });
      
      // Update counter
      const counter = document.getElementById('search-results-counter');
      const visibleCards = document.querySelectorAll('.guide-item:not(.d-none)');
      if (counter) {
        counter.textContent = `${visibleCards.length}äººã®ã‚¬ã‚¤ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`;
      }
    }
    
    function applyFiltersManual() {
      // This will be handled by the automatic filter system in load-70-guides.js
      console.log('Manual filter apply triggered (Japanese)');
    }
  </script>

  <!-- çµ±åˆã‚µã‚¤ãƒˆä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  - ç„¡åŠ¹åŒ– -->
  <!-- <script src="unified-site-fix.js"></script> -->
  
  <!-- æ—¥æœ¬èªãƒœã‚¿ãƒ³å°‚ç”¨ä¿®æ­£ - ç„¡åŠ¹åŒ– -->
  <!-- <script src="japanese-button-fix.js"></script> -->
  
  <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¬ã‚¤ãƒ‰ç™»éŒ²ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="realtime-guide-registration.js"></script>
  
  <!-- é™çš„ã‚µã‚¤ãƒˆåˆ‡ã‚Šæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="static-site-system.js"></script>
  
  <!-- æœ€å„ªå…ˆ: æœ€çµ‚ãƒ˜ãƒƒãƒ€ãƒ¼ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="final-header-fix.js"></script>
  
  <!-- ç¿»è¨³ãƒ–ãƒ­ãƒƒã‚«ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="translation-blocker.js"></script>
  
  <!-- ç©¶æ¥µã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="ultimate-header-override.js"></script>
  
  <!-- æ ¸å…µå™¨ç´šãƒ˜ãƒƒãƒ€ãƒ¼ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="nuclear-header-fix.js"></script>
  
  <!-- æ—¥æœ¬èªã‚µã‚¤ãƒˆå°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="japanese-site-only.js"></script>
  <script src="japanese-header-fix.js"></script>
  <script src="unified-filter-fix.js"></script>
  
  <!-- æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³æ©Ÿèƒ½ -->
  <script>
    function showRegisterOptions() {
      const modal = document.getElementById('registerOptionsModal');
      if (modal && window.bootstrap) {
        new bootstrap.Modal(modal).show();
      }
    }
  </script>
  
  <!-- ç™»éŒ²ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerOptionsModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ç™»éŒ²æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-12">
              <button class="btn btn-primary btn-lg w-100" data-bs-toggle="modal" data-bs-target="#registerTouristModal" data-bs-dismiss="modal">
                <i class="bi bi-person me-2"></i>æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²
                <br><small class="text-light">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ç‰¹åˆ¥ãªæ—…ã‚’ä½“é¨“</small>
              </button>
            </div>
            <div class="col-12">
              <button class="btn btn-success btn-lg w-100" data-bs-toggle="modal" data-bs-target="#registerGuideModal" data-bs-dismiss="modal">
                <i class="bi bi-map me-2"></i>ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²
                <br><small class="text-light">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†</small>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- å•é¡Œã®ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨ã¦ç„¡åŠ¹åŒ– -->
  <!-- 
  <script src="auth-debug-tracer.js"></script>
  <script src="auth-persistence-fix.js"></script>
  <script src="auth-protection-override.js"></script>
  <script src="registration-button-fix.js"></script>
  <script src="client-app.js"></script>
  -->
  
  <!-- æ ¹æœ¬çš„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è§£æ±º - æ ¸å…µå™¨ç´šã‚·ã‚¹ãƒ†ãƒ ãŒå‡¦ç† -->
  
  <!-- ã‚¿ã‚¤ãƒãƒ¼å¹²æ¸‰ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤æ¸ˆã¿ -->
  
  <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œã¯ simple-scroll-fix.js ã§è§£æ±ºæ¸ˆã¿ -->
</body>
</html>