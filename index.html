<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Local Guide - ç‰¹åˆ¥ãªæ—…ã®ä½“é¨“ã‚’</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <link href="login-modal-styles.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .navbar-brand {
      font-weight: bold;
    }
    .modal-content {
      border-radius: 0.5rem;
    }
    .section-title {
      border-bottom: 2px solid #0d6efd;
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
    }
    
    /* æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .register-dropdown {
      width: 100%;
      max-width: 320px;
      padding: 0.5rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      animation: fadeInDown 0.3s ease;
      left: auto !important;
      right: 0 !important;
    }
    
    .dropdown-item {
      border-radius: 8px;
      padding: 12px 15px;
      transition: all 0.2s ease;
    }
    
    .dropdown-item:hover {
      background-color: #f0f7ff;
      transform: translateY(-2px);
    }
    
    .register-dropdown {
      min-width: 320px;
      border: 1px solid rgba(0,0,0,0.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      border-radius: 8px;
      padding: 8px 0;
      margin-top: 10px;
      background: white;
    }
    
    .register-dropdown .dropdown-item {
      padding: 12px 16px;
      border: none;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .register-dropdown .dropdown-item:hover {
      background-color: #f8f9fa;
      border-radius: 0;
    }
    
    .register-dropdown .dropdown-item:focus {
      background-color: #f8f9fa;
      box-shadow: none;
    }
    
    .register-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      font-size: 1.2rem;
      margin-right: 12px;
      flex-shrink: 0;
    }
    
    .tourist-icon {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    
    .guide-icon {
      background-color: #e8f5e8;
      color: #388e3c;
    }
    
    .dropdown-divider {
      margin: 8px 16px;
      border-color: #e9ecef;
    }
    
    .register-dropdown .fw-bold {
      font-weight: 600;
      color: #212529;
      margin-bottom: 2px;
      font-size: 14px;
    }
    
    .register-dropdown .text-muted {
      font-size: 12px;
      color: #6c757d !important;
      line-height: 1.3;
      margin: 0;
    }
    
    .register-dropdown > li > .dropdown-item > div:last-child {
      flex: 1;
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .phone-section {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
      padding: 1.5rem;
      margin: 1rem 0;
    }
    .hero-section {
      background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://source.unsplash.com/random/1200x800/?japan,travel');
      background-size: cover;
      background-position: center;
      color: white;
      padding: 5rem 0;
      margin-bottom: 2rem;
    }
    .guide-card {
      transition: transform 0.3s;
      margin-bottom: 1.5rem;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .guide-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .guide-image {
      height: 250px;
      object-fit: cover;
      object-position: center;
      border-bottom: 1px solid #eee;
      transition: transform 0.5s ease;
      filter: brightness(0.95);
    }
    .guide-card:hover .guide-image {
      transform: scale(1.05);
      filter: brightness(1.05);
    }
    .badge-verified {
      background-color: #28a745;
      color: white;
      font-size: 0.7rem;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      margin-left: 0.5rem;
    }
    /* èªè¨¼ãƒœã‚¿ãƒ³ã®ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .btn-pulse {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
      }
    }
    /* èªè¨¼ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    #tourist-verify-code-btn,
    #guide-verify-code-btn {
      width: 100%;
      margin-top: 0.5rem;
      transition: all 0.3s ease;
    }
    /* èº«åˆ†è¨¼æ˜æ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */
    .document-preview-container {
      min-height: 50px;
    }
    .document-preview img {
      max-height: 200px;
      width: auto;
      border: 1px solid #dee2e6;
    }
    /* éè¡¨ç¤ºã‚¬ã‚¤ãƒ‰ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .hidden-guide {
      display: none;
    }
    
    /* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    /* æ¤œç´¢çµæœã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å¼·åŒ–ã‚¹ã‚¿ã‚¤ãƒ« */
    #search-results-counter {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 1.2rem;
      font-weight: 700;
      padding: 1rem 2rem;
      border-radius: 50px;
      text-align: center;
      margin: 1.5rem auto;
      max-width: 400px;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: hidden;
      animation: counterPulse 2s ease-in-out infinite alternate;
    }
    
    #search-results-counter::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      animation: shimmer 3s ease-in-out infinite;
    }
    
    #search-results-counter::after {
      content: 'ğŸ”';
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      opacity: 0.7;
      z-index: 1;
    }
    
    #search-results-counter {
      padding-left: 3rem !important;
      z-index: 2;
      position: relative;
    }
    
    @keyframes counterPulse {
      0% {
        transform: scale(1);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }
      100% {
        transform: scale(1.02);
        box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
      }
    }
    
    @keyframes shimmer {
      0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
      }
      100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
      }
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
      #search-results-counter {
        font-size: 1rem;
        padding: 0.8rem 1.5rem;
        margin: 1rem auto;
      }
      
      #search-results-counter::after {
        font-size: 1.2rem;
        left: 0.8rem;
      }
    }
    
    /* å¼·åŒ–ã•ã‚ŒãŸã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .guide-card {
      transition: all 0.3s ease;
      border: 2px solid transparent;
      border-radius: 15px !important;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      overflow: hidden;
      position: relative;
    }
    
    .guide-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      z-index: 1;
    }
    
    .guide-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      border-color: #667eea;
    }
    
    .guide-card .card-img-top {
      height: 220px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .guide-card:hover .card-img-top {
      transform: scale(1.05);
    }
    
    .guide-card .card-body {
      padding: 1.5rem;
      position: relative;
      z-index: 2;
    }
    
    .guide-card .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 0.8rem;
    }
    
    .guide-card .badge.bg-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .guide-card .guide-location {
      font-size: 1rem;
      color: #6c757d;
      font-weight: 500;
    }
    
    .guide-card .guide-location i {
      color: #667eea;
      font-size: 1.1rem;
    }
    
    .guide-card .card-text {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #495057;
    }
    
    .guide-card .badge.bg-light {
      background: #e3f2fd !important;
      color: #1976d2 !important;
      font-weight: 500;
      border: 1px solid #bbdefb;
    }
    
    .guide-card .text-warning i {
      color: #ffc107 !important;
      text-shadow: 0 1px 3px rgba(255, 193, 7, 0.3);
    }
    
    .guide-card .btn-outline-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .guide-card .btn-outline-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #5a6fd8 0%, #6a42a6 100%);
    }
    
    /* ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“ã®å¼·åŒ– */
    #guides {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 20px;
      padding: 3rem 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin: 2rem 0;
    }
    
    #guides h2 {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }
    
    .guide-item {
      margin-bottom: 2rem;
      animation: slideInUp 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(30px);
    }
    
    .guide-item:nth-child(1) { animation-delay: 0.1s; }
    .guide-item:nth-child(2) { animation-delay: 0.2s; }
    .guide-item:nth-child(3) { animation-delay: 0.3s; }
    .guide-item:nth-child(4) { animation-delay: 0.4s; }
    .guide-item:nth-child(5) { animation-delay: 0.5s; }
    .guide-item:nth-child(6) { animation-delay: 0.6s; }

    @keyframes slideInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .guide-filter-fadeIn {
      animation: fadeIn 0.4s ease-out forwards;
    }
    
    /* ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã®å¼·åŒ– */
    #load-more-guides {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 600;
      padding: 1rem 2.5rem;
      border-radius: 30px;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
      margin: 2rem auto;
      display: block;
    }
    
    #load-more-guides:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      background: linear-gradient(135deg, #5a6fd8 0%, #6a42a6 100%);
    }
    
    /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã‚¹ã‚¿ã‚¤ãƒ« */
    .profile-photo-container {
      position: relative;
      width: 150px;
      height: 150px;
      overflow: hidden;
      cursor: pointer;
    }
    
    .profile-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.3s ease;
    }
    
    .profile-photo-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 50%;
    }
    
    .profile-photo-overlay i {
      color: white;
      font-size: 2rem;
    }
    
    .profile-photo-container:hover .profile-photo-overlay {
      opacity: 1;
    }
    
    .profile-photo-container:hover .profile-photo {
      transform: scale(1.05);
    }
    
    /* ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã®ã¿ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½è¡¨ç¤º */
    @media (min-width: 768px) {
      .mobile-only {
        display: none !important;
      }
    }

    /* å”è³›åº—åºƒå‘ŠãƒãƒŠãƒ¼ - å³ã‹ã‚‰å·¦ã¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    .sponsor-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 15px 0;
      overflow: hidden;
      position: relative;
      white-space: nowrap;
      border-bottom: 3px solid #4f46e5;
    }

    .sponsor-scroll {
      display: inline-block;
      animation: scrollRight 30s linear infinite;
      white-space: nowrap;
    }

    .sponsor-item {
      display: inline-block;
      background: rgba(255, 255, 255, 0.95);
      margin: 0 20px;
      padding: 8px 20px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
      vertical-align: middle;
    }

    .sponsor-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
    }

    .sponsor-logo {
      height: 30px;
      width: auto;
      margin-right: 10px;
      vertical-align: middle;
    }

    .sponsor-text {
      color: #333;
      font-weight: 600;
      font-size: 14px;
      vertical-align: middle;
    }

    .sponsor-offer {
      background: #ff6b6b;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      margin-left: 8px;
      font-weight: bold;
    }

    @keyframes scrollRight {
      0% {
        transform: translateX(100%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
      .sponsor-banner {
        padding: 10px 0;
      }
      
      .sponsor-item {
        margin: 0 15px;
        padding: 6px 15px;
      }
      
      .sponsor-text {
        font-size: 12px;
      }
      
      .sponsor-logo {
        height: 25px;
      }
      
      .sponsor-offer {
        font-size: 10px;
        padding: 1px 6px;
      }
    }

    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸€æ™‚åœæ­¢ï¼ˆãƒ›ãƒãƒ¼æ™‚ï¼‰ */
    .sponsor-banner:hover .sponsor-scroll {
      animation-play-state: paused;
    }
  </style>
</head>
<body>
  <!-- ã‚¢ãƒ©ãƒ¼ãƒˆã‚³ãƒ³ãƒ†ãƒŠ -->
  <div id="alert-container" style="position: fixed; top: 20px; right: 20px; max-width: 400px; z-index: 9999;"></div>
  
  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="#">
        TomoTrip
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#">ãƒ›ãƒ¼ãƒ </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#guides">ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#how-it-works">ä½¿ã„æ–¹</a>
          </li>
        </ul>
        
        <div class="dropdown me-3">
          <button class="btn btn-outline-light dropdown-toggle" id="languageDropdown" data-bs-toggle="dropdown">
            æ—¥æœ¬èª
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#" data-lang="ja">æ—¥æœ¬èª</a></li>
            <li><a class="dropdown-item" href="#" data-lang="en">English</a></li>
          </ul>
        </div>
        
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ - æœªãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ã¿è¡¨ç¤º -->
        <div id="navbar-user-area">
          <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#loginModal">ãƒ­ã‚°ã‚¤ãƒ³</button>
          
          <!-- æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ -->
          <div class="dropdown d-inline-block">
            <button class="btn btn-light dropdown-toggle" id="registerDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              æ–°è¦ç™»éŒ²
            </button>
            <ul class="dropdown-menu dropdown-menu-end register-dropdown" aria-labelledby="registerDropdown">
              <li>
                <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#registerTouristModal">
                  <div class="register-icon tourist-icon">
                    <i class="bi bi-person"></i>
                  </div>
                  <div>
                    <div class="fw-bold">æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²</div>
                    <div class="text-muted">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ç‰¹åˆ¥ãªæ—…ã‚’ä½“é¨“</div>
                  </div>
                </button>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#registerGuideModal">
                  <div class="register-icon guide-icon">
                    <i class="bi bi-map"></i>
                  </div>
                  <div>
                    <div class="fw-bold">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²</div>
                    <div class="text-muted">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†</div>
                  </div>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section class="hero-section text-center text-white py-5" style="
    background: linear-gradient(rgba(66, 135, 245, 0.4), rgba(224, 79, 158, 0.4)), 
                url('attached_assets/IMG20221024140826_1750355257888.jpg') center/cover;
    position: relative; 
    overflow: hidden;
    min-height: 60vh;
  ">
    <!-- è£…é£¾è¦ç´  -->
    <div style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; overflow: hidden; opacity: 0.3;">
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="position: absolute; width: 300px; height: 300px; top: -50px; left: -50px;">
        <path fill="#FFFFFF" d="M44.7,-76.4C58.8,-69.2,71.8,-59.1,79.6,-45.5C87.4,-31.9,90.2,-15.9,88.1,-1.2C86,13.5,79.1,27,70.8,39.4C62.5,51.8,52.7,63.1,40.4,70.4C28.1,77.8,14.1,81.1,-0.3,81.6C-14.7,82.1,-29.3,79.9,-41,72.5C-52.6,65.2,-61.3,52.8,-68.9,39.7C-76.6,26.6,-83.3,13.3,-84.7,-0.8C-86,-14.9,-82,-29.9,-73.6,-41.5C-65.2,-53.1,-52.5,-61.4,-39.3,-68.7C-26.1,-76,-13.1,-82.3,1.1,-84.1C15.2,-85.8,30.5,-83.7,44.7,-76.4Z" transform="translate(100 100)" />
      </svg>
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="position: absolute; width: 400px; height: 400px; bottom: -150px; right: -100px;">
        <path fill="#FFFFFF" d="M34.6,-59.1C43.5,-53.8,48.7,-41.8,55.8,-30.2C62.8,-18.6,71.7,-7.3,73,5.1C74.4,17.6,68.3,31.2,58.5,40.1C48.7,48.9,35.3,52.9,22.7,56.7C10.2,60.5,-1.5,63.9,-14.6,63.8C-27.8,63.7,-42.4,60,-50.9,50.7C-59.4,41.3,-61.7,26.3,-65.6,11.3C-69.4,-3.7,-74.7,-18.6,-71.1,-31C-67.5,-43.3,-55,-53,-41.7,-57.8C-28.4,-62.5,-14.2,-62.3,-0.6,-61.3C13,-60.3,25.9,-58.3,34.6,-59.1Z" transform="translate(100 100)" />
      </svg>
    </div>
    <!-- TomoTrip Logo -->
    <div style="position: absolute; top: 2%; left: 2%;">
      <img src="tomotrip-logo.png" alt="TomoTrip" style="width: 180px; height: auto;">
    </div>
    
    <div class="container position-relative">
      <h1 class="display-4 fw-bold mb-3">ã‚ãªãŸã ã‘ã®ç‰¹åˆ¥ãªæ—…ã‚’</h1>
      <p class="lead mb-4">åœ°å…ƒã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ã€è¦³å…‰ã§ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã„éš ã‚ŒãŸé­…åŠ›ã‚’ä½“é¨“ã—ã¾ã—ã‚‡ã†</p>
      <div>
        <a href="#guides" class="btn btn-light btn-lg">ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</a>
        <button class="btn btn-outline-light btn-lg ms-2" data-bs-toggle="modal" data-bs-target="#contactModal">ãŠå•ã„åˆã‚ã›</button>
      </div>
    </div>
  </section>

  <!-- å”è³›åº—åºƒå‘ŠãƒãƒŠãƒ¼ -->
  <div class="sponsor-banner">
    <div class="sponsor-scroll">
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=100&h=60&fit=crop" alt="æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</span>
        <span class="sponsor-offer">20%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=100&h=60&fit=crop" alt="å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«</span>
        <span class="sponsor-offer">ç‰¹åˆ¥ä¾¡æ ¼</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=100&h=60&fit=crop" alt="ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹</span>
        <span class="sponsor-offer">é€è¿ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=60&fit=crop" alt="ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨</span>
        <span class="sponsor-offer">ä½“é¨“å‰²å¼•</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1543083115-638c32cd3d58?w=100&h=60&fit=crop" alt="åœ°å…ƒç‰¹ç”£å“åº—" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">åœ°å…ƒç‰¹ç”£å“åº—</span>
        <span class="sponsor-offer">ãŠåœŸç”£10%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=100&h=60&fit=crop" alt="ã‚«ãƒ•ã‚§æ¡œ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚«ãƒ•ã‚§æ¡œ</span>
        <span class="sponsor-offer">ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=100&h=60&fit=crop" alt="é‡£ã‚Šèˆ¹å¤ªéƒ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">é‡£ã‚Šèˆ¹å¤ªéƒ</span>
        <span class="sponsor-offer">åˆå›åŠé¡</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=100&h=60&fit=crop" alt="ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š</span>
        <span class="sponsor-offer">1æ—¥ãƒ¬ãƒ³ã‚¿ãƒ«</span>
      </div>
      <!-- ç¹°ã‚Šè¿”ã—è¡¨ç¤ºã§ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ -->
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=100&h=60&fit=crop" alt="æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">æµ·ã®å®¶ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</span>
        <span class="sponsor-offer">20%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=100&h=60&fit=crop" alt="å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">å±±ç”°æ¸©æ³‰ãƒ›ãƒ†ãƒ«</span>
        <span class="sponsor-offer">ç‰¹åˆ¥ä¾¡æ ¼</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=100&h=60&fit=crop" alt="ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚µã‚¯ãƒ©è¦³å…‰ãƒã‚¹</span>
        <span class="sponsor-offer">é€è¿ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=60&fit=crop" alt="ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ä¼çµ±å·¥èŠ¸ä½“é¨“é¤¨</span>
        <span class="sponsor-offer">ä½“é¨“å‰²å¼•</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1543083115-638c32cd3d58?w=100&h=60&fit=crop" alt="åœ°å…ƒç‰¹ç”£å“åº—" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">åœ°å…ƒç‰¹ç”£å“åº—</span>
        <span class="sponsor-offer">ãŠåœŸç”£10%OFF</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=100&h=60&fit=crop" alt="ã‚«ãƒ•ã‚§æ¡œ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ã‚«ãƒ•ã‚§æ¡œ</span>
        <span class="sponsor-offer">ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=100&h=60&fit=crop" alt="é‡£ã‚Šèˆ¹å¤ªéƒ" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">é‡£ã‚Šèˆ¹å¤ªéƒ</span>
        <span class="sponsor-offer">åˆå›åŠé¡</span>
      </div>
      <div class="sponsor-item">
        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=100&h=60&fit=crop" alt="ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š" class="sponsor-logo" onerror="this.style.display='none'">
        <span class="sponsor-text">ãƒ¬ãƒ³ã‚¿ãƒ«è‡ªè»¢è»Š</span>
        <span class="sponsor-offer">1æ—¥ãƒ¬ãƒ³ã‚¿ãƒ«</span>
      </div>
    </div>
  </div>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="container py-5">
    <!-- äººæ°—ã®ã‚¬ã‚¤ãƒ‰ -->
    <section id="guides" class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="position-relative">
          <button type="button" class="btn btn-sm btn-outline-info me-3" id="filter-tutorial-btn" style="border-radius: 20px;">
            <i class="bi bi-question-circle me-1"></i>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ä½¿ã„æ–¹
          </button>
        </div>
        <h2 class="mb-0 flex-grow-1 text-center">äººæ°—ã®ã‚¬ã‚¤ãƒ‰</h2>
        <div style="width: 140px;"></div> <!-- ã‚¹ãƒšãƒ¼ã‚µãƒ¼ -->
      </div>
      <div class="mb-4">
        <div id="search-results-counter"></div>
        <div id="no-results-message" class="alert alert-info text-center my-4 d-none">æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚¬ã‚¤ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„ã€‚</div>
        
        <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
        <div class="text-center mb-3">
          <button type="button" class="btn btn-outline-primary" id="toggle-filter-button">
            <i class="bi bi-funnel"></i> ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿
          </button>
        </div>
        
        <div class="row justify-content-center">
          <div class="col-md-10 col-lg-8">
            <div class="card shadow-sm d-none" id="filter-card">
              <div class="card-body">
                <h5 class="card-title mb-3">ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã‚€</h5>
                <form id="guide-filter-form">
                  <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ  -->
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="location-filter" class="form-label">åœ°åŸŸ</label>
                      <select class="form-select" id="location-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <optgroup label="éƒ½é“åºœçœŒ">
                          <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
                          <option value="é’æ£®çœŒ">é’æ£®çœŒ</option>
                          <option value="å²©æ‰‹çœŒ">å²©æ‰‹çœŒ</option>
                          <option value="å®®åŸçœŒ">å®®åŸçœŒ</option>
                          <option value="ç§‹ç”°çœŒ">ç§‹ç”°çœŒ</option>
                          <option value="å±±å½¢çœŒ">å±±å½¢çœŒ</option>
                          <option value="ç¦å³¶çœŒ">ç¦å³¶çœŒ</option>
                          <option value="èŒ¨åŸçœŒ">èŒ¨åŸçœŒ</option>
                          <option value="æ ƒæœ¨çœŒ">æ ƒæœ¨çœŒ</option>
                          <option value="ç¾¤é¦¬çœŒ">ç¾¤é¦¬çœŒ</option>
                          <option value="åŸ¼ç‰çœŒ">åŸ¼ç‰çœŒ</option>
                          <option value="åƒè‘‰çœŒ">åƒè‘‰çœŒ</option>
                          <option value="æ±äº¬éƒ½">æ±äº¬éƒ½</option>
                          <option value="ç¥å¥ˆå·çœŒ">ç¥å¥ˆå·çœŒ</option>
                          <option value="æ–°æ½ŸçœŒ">æ–°æ½ŸçœŒ</option>
                          <option value="å¯Œå±±çœŒ">å¯Œå±±çœŒ</option>
                          <option value="çŸ³å·çœŒ">çŸ³å·çœŒ</option>
                          <option value="ç¦äº•çœŒ">ç¦äº•çœŒ</option>
                          <option value="å±±æ¢¨çœŒ">å±±æ¢¨çœŒ</option>
                          <option value="é•·é‡çœŒ">é•·é‡çœŒ</option>
                          <option value="å²é˜œçœŒ">å²é˜œçœŒ</option>
                          <option value="é™å²¡çœŒ">é™å²¡çœŒ</option>
                          <option value="æ„›çŸ¥çœŒ">æ„›çŸ¥çœŒ</option>
                          <option value="ä¸‰é‡çœŒ">ä¸‰é‡çœŒ</option>
                          <option value="æ»‹è³€çœŒ">æ»‹è³€çœŒ</option>
                          <option value="äº¬éƒ½åºœ">äº¬éƒ½åºœ</option>
                          <option value="å¤§é˜ªåºœ">å¤§é˜ªåºœ</option>
                          <option value="å…µåº«çœŒ">å…µåº«çœŒ</option>
                          <option value="å¥ˆè‰¯çœŒ">å¥ˆè‰¯çœŒ</option>
                          <option value="å’Œæ­Œå±±çœŒ">å’Œæ­Œå±±çœŒ</option>
                          <option value="é³¥å–çœŒ">é³¥å–çœŒ</option>
                          <option value="å³¶æ ¹çœŒ">å³¶æ ¹çœŒ</option>
                          <option value="å²¡å±±çœŒ">å²¡å±±çœŒ</option>
                          <option value="åºƒå³¶çœŒ">åºƒå³¶çœŒ</option>
                          <option value="å±±å£çœŒ">å±±å£çœŒ</option>
                          <option value="å¾³å³¶çœŒ">å¾³å³¶çœŒ</option>
                          <option value="é¦™å·çœŒ">é¦™å·çœŒ</option>
                          <option value="æ„›åª›çœŒ">æ„›åª›çœŒ</option>
                          <option value="é«˜çŸ¥çœŒ">é«˜çŸ¥çœŒ</option>
                          <option value="ç¦å²¡çœŒ">ç¦å²¡çœŒ</option>
                          <option value="ä½è³€çœŒ">ä½è³€çœŒ</option>
                          <option value="é•·å´çœŒ">é•·å´çœŒ</option>
                          <option value="ç†Šæœ¬çœŒ">ç†Šæœ¬çœŒ</option>
                          <option value="å¤§åˆ†çœŒ">å¤§åˆ†çœŒ</option>
                          <option value="å®®å´çœŒ">å®®å´çœŒ</option>
                          <option value="é¹¿å…å³¶çœŒ">é¹¿å…å³¶çœŒ</option>
                          <option value="æ²–ç¸„çœŒ">æ²–ç¸„çœŒ</option>
                        </optgroup>
                        <optgroup label="é›¢å³¶">
                          <option value="å±‹ä¹…å³¶">å±‹ä¹…å³¶</option>
                          <option value="ç¨®å­å³¶">ç¨®å­å³¶</option>
                          <option value="å¥„ç¾å¤§å³¶">å¥„ç¾å¤§å³¶</option>
                          <option value="å®®å¤å³¶">å®®å¤å³¶</option>
                          <option value="çŸ³å£å³¶">çŸ³å£å³¶</option>
                          <option value="ç«¹å¯Œå³¶">ç«¹å¯Œå³¶</option>
                          <option value="è¥¿è¡¨å³¶">è¥¿è¡¨å³¶</option>
                          <option value="ä¸é‚£å›½å³¶">ä¸é‚£å›½å³¶</option>
                          <option value="ä½æ¸¡å³¶">ä½æ¸¡å³¶</option>
                          <option value="éš å²è«¸å³¶">éš å²è«¸å³¶</option>
                          <option value="å£±å²">å£±å²</option>
                          <option value="å¯¾é¦¬">å¯¾é¦¬</option>
                          <option value="äº”å³¶åˆ—å³¶">äº”å³¶åˆ—å³¶</option>
                          <option value="å°ç¬ åŸè«¸å³¶">å°ç¬ åŸè«¸å³¶</option>
                        </optgroup>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="language-filter" class="form-label">è¨€èª</label>
                      <select class="form-select" id="language-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="æ—¥æœ¬èª">æ—¥æœ¬èª</option>
                        <option value="è‹±èª">è‹±èª</option>
                        <option value="ä¸­å›½èª">ä¸­å›½èª</option>
                        <option value="éŸ“å›½èª">éŸ“å›½èª</option>
                        <option value="ãƒ•ãƒ©ãƒ³ã‚¹èª">ãƒ•ãƒ©ãƒ³ã‚¹èª</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="fee-filter" class="form-label">æ–™é‡‘</label>
                      <select class="form-select" id="fee-filter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="6000">Â¥6,000~/å›</option>
                        <option value="10000">Â¥10,000ä»¥ä¸‹/å›</option>
                        <option value="15000">Â¥15,000ä»¥ä¸‹/å›</option>
                        <option value="20000">Â¥20,000ä»¥ä¸‹/å›</option>
                      </select>
                    </div>
                    <div class="col-12">
                      <label class="form-label">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
                      <div class="d-flex flex-wrap" id="keyword-filter-group">
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼" id="keyword-night">
                          <label class="form-check-label" for="keyword-night">ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ã‚°ãƒ«ãƒ¡" id="keyword-food">
                          <label class="form-check-label" for="keyword-food">ã‚°ãƒ«ãƒ¡</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="å†™çœŸã‚¹ãƒãƒƒãƒˆ" id="keyword-photo">
                          <label class="form-check-label" for="keyword-photo">å†™çœŸã‚¹ãƒãƒƒãƒˆ</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="æ–™ç†" id="keyword-cooking">
                          <label class="form-check-label" for="keyword-cooking">æ–™ç†</label>
                        </div>
                        <div class="form-check me-3 mb-2">
                          <input class="form-check-input keyword-checkbox" type="checkbox" value="ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£" id="keyword-activity">
                          <label class="form-check-label" for="keyword-activity">ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£</label>
                        </div>
                      </div>
                      <input type="text" class="form-control mt-2" id="keyword-filter-custom" placeholder="ãã®ä»–ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆã‚³ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å…¥åŠ›å¯ï¼‰">
                      <small class="text-muted mt-1 d-block">
                        <i class="bi bi-info-circle"></i> ä¸Šè¨˜ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¾ãŸã¯ã“ã®å…¥åŠ›æ¬„ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŒ‡å®šã§ãã¾ã™ã€‚è¤‡æ•°ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹å ´åˆã¯ã€ã‚«ãƒ³ãƒï¼ˆ,ï¼‰ã§åŒºåˆ‡ã£ã¦ãã ã•ã„ã€‚ä¾‹: ã€Œæ¸©æ³‰,ç™»å±±,ãƒã‚¤ã‚­ãƒ³ã‚°ã€
                      </small>
                    </div>
                    <div class="col-12 d-flex justify-content-end">
                      <button type="reset" class="btn btn-secondary me-2" id="reset-filters">ãƒªã‚»ãƒƒãƒˆ</button>
                      <button type="button" class="btn btn-primary" id="apply-filters">
                        <i class="bi bi-search"></i> æ¤œç´¢
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row guides-container" id="guide-cards-container">
        <!-- åˆæœŸè¡¨ç¤ºã•ã‚Œã‚‹ã‚¬ã‚¤ãƒ‰ -->
        <!-- ã‚¬ã‚¤ãƒ‰1 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="1" data-location="æ±äº¬éƒ½ æ¸‹è°·åŒº" data-languages="æ—¥æœ¬èª,è‹±èª" data-fee="6000" data-keywords="ã‚°ãƒ«ãƒ¡,å†™çœŸã‚¹ãƒãƒƒãƒˆ">
            <img src="attached_assets/IMG20221024140826_1750355257888.jpg" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">æ¡ƒå¤ªéƒ</h5>
                <span class="badge bg-primary">Â¥6,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>æ±äº¬éƒ½ æ¸‹è°·åŒº
              </p>
              <p class="card-text mb-3">æ±äº¬ã®éš ã‚ŒãŸåæ‰€ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚ã‚°ãƒ«ãƒ¡ã‚„å†™çœŸã‚¹ãƒãƒƒãƒˆãŒå¾—æ„ã§ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <span class="text-dark ms-1">4.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="1">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰2 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="2" data-location="äº¬éƒ½åºœ äº¬éƒ½å¸‚" data-languages="æ—¥æœ¬èª,è‹±èª,ä¸­å›½èª" data-fee="8000" data-keywords="æ­´å²,æ–‡åŒ–,å¯ºé™¢,å†™çœŸã‚¹ãƒãƒƒãƒˆ">
            <img src="attached_assets/IMG20221024140826_1750355257888.jpg" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">èŠ±å­</h5>
                <span class="badge bg-primary">Â¥5,500/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>äº¬éƒ½åºœ äº¬éƒ½å¸‚
              </p>
              <p class="card-text mb-3">æ­´å²ã¨ä¼çµ±ãŒæ¯ã¥ãäº¬éƒ½ã®é­…åŠ›ã‚’ã”æ¡ˆå†…ã€‚å¯ºç¤¾å·¡ã‚Šã‚„ä¼çµ±æ–‡åŒ–ä½“é¨“ãŒå¾—æ„ã§ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="2">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰3 -->
        <div class="col-md-4 guide-item">
          <div class="card guide-card shadow-sm" data-guide-id="3" data-location="å¤§é˜ªåºœ å¤§é˜ªå¸‚" data-languages="æ—¥æœ¬èª,è‹±èª" data-fee="7000" data-keywords="ã‚°ãƒ«ãƒ¡,ãƒŠã‚¤ãƒˆãƒ„ã‚¢ãƒ¼,ãƒ­ãƒ¼ã‚«ãƒ«">
            <img src="attached_assets/IMG20221024140826_1750355257888.jpg" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">ä¸€éƒ</h5>
                <span class="badge bg-primary">Â¥5,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2 guide-location">
                <i class="bi bi-geo-alt-fill me-1"></i>å¤§é˜ªåºœ å¤§é˜ªå¸‚
              </p>
              <p class="card-text mb-3">å¤§é˜ªãªã‚‰ã§ã¯ã®é£Ÿã¹æ­©ãã¨è¡—æ­©ããŒå°‚é–€ã€‚åœ°å…ƒã®äººã ã‘ãŒçŸ¥ã‚‹ååº—ã«ã”æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark guide-lang me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª(åŸºç¤)</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">3.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="3">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- è¿½åŠ ã®ã‚¬ã‚¤ãƒ‰ï¼ˆåˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤ºï¼‰ -->
        <!-- ã‚¬ã‚¤ãƒ‰4 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="4">
            <img src="https://placehold.co/400x300?text=åŒ—æµ·é“ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">é›ª</h5>
                <span class="badge bg-primary">Â¥8,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>åŒ—æµ·é“ æœ­å¹Œå¸‚
              </p>
              <p class="card-text mb-3">åŒ—æµ·é“ãƒ»æœ­å¹Œã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¬ã‚¤ãƒ‰ã€‚å››å­£æŠ˜ã€…ã®è‡ªç„¶ã¨æ–°é®®ãªæµ·ã®å¹¸ã€çµ¶æ™¯ã‚¹ãƒãƒƒãƒˆã‚’ã”æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark me-1">è‹±èª</span>
                  <span class="badge bg-light text-dark">ãƒ­ã‚·ã‚¢èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="4">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰5 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="5">
            <img src="https://placehold.co/400x300?text=æ²–ç¸„ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">æµ·</h5>
                <span class="badge bg-primary">Â¥12,000/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>æ²–ç¸„çœŒ é‚£è¦‡å¸‚
              </p>
              <p class="card-text mb-3">æ²–ç¸„åœ¨ä½15å¹´ã®ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã€‚ç¾ã—ã„æµ·ã¨ç‹¬è‡ªã®æ–‡åŒ–ãŒæ®‹ã‚‹å³¶ã€…ã‚’æ¡ˆå†…ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark">è‹±èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-half"></i>
                  <span class="text-dark ms-1">4.5</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="5">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
        
        <!-- ã‚¬ã‚¤ãƒ‰6 -->
        <div class="col-md-4 guide-item hidden-guide">
          <div class="card guide-card shadow-sm" data-guide-id="6">
            <img src="https://placehold.co/400x300?text=åºƒå³¶ã‚¬ã‚¤ãƒ‰" class="card-img-top guide-image" alt="ã‚¬ã‚¤ãƒ‰å†™çœŸ">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="card-title mb-0">å¹³å’Œ</h5>
                <span class="badge bg-primary">Â¥6,500/ã‚»ãƒƒã‚·ãƒ§ãƒ³</span>
              </div>
              <p class="card-text text-muted mb-2">
                <i class="bi bi-geo-alt-fill me-1"></i>åºƒå³¶çœŒ åºƒå³¶å¸‚
              </p>
              <p class="card-text mb-3">åºƒå³¶ã®æ­´å²ã¨æ–‡åŒ–ã«ç²¾é€šã—ãŸã‚¬ã‚¤ãƒ‰ã€‚å¹³å’Œè¨˜å¿µå…¬åœ’ã‹ã‚‰å®®å³¶ã¾ã§ã€å¿ƒã«æ®‹ã‚‹æ—…ã‚’ã”æä¾›ã—ã¾ã™ã€‚</p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge bg-light text-dark me-1">æ—¥æœ¬èª</span>
                  <span class="badge bg-light text-dark me-1">è‹±èª</span>
                  <span class="badge bg-light text-dark">ãƒ•ãƒ©ãƒ³ã‚¹èª</span>
                </div>
                <div class="text-warning">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <span class="text-dark ms-1">4.0</span>
                </div>
              </div>
            </div>
            <div class="card-footer bg-white border-0 pt-0">
              <a href="#" class="btn btn-outline-primary w-100 guide-details-link" data-guide-id="6">è©³ç´°ã‚’è¦‹ã‚‹</a>
            </div>
          </div>
        </div>
      </div>
      
      <div class="text-center mt-4">
        <button class="btn btn-primary" id="load-more-guides">ã‚‚ã£ã¨è¦‹ã‚‹</button>
      </div>
    </section>
    
    <!-- ä½¿ã„æ–¹ -->
    <section id="how-it-works" class="mb-5">
      <h2 class="text-center mb-4">ä½¿ã„æ–¹</h2>
      <div class="row text-center">
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">1</h3>
            </div>
            <h4>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²</h4>
            <p>ç°¡å˜ãªæƒ…å ±å…¥åŠ›ã¨é›»è©±ç•ªå·èªè¨¼ã§ç™»éŒ²å®Œäº†</p>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">2</h3>
            </div>
            <h4>ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™</h4>
            <p>å ´æ‰€ã€è¨€èªã€å°‚é–€æ€§ãªã©ã§ç†æƒ³ã®ã‚¬ã‚¤ãƒ‰ã‚’æ¤œç´¢</p>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3">
            <div class="bg-primary text-white rounded-circle d-inline-flex justify-content-center align-items-center mb-3" style="width: 80px; height: 80px;">
              <h3 class="m-0">3</h3>
            </div>
            <h4>äºˆç´„ã—ã¦æ¥½ã—ã‚€</h4>
            <p>å¸Œæœ›ã®æ—¥æ™‚ã§äºˆç´„ã—ã€ç‰¹åˆ¥ãªä½“é¨“ã‚’æ¥½ã—ã‚€</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- ã‚¬ã‚¤ãƒ‰ã®ãƒ¡ãƒªãƒƒãƒˆ -->
    <section id="guide-benefits" class="mb-5 py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-4">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦æ´»èºã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ</h2>
        <p class="text-center lead mb-5">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’æ´»ã‹ã—ã¦ã€ä¸–ç•Œä¸­ã®æ—…è¡Œè€…ã«ç‰¹åˆ¥ãªä½“é¨“ã‚’æä¾›ã—ã¾ã—ã‚‡ã†</p>
        
        <div class="row">
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>ã‚ãªãŸã®æ—¥å¸¸ãŒè¦³å…‰è³‡æºã«ãªã‚‹</h5>
                  <p class="text-muted mb-0">åœ°å…ƒã®æ–¹ã ã‘ãŒçŸ¥ã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã‚„ä½“é¨“ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€æ—¥å¸¸ãŒã‹ã‘ãŒãˆã®ãªã„æ—…ã®æ€ã„å‡ºã«å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è¦³å…‰å®¢ã®æ–¹ã‚’å‹é”ã¨ã—ã¦ãŠè¿ãˆã™ã‚‹ã ã‘ã§ã™</h5>
                  <p class="text-muted mb-0">å½¢å¼ã°ã£ãŸã‚¬ã‚¤ãƒ‰ãƒ„ã‚¢ãƒ¼ã§ã¯ãªãã€å‹äººã¨ã®äº¤æµã®ã‚ˆã†ã«è‡ªç„¶ãªå½¢ã§åœ°å…ƒã®é­…åŠ›ã‚’ä¼ãˆã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>éš™é–“æ™‚é–“ã‚’ä½¿ã£ã¦åŠ¹ç‡ã‚ˆããŠä»•äº‹ã‚’ã™ã‚‹</h5>
                  <p class="text-muted mb-0">è‡ªåˆ†ã®éƒ½åˆã®è‰¯ã„æ™‚é–“ã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã‚‹ãŸã‚ã€æœ¬æ¥­ã‚„å­¦æ¥­ã¨ä¸¡ç«‹ã—ãªãŒã‚‰åå…¥ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è‡ªåˆ†ã®å¥½ããªã“ã¨ã‚’ä»•äº‹ã«ã§ãã‚‹</h5>
                  <p class="text-muted mb-0">è¶£å‘³ã‚„ç‰¹æŠ€ã€å°‚é–€çŸ¥è­˜ã‚’æ´»ã‹ã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚¬ã‚¤ãƒ‰ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€æƒ…ç†±ã‚’åå…¥ã«å¤‰ãˆã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>ä¸–ç•Œä¸­ã®äººã¨æ–°ã—ã„å‡ºä¼šã„ãŒç”Ÿã¾ã‚Œã‚‹</h5>
                  <p class="text-muted mb-0">æ§˜ã€…ãªå›½ã‚„æ–‡åŒ–ã‹ã‚‰æ¥ãŸæ—…è¡Œè€…ã¨ã®äº¤æµã‚’é€šã˜ã¦ã€å›½éš›çš„ãªäººè„ˆã‚’åºƒã’ã€ç•°æ–‡åŒ–ç†è§£ã‚’æ·±ã‚ã‚‰ã‚Œã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>èªå­¦åŠ›ã‚’æ´»ã‹ã—ã€ã•ã‚‰ã«å‘ä¸Šã•ã›ã‚‰ã‚Œã‚‹</h5>
                  <p class="text-muted mb-0">å¤–å›½èªã‚’ä½¿ã†å®Ÿè·µçš„ãªæ©Ÿä¼šãŒå¾—ã‚‰ã‚Œã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ãŒè‡ªç„¶ã¨é«˜ã¾ã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>åœ°å…ƒã¸ã®æ„›ç€ã¨èª‡ã‚ŠãŒæ·±ã¾ã‚‹</h5>
                  <p class="text-muted mb-0">åœ°å…ƒã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ã§ã€è‡ªåˆ†è‡ªèº«ã®ä½ã‚€åœ°åŸŸã¸ã®ç†è§£ã‚„æ„›ç€ãŒã•ã‚‰ã«å¼·ããªã‚Šã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>å®‰å¿ƒã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶</h5>
                  <p class="text-muted mb-0">äºˆç´„ç®¡ç†ã€æ±ºæ¸ˆã€ä¿é™ºãªã©ã€ã‚¬ã‚¤ãƒ‰æ´»å‹•ã«å¿…è¦ãªåŸºç›¤ã‚’å½“ã‚µãƒ¼ãƒ“ã‚¹ãŒæä¾›ã™ã‚‹ã®ã§å®‰å¿ƒã—ã¦æ´»å‹•ã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§æ´»å‹•å¯èƒ½</h5>
                  <p class="text-muted mb-0">äºˆç´„ã‚’å—ã‘ã‚‹æ—¥æ™‚ã‚„é »åº¦ã¯å®Œå…¨ã«è‡ªåˆ†ã§æ±ºã‚ã‚‰ã‚Œã‚‹ãŸã‚ã€ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸåƒãæ–¹ãŒã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-lg-6">
            <div class="guide-benefit-card mb-4 p-4 bg-white rounded shadow-sm">
              <div class="d-flex">
                <div class="benefit-check me-3 text-primary">
                  <i class="bi bi-check-circle-fill fs-3"></i>
                </div>
                <div>
                  <h5>åœ°åŸŸæ´»æ€§åŒ–ã«è²¢çŒ®ã§ãã‚‹</h5>
                  <p class="text-muted mb-0">è¦³å…‰å®¢ã‚’åœ°å…ƒã®ãŠåº—ã‚„æ–½è¨­ã«æ¡ˆå†…ã™ã‚‹ã“ã¨ã§ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ç™ºå±•ã«è²¢çŒ®ã§ãã¾ã™ã€‚</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-center mt-4">
          <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#registerGuideModal">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²ã™ã‚‹</button>
        </div>
      </div>
    </section>
  </div>

  <!-- è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerTouristModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="tourist-register-form">
            <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">åŸºæœ¬æƒ…å ±</h4>
              <div class="mb-3">
                <label for="tourist-name" class="form-label">æ°å <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tourist-name" required>
              </div>
              <div class="mb-3">
                <label for="tourist-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="tourist-email" required>
              </div>
              <div class="mb-3">
                <label for="tourist-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="password" class="form-control" id="tourist-password" required>
                <div class="form-text">8æ–‡å­—ä»¥ä¸Šã§ã€è‹±æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„</div>
              </div>
            </div>
            
            <!-- é›»è©±ç•ªå·èªè¨¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">é›»è©±ç•ªå·èªè¨¼</h4>
              <div class="mb-3">
                <label for="tourist-phone-number" class="form-label">é›»è©±ç•ªå· <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text">+81</span>
                  <input type="tel" class="form-control" id="tourist-phone-number" placeholder="9012345678ï¼ˆå…ˆé ­ã®0ã¯é™¤ãï¼‰" required>
                  <button type="button" class="btn btn-primary" id="tourist-send-code-btn">èªè¨¼ã‚³ãƒ¼ãƒ‰é€ä¿¡</button>
                </div>
                <div class="form-text">ãƒã‚¤ãƒ•ãƒ³ãªã—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
              </div>
              
              <div class="mb-4" id="tourist-verification-code-container">
                <label for="tourist-verification-code" class="form-label">èªè¨¼ã‚³ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tourist-verification-code" maxlength="6" placeholder="SMSã«é€ä¿¡ã•ã‚ŒãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰">
              </div>
              
              <div id="tourist-recaptcha-container" class="mb-3"></div>
              <div id="tourist-phone-verified" class="alert alert-success d-none">é›»è©±ç•ªå·èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ âœ“</div>
            </div>
            
            <!-- èº«åˆ†è¨¼æ˜æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèª</h4>
              <div class="mb-3">
                <label for="tourist-id-type" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ <span class="text-danger">*</span></label>
                <select class="form-select" id="tourist-id-type" required>
                  <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="passport">ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ</option>
                  <option value="drivers_license">é‹è»¢å…è¨±è¨¼</option>
                  <option value="my_number">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</option>
                </select>
              </div>
              
              <div class="mb-3">
                <label for="tourist-id-front" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="tourist-id-front" accept="image/*" required>
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="tourist-id-front">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="tourist-id-front-preview-container">
                  <div class="document-preview">
                    <img id="tourist-id-front-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è¡¨é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="tourist-id-front-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
              
              <div class="mb-3 d-none" id="tourist-id-back-container">
                <label for="tourist-id-back" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="tourist-id-back" accept="image/*">
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="tourist-id-back">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="tourist-id-back-preview-container">
                  <div class="document-preview">
                    <img id="tourist-id-back-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è£é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="tourist-id-back-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- åˆ©ç”¨è¦ç´„ -->
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="tourist-terms" required>
                <label class="form-check-label" for="tourist-terms">
                  <a href="#" target="_blank">åˆ©ç”¨è¦ç´„</a>ã¨<a href="#" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ã¾ã™
                </label>
              </div>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">ç™»éŒ²ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ãŠå•ã„åˆã‚ã›ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="contactModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ãŠå•ã„åˆã‚ã›</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="contact-form">
            <div class="mb-3">
              <label for="contact-name" class="form-label">ãŠåå‰ <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="contact-name" required>
            </div>
            
            <div class="mb-3">
              <label for="contact-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
              <input type="email" class="form-control" id="contact-email" required>
            </div>
            
            <div class="mb-3">
              <label for="contact-subject" class="form-label">ä»¶å <span class="text-danger">*</span></label>
              <select class="form-select" id="contact-subject" required>
                <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="general">ä¸€èˆ¬çš„ãªãŠå•ã„åˆã‚ã›</option>
                <option value="service">ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦</option>
                <option value="support">ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦</option>
                <option value="feedback">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»ææ¡ˆ</option>
                <option value="other">ãã®ä»–</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="contact-message" class="form-label">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ <span class="text-danger">*</span></label>
              <textarea class="form-control" id="contact-message" rows="5" required></textarea>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">é€ä¿¡ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="loginTouristModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">æ—…è¡Œè€…ãƒ­ã‚°ã‚¤ãƒ³</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="tourist-login-form">
            <div class="mb-3">
              <label for="tourist-login-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
              <input type="email" class="form-control" id="tourist-login-email" required>
            </div>
            <div class="mb-3">
              <label for="tourist-login-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
              <input type="password" class="form-control" id="tourist-login-password" required>
            </div>
            <div class="d-grid mb-3">
              <button type="submit" class="btn btn-primary">ãƒ­ã‚°ã‚¤ãƒ³</button>
            </div>
            <div class="text-center">
              <p class="mb-0">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ <a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">ã“ã¡ã‚‰</a> ã‹ã‚‰ç™»éŒ²ã§ãã¾ã™</p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerPromptModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ä¼šå“¡ç™»éŒ²ãŒå¿…è¦ã§ã™</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="text-center mb-4">
            <i class="bi bi-lock-fill text-primary" style="font-size: 3rem;"></i>
            <h4 class="mt-3">ã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚’è¦‹ã‚‹ã«ã¯ä¼šå“¡ç™»éŒ²ãŒå¿…è¦ã§ã™</h4>
            <p class="text-muted">ç™»éŒ²ã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã€å¤šãã®ç‰¹å…¸ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
          </div>
          
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title"><i class="bi bi-person me-2"></i>æ—…è¡Œè€…ã¨ã—ã¦ç™»éŒ²</h5>
                  <p class="card-text">ç¾åœ°ã‚¬ã‚¤ãƒ‰ã¨ä¸€ç·’ã«ç‰¹åˆ¥ãªæ—…è¡Œä½“é¨“ã‚’æ¢ã—ã¾ã—ã‚‡ã†ã€‚</p>
                  <button class="btn btn-primary w-100" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">
                    æ—…è¡Œè€…ç™»éŒ²ã¸é€²ã‚€
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title"><i class="bi bi-map me-2"></i>ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²</h5>
                  <p class="card-text">ã‚ãªãŸã®çŸ¥è­˜ã¨çµŒé¨“ã‚’å…±æœ‰ã—ã€åå…¥ã‚’å¾—ã¾ã—ã‚‡ã†ã€‚</p>
                  <button class="btn btn-outline-primary w-100" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerGuideModal">
                    ã‚¬ã‚¤ãƒ‰ç™»éŒ²ã¸é€²ã‚€
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="text-center">
            <p>ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯<a href="#" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#loginModal">ã“ã¡ã‚‰ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³</a>ã—ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="registerGuideModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ç™»éŒ²</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="guide-register-form">
            <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">åŸºæœ¬æƒ…å ±</h4>
              
              <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ -->
              <div class="mb-4 text-center">
                <label for="guide-profile-photo" class="form-label d-block">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ <span class="text-danger">*</span></label>
                <div class="profile-photo-container mx-auto mb-3">
                  <img id="guide-profile-preview" src="https://placehold.co/150?text=å†™çœŸ" class="img-thumbnail rounded-circle profile-photo" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ">
                  <div class="profile-photo-overlay">
                    <i class="bi bi-camera-fill"></i>
                  </div>
                </div>
                <div class="d-flex justify-content-center">
                  <div class="w-50">
                    <input type="file" class="form-control" id="guide-profile-photo" accept="image/*" required>
                    <button type="button" class="btn btn-outline-secondary document-camera mobile-only mt-2 w-100" data-target="guide-profile-photo">
                      <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©ã§æ’®å½±
                    </button>
                  </div>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
              </div>
              
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="guide-name" class="form-label">æ°å <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="guide-name" required>
                </div>
                <div class="col-md-6">
                  <label for="guide-username" class="form-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼å <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="guide-username" required>
                  <div class="form-text">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«URLã«ä½¿ç”¨ã•ã‚Œã¾ã™</div>
                </div>
              </div>
              <div class="mb-3">
                <label for="guide-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="guide-email" required>
              </div>
              <div class="mb-3">
                <label for="guide-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="password" class="form-control" id="guide-password" required>
                <div class="form-text">8æ–‡å­—ä»¥ä¸Šã§ã€è‹±æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„</div>
              </div>
              <div class="mb-3">
                <label for="guide-location" class="form-label">æ´»å‹•ã‚¨ãƒªã‚¢ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="guide-location" placeholder="ä¾‹ï¼šæ±äº¬éƒ½æ–°å®¿åŒº" required>
              </div>
              <div class="mb-3">
                <label for="guide-languages" class="form-label">å¯¾å¿œè¨€èª <span class="text-danger">*</span></label>
                <select class="form-select" id="guide-languages" multiple required>
                  <option value="ja">æ—¥æœ¬èª</option>
                  <option value="en">è‹±èª</option>
                  <option value="zh">ä¸­å›½èª</option>
                  <option value="ko">éŸ“å›½èª</option>
                  <option value="fr">ãƒ•ãƒ©ãƒ³ã‚¹èª</option>
                  <option value="de">ãƒ‰ã‚¤ãƒ„èª</option>
                  <option value="es">ã‚¹ãƒšã‚¤ãƒ³èª</option>
                </select>
                <div class="form-text">Ctrlã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰è¤‡æ•°é¸æŠã§ãã¾ã™</div>
              </div>
            </div>
            
            <!-- é›»è©±ç•ªå·èªè¨¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">é›»è©±ç•ªå·èªè¨¼</h4>
              <div class="mb-3">
                <label for="guide-phone-number" class="form-label">é›»è©±ç•ªå· <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text">+81</span>
                  <input type="tel" class="form-control" id="guide-phone-number" placeholder="9012345678ï¼ˆå…ˆé ­ã®0ã¯é™¤ãï¼‰" required>
                  <button type="button" class="btn btn-primary" id="guide-send-code-btn">èªè¨¼ã‚³ãƒ¼ãƒ‰é€ä¿¡</button>
                </div>
                <div class="form-text">ãƒã‚¤ãƒ•ãƒ³ãªã—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
              </div>
              
              <div class="mb-4" id="guide-verification-code-container">
                <label for="guide-verification-code" class="form-label">èªè¨¼ã‚³ãƒ¼ãƒ‰ <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="guide-verification-code" maxlength="6" placeholder="SMSã«é€ä¿¡ã•ã‚ŒãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰">
              </div>
              
              <div id="guide-recaptcha-container" class="mb-3"></div>
              <div id="guide-phone-verified" class="alert alert-success d-none">é›»è©±ç•ªå·èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ âœ“</div>
            </div>
            
            <!-- èº«åˆ†è¨¼æ˜æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="border-bottom pb-3 mb-3">
              <h4 class="section-title">èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèª</h4>
              <div class="mb-3">
                <label for="guide-id-type" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ <span class="text-danger">*</span></label>
                <select class="form-select" id="guide-id-type" required>
                  <option value="" selected disabled>é¸æŠã—ã¦ãã ã•ã„</option>
                  <option value="passport">ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ</option>
                  <option value="drivers_license">é‹è»¢å…è¨±è¨¼</option>
                  <option value="my_number">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰</option>
                </select>
              </div>
              
              <div class="mb-3">
                <label for="guide-id-front" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="guide-id-front" accept="image/*" required>
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="guide-id-front">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="guide-id-front-preview-container">
                  <div class="document-preview">
                    <img id="guide-id-front-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è¡¨é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="guide-id-front-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
              
              <div class="mb-3 d-none" id="guide-id-back-container">
                <label for="guide-id-back" class="form-label">èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="file" class="form-control" id="guide-id-back" accept="image/*">
                  <button type="button" class="btn btn-outline-secondary document-camera mobile-only" data-target="guide-id-back">
                    <i class="bi bi-camera"></i> ã‚«ãƒ¡ãƒ©
                  </button>
                </div>
                <div class="form-text">JPGã€PNGå½¢å¼ã®ã¿ã€5MBä»¥ä¸‹</div>
                <div class="mt-2 document-preview-container" id="guide-id-back-preview-container">
                  <div class="document-preview">
                    <img id="guide-id-back-preview" class="img-fluid img-thumbnail d-none" alt="èº«åˆ†è¨¼æ˜æ›¸è£é¢ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
                    <button type="button" class="btn btn-danger btn-sm mt-2 d-none" id="guide-id-back-delete">
                      <i class="bi bi-trash"></i> å‰Šé™¤
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- åˆ©ç”¨è¦ç´„ -->
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="guide-terms" required>
                <label class="form-check-label" for="guide-terms">
                  <a href="#" target="_blank">åˆ©ç”¨è¦ç´„</a>ã€<a href="#" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã€ãŠã‚ˆã³<a href="#" target="_blank">ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ã¾ã™
                </label>
              </div>
            </div>
            
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">ç™»éŒ²ã™ã‚‹</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">ãƒ­ã‚°ã‚¤ãƒ³</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="login-form">
            <div class="mb-3">
              <label class="form-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—</label>
              <div class="user-type-selector">
                <div class="btn-group w-100" role="group" aria-label="ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—é¸æŠ">
                  <input type="radio" class="btn-check" name="login-user-type" id="login-user-tourist" value="tourist" autocomplete="off" checked>
                  <label class="btn btn-outline-primary" for="login-user-tourist">
                    <i class="bi bi-person me-1"></i> è¦³å…‰å®¢
                  </label>
                  
                  <input type="radio" class="btn-check" name="login-user-type" id="login-user-guide" value="guide" autocomplete="off">
                  <label class="btn btn-outline-primary" for="login-user-guide">
                    <i class="bi bi-map me-1"></i> ã‚¬ã‚¤ãƒ‰
                  </label>
                </div>
              </div>
              <div class="user-type-helper text-center mt-1 mb-3">
                <small id="user-type-description" class="text-muted">
                  è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã—ãŸã‚Šäºˆç´„ã§ãã¾ã™
                </small>
              </div>
            </div>
            <div class="mb-3">
              <label for="login-email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-end-0">
                  <i class="bi bi-envelope text-muted"></i>
                </span>
                <input type="email" class="form-control border-start-0" id="login-email" placeholder="example@email.com" required>
              </div>
            </div>
            <div class="mb-3">
              <label for="login-password" class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
              <input type="password" class="form-control" id="login-password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" required>
              <div class="mt-2">
                <a href="#" class="password-reset-link">
                  <i class="bi bi-question-circle me-1"></i>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ
                </a>
              </div>
            </div>
            <div class="mb-3 form-check">
              <input type="checkbox" class="form-check-input" id="login-remember">
              <label class="form-check-label" for="login-remember">ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹</label>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary login-button" id="main-login-btn">
                <i class="bi bi-box-arrow-in-right me-2"></i>ãƒ­ã‚°ã‚¤ãƒ³
              </button>
            </div>
          </form>
          <hr>
          <div class="text-center">
            <div class="bg-light rounded p-3 mb-3">
              <h6 class="text-primary mb-2">ãƒ‡ãƒ¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰</h6>
              <div class="small text-start">
                <div><strong>ãƒ¡ãƒ¼ãƒ«:</strong> test@example.com</div>
                <div><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> password</div>
                <hr class="my-2">
                <div><strong>ãƒ¡ãƒ¼ãƒ«:</strong> tourist@test.com</div>
                <div><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> test123</div>
              </div>
            </div>
            <p class="mb-2">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹</p>
            <button class="btn btn-outline-primary" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerTouristModal">
              <i class="bi bi-person-plus me-1"></i>æ–°è¦ç™»éŒ²
            </button>
          </div>
          
          <!-- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆå°†æ¥çš„ãªæ©Ÿèƒ½ï¼‰ -->
          <div class="social-login d-none">
            <div class="social-login-title">ã¾ãŸã¯</div>
            <div class="social-login-buttons">
              <button class="social-btn" title="Googleã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-google"></i>
              </button>
              <button class="social-btn" title="Facebookã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-facebook"></i>
              </button>
              <button class="social-btn" title="Twitterã§ãƒ­ã‚°ã‚¤ãƒ³">
                <i class="bi bi-twitter"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—é¸æŠã®å‹•ä½œæ”¹å–„ -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
      if (sessionStorage.getItem('showLoginOnLoad') === 'true') {
        sessionStorage.removeItem('showLoginOnLoad');
        const accessMessage = sessionStorage.getItem('accessAttemptMessage');
        if (accessMessage) {
          sessionStorage.removeItem('accessAttemptMessage');
        }
        setTimeout(() => {
          const pendingGuideId = sessionStorage.getItem('pendingGuideId');
          if (pendingGuideId) {
            showTouristLoginPrompt(pendingGuideId);
          } else {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šé€šå¸¸ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
          }
        }, 800);
      }
      
      // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ç›´æ¥ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ãŸå ´åˆã®å‡¦ç†
      const urlParams = new URLSearchParams(window.location.search);
      const requireLogin = urlParams.get('requireLogin');
      const directGuideId = urlParams.get('guide');
      
      if (requireLogin === 'true') {
        // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ãªå ´åˆ
        if (directGuideId) {
          sessionStorage.setItem('pendingGuideId', directGuideId);
        }
        setTimeout(() => {
          if (directGuideId) {
            showTouristLoginPrompt(directGuideId);
          } else {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
          }
        }, 1000);
        // URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤
        window.history.replaceState({}, document.title, window.location.pathname);
      } else if (directGuideId && !localStorage.getItem('touristData')) {
        // æœªãƒ­ã‚°ã‚¤ãƒ³ã§ç›´æ¥ã‚¬ã‚¤ãƒ‰ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦ã¿ãŸå ´åˆ
        sessionStorage.setItem('pendingGuideId', directGuideId);
        setTimeout(() => {
          showTouristLoginPrompt(directGuideId);
        }, 1000);
        // URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤
        window.history.replaceState({}, document.title, window.location.pathname);
      }
      
      // ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
      const touristRadio = document.getElementById('login-user-tourist');
      const guideRadio = document.getElementById('login-user-guide');
      const userTypeDescription = document.getElementById('user-type-description');
      
      function updateUserTypeDescription() {
        if (touristRadio && guideRadio && userTypeDescription) {
          if (touristRadio.checked) {
            userTypeDescription.textContent = 'è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã—ãŸã‚Šäºˆç´„ã§ãã¾ã™';
          } else if (guideRadio.checked) {
            userTypeDescription.textContent = 'ã‚¬ã‚¤ãƒ‰ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ç·¨é›†ã‚„äºˆç´„ã®ç®¡ç†ãŒã§ãã¾ã™';
          }
          console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ:', touristRadio.checked ? 'tourist' : 'guide');
        }
      }
      
      // åˆæœŸçŠ¶æ…‹ã§èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
      updateUserTypeDescription();
      
      // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®å¤‰æ›´ã‚’ç›£è¦–
      if (touristRadio) touristRadio.addEventListener('change', updateUserTypeDescription);
      if (guideRadio) guideRadio.addEventListener('change', updateUserTypeDescription);
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // èº«åˆ†è¨¼æ˜æ›¸ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡æ›¿ï¼ˆã‚¬ã‚¤ãƒ‰ï¼‰
      const guideIdTypeSelect = document.getElementById('guide-id-type');
      const guideIdBackContainer = document.getElementById('guide-id-back-container');
      
      if (guideIdTypeSelect && guideIdBackContainer) {
        guideIdTypeSelect.addEventListener('change', function() {
          if (this.value === 'drivers_license' || this.value === 'my_number') {
            guideIdBackContainer.classList.remove('d-none');
          } else {
            guideIdBackContainer.classList.add('d-none');
          }
        });
      }
      
      // èº«åˆ†è¨¼æ˜æ›¸ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡æ›¿ï¼ˆæ—…è¡Œè€…ï¼‰
      const touristIdTypeSelect = document.getElementById('tourist-id-type');
      const touristIdBackContainer = document.getElementById('tourist-id-back-container');
      
      if (touristIdTypeSelect && touristIdBackContainer) {
        touristIdTypeSelect.addEventListener('change', function() {
          if (this.value === 'drivers_license' || this.value === 'my_number') {
            touristIdBackContainer.classList.remove('d-none');
          } else {
            touristIdBackContainer.classList.add('d-none');
          }
        });
      }

      // èº«åˆ†è¨¼æ˜æ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨å‰Šé™¤æ©Ÿèƒ½ã®è¨­å®š
      setupDocumentPreview('guide-id-front');
      setupDocumentPreview('guide-id-back');
      setupDocumentPreview('tourist-id-front');
      setupDocumentPreview('tourist-id-back');
      
      function setupDocumentPreview(inputId) {
        const fileInput = document.getElementById(inputId);
        const previewImg = document.getElementById(`${inputId}-preview`);
        const deleteBtn = document.getElementById(`${inputId}-delete`);
        
        if (fileInput && previewImg && deleteBtn) {
          // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
          fileInput.addEventListener('change', function(e) {
            if (this.files && this.files[0]) {
              const reader = new FileReader();
              
              reader.onload = function(e) {
                previewImg.src = e.target.result;
                previewImg.classList.remove('d-none');
                deleteBtn.classList.remove('d-none');
              };
              
              reader.readAsDataURL(this.files[0]);
            }
          });
          
          // å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
          deleteBtn.addEventListener('click', function() {
            fileInput.value = '';
            previewImg.src = '';
            previewImg.classList.add('d-none');
            deleteBtn.classList.add('d-none');
          });
        }
      }
      
      // ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºã¨ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤º
      function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      }
      
      // PCã®å ´åˆã¯ã‚«ãƒ¡ãƒ©ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
      if (!isMobile()) {
        document.querySelectorAll('.mobile-only').forEach(elem => {
          elem.style.display = 'none';
        });
      }
      
      // é›»è©±ç•ªå·èªè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      setupPhoneVerification('tourist');
      setupPhoneVerification('guide');
      
      function setupPhoneVerification(prefix) {
        const sendCodeBtn = document.getElementById(`${prefix}-send-code-btn`);
        const codeInput = document.getElementById(`${prefix}-verification-code`);
        const verifiedDiv = document.getElementById(`${prefix}-phone-verified`);
        const phoneInput = document.getElementById(`${prefix}-phone-number`);
        
        if (sendCodeBtn && codeInput && verifiedDiv && phoneInput) {
          sendCodeBtn.addEventListener('click', function() {
            const phone = phoneInput.value.trim();
            if (!phone) {
              alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
            
            // é€ä¿¡ä¸­çŠ¶æ…‹ã‚’è¡¨ç¤º
            const originalBtnText = sendCodeBtn.textContent;
            sendCodeBtn.disabled = true;
            sendCodeBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> é€ä¿¡ä¸­...';
            
            // é€ä¿¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1ç§’å¾Œï¼‰
            setTimeout(() => {
              sendCodeBtn.disabled = false;
              sendCodeBtn.textContent = originalBtnText;
              alert('ãƒ†ã‚¹ãƒˆç”¨èªè¨¼ã‚³ãƒ¼ãƒ‰: 123456');
              codeInput.value = '123456';
            }, 1000);
          });
          
          // èªè¨¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
          const verifyContainer = document.createElement('div');
          verifyContainer.className = 'mt-3';
          const verifyButton = document.createElement('button');
          verifyButton.type = 'button';
          verifyButton.className = 'btn btn-success';
          verifyButton.textContent = 'èªè¨¼ã™ã‚‹';
          verifyButton.id = `${prefix}-verify-code-btn`;
          verifyContainer.appendChild(verifyButton);
          
          const codeContainer = document.getElementById(`${prefix}-verification-code-container`);
          if (codeContainer && !document.getElementById(`${prefix}-verify-code-btn`)) {
            codeContainer.appendChild(verifyContainer);
          }
          
          // èªè¨¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
          verifyButton.addEventListener('click', function() {
            const code = codeInput.value.trim();
            if (!code) {
              alert('èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
            
            // èªè¨¼ä¸­çŠ¶æ…‹ã‚’è¡¨ç¤º
            const originalBtnText = verifyButton.textContent;
            verifyButton.disabled = true;
            verifyButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> èªè¨¼ä¸­...';
            
            // èªè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1ç§’å¾Œï¼‰
            setTimeout(() => {
              if (code === '123456') {
                verifiedDiv.classList.remove('d-none');
                phoneInput.readOnly = true;
                sendCodeBtn.disabled = true;
                verifyButton.disabled = true;
                
                // èªè¨¼æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                alert('é›»è©±ç•ªå·ãŒèªè¨¼ã•ã‚Œã¾ã—ãŸ');
                
                // èªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›æ¬„ã‚’éè¡¨ç¤ºã«
                setTimeout(() => {
                  if (codeContainer) {
                    codeContainer.style.display = 'none';
                  }
                }, 1500);
              } else {
                verifyButton.disabled = false;
                verifyButton.textContent = originalBtnText;
                alert('èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
              }
            }, 1000);
          });
          
          // å…¥åŠ›æ™‚ã®è‡ªå‹•æ¤œè¨¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
          codeInput.addEventListener('input', function() {
            // 6æ¡ã®èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒå…¥åŠ›ã•ã‚ŒãŸã‚‰èªè¨¼ãƒœã‚¿ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            if (this.value.length === 6) {
              verifyButton.classList.add('btn-pulse');
            } else {
              verifyButton.classList.remove('btn-pulse');
            }
          });
        }
      }
      
      // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      const touristForm = document.getElementById('tourist-register-form');
      const guideForm = document.getElementById('guide-register-form');
      const loginForm = document.getElementById('login-form');
      
      if (touristForm) {
        touristForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // é›»è©±ç•ªå·èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ¢ç”¨ã«ç°¡ç•¥åŒ–ï¼‰
          const phoneVerified = document.getElementById('tourist-phone-verified');
          if (phoneVerified.classList.contains('d-none')) {
            // ãƒ‡ãƒ¢ç”¨ï¼šé›»è©±ç•ªå·ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚Œã°è‡ªå‹•èªè¨¼
            const phoneNumber = document.getElementById('tourist-phone-number').value;
            if (phoneNumber && phoneNumber.length >= 10) {
              phoneVerified.classList.remove('d-none');
            } else {
              alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
              return;
            }
          }
          
          // èº«åˆ†è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ¢ç”¨ã«ç°¡ç•¥åŒ–ï¼‰
          const touristIdType = document.getElementById('tourist-id-type').value;
          if (!touristIdType) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„');
            return;
          }
          
          const touristIdFront = document.getElementById('tourist-id-front');
          if (!touristIdFront.files || touristIdFront.files.length === 0) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è£é¢ãŒå¿…è¦ãªå ´åˆã¯ç¢ºèªï¼ˆé‹è»¢å…è¨±è¨¼ã¨ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã®ã¿ï¼‰
          const touristIdBack = document.getElementById('tourist-id-back');
          if ((touristIdType === 'drivers_license' || touristIdType === 'my_number') && 
              (!touristIdBack.files || touristIdBack.files.length === 0)) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è¦³å…‰å®¢ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆãƒ»ä¿å­˜
          const touristData = {
            id: 'tourist_' + Date.now(),
            name: document.getElementById('tourist-name').value,
            email: document.getElementById('tourist-email').value,
            phone: document.getElementById('tourist-phone-number').value,
            idType: document.getElementById('tourist-id-type').value,
            registrationDate: new Date().toISOString(),
            isVerified: true
          };
          
          // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
          localStorage.setItem('touristData', JSON.stringify(touristData));
          sessionStorage.setItem('currentUser', JSON.stringify(touristData));
          
          // ç™»éŒ²å®Œäº†ã¨æ©Ÿèƒ½ã‚¢ãƒ³ãƒ­ãƒƒã‚¯é€šçŸ¥ã‚’è¡¨ç¤º
          showTouristRegistrationSuccess(touristData);
          
          // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
          const modal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
          modal.hide();
          
          // ä¿å­˜ã•ã‚Œã¦ã„ãŸã‚¬ã‚¤ãƒ‰IDã‚’å–å¾—
          const pendingGuideId = sessionStorage.getItem('pendingGuideId');
          
          // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒšãƒ¼ã‚¸ã«è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
          setTimeout(() => {
            if (pendingGuideId) {
              sessionStorage.removeItem('pendingGuideId');
              window.location.href = `guide-details.html?id=${pendingGuideId}`;
            } else {
              // ã‚¬ã‚¤ãƒ‰IDãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ãƒ›ãƒ¼ãƒ ã®äººæ°—ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
              document.getElementById('guides').scrollIntoView({ behavior: 'smooth' });
            }
          }, 500);
        });
      }
      
      if (guideForm) {
        guideForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // é›»è©±ç•ªå·èªè¨¼ãƒã‚§ãƒƒã‚¯
          if (document.getElementById('guide-phone-verified').classList.contains('d-none')) {
            alert('é›»è©±ç•ªå·èªè¨¼ã‚’å®Œäº†ã—ã¦ãã ã•ã„');
            return;
          }
          
          // èº«åˆ†è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
          const guideIdFront = document.getElementById('guide-id-front');
          if (!guideIdFront.files || guideIdFront.files.length === 0) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è£é¢ãŒå¿…è¦ãªå ´åˆã¯ç¢ºèª
          const guideIdType = document.getElementById('guide-id-type').value;
          const guideIdBack = document.getElementById('guide-id-back');
          if ((guideIdType === 'drivers_license' || guideIdType === 'my_number') && 
              (!guideIdBack.files || guideIdBack.files.length === 0)) {
            alert('èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè£é¢ï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
            return;
          }
          
          // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¯å°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆguide_registration_handler.jsï¼‰ã§è¡Œã„ã¾ã™
          
          // ã™ã¹ã¦ã®æ¤œè¨¼ã«é€šéã—ãŸå ´åˆ
          alert('ç™»éŒ²ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚èº«åˆ†è¨¼æ˜æ›¸ã®ç¢ºèªå¾Œã«æ‰¿èªã•ã‚Œã¾ã™ã€‚');
          const modal = bootstrap.Modal.getInstance(document.getElementById('registerGuideModal'));
          modal.hide();
        });
      }
      
      // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const userType = document.querySelector('input[name="login-user-type"]:checked').value;
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-password').value;
          
          if (!email || !password) {
            alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            return;
          }
          
          // è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
          if (userType === 'tourist') {
            handleTouristLogin(email, password);
          } else {
            // ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ã¯åˆ¥é€”å®Ÿè£…
            alert('ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™');
          }
        });
      }
      
      // ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
      window.handleGuideDetailsClick = function(guideId) {
        // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        const touristData = localStorage.getItem('touristData');
        
        if (touristData) {
          // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»
          window.location.replace(`guide-details.html?id=${guideId}`);
          return;
        }
        
        // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        sessionStorage.setItem('pendingGuideId', guideId);
        showTouristLoginPrompt(guideId);
      };

      // ã‚¬ã‚¤ãƒ‰è©³ç´°é–²è¦§ã«ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤ºï¼ˆæ—§é–¢æ•°ã€äº’æ›æ€§ã®ãŸã‚ï¼‰
      function showLoginRequirement(guideId) {
        handleGuideDetailsClick(guideId);
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºï¼ˆç„¡åŠ¹åŒ–ï¼‰
      function showTouristLoginPrompt(guideId) {
        // ã“ã®æ©Ÿèƒ½ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - æ–°ã—ã„èªè¨¼ãƒ•ãƒ­ãƒ¼ã‚’ä½¿ç”¨
        console.log('showTouristLoginPrompt ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™');
        return;
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‹•çš„ä½œæˆ
      function createTouristLoginPromptModal() {
        const modalHTML = `
          <div class="modal fade" id="touristLoginPromptModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                  <h5 class="modal-title">
                    <i class="bi bi-shield-lock me-2"></i>ã‚¬ã‚¤ãƒ‰è©³ç´°ã®é–²è¦§ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™
                  </h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                  <div class="mb-4">
                    <i class="bi bi-person-check-fill text-primary" style="font-size: 3rem;"></i>
                  </div>
                  <h4 class="mb-3">å®‰å…¨ã§ä¿¡é ¼ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ãŸã‚ã«</h4>
                  <p class="lead mb-4">
                    ã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚„äºˆç´„æ©Ÿèƒ½ã‚’ã”åˆ©ç”¨ã„ãŸã ãã«ã¯ã€è¦³å…‰å®¢ã¨ã—ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚
                  </p>
                  <div class="alert alert-info">
                    <strong>ãªãœãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ãªã®ã‹ï¼Ÿ</strong><br>
                    â€¢ ãŠå®¢æ§˜ã¨ã‚¬ã‚¤ãƒ‰ã®å®‰å…¨ç¢ºä¿<br>
                    â€¢ ä¿¡é ¼æ€§ã®é«˜ã„ãƒãƒƒãƒãƒ³ã‚°<br>
                    â€¢ äºˆç´„å±¥æ­´ã®ç®¡ç†<br>
                    â€¢ å“è³ªå‘ä¸Šã®ãŸã‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                  </div>
                  <p id="selectedGuideInfo" class="text-muted small"></p>
                </div>
                <div class="modal-footer justify-content-center">
                  <button type="button" class="btn btn-primary btn-lg me-3" onclick="showTouristRegistration()">
                    <i class="bi bi-person-plus me-1"></i>æ–°è¦ç™»éŒ²ï¼ˆæ¨å¥¨ï¼‰
                  </button>
                  <button type="button" class="btn btn-outline-primary btn-lg" onclick="showExistingLogin()">
                    <i class="bi bi-box-arrow-in-right me-1"></i>æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHTML);
      }

      // æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
      function showTouristRegistration() {
        // ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('touristLoginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const registerModal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          registerModal.show();
        }, 300);
      }

      // æ—¢å­˜ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
      function showExistingLogin() {
        // ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('touristLoginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          // è¦³å…‰å®¢ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’é¸æŠ
          document.getElementById('login-user-tourist').checked = true;
          loginModal.show();
        }, 300);
      }

      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ï¼ˆçµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ç§»ç®¡æ¸ˆã¿ï¼‰
      function handleTouristLogin(email, password) {
        console.log('æ—§ãƒ­ã‚°ã‚¤ãƒ³é–¢æ•°ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨');
        return;
      }
      
      // è¦³å…‰å®¢èªè¨¼æƒ…å ±ã®æ¤œè¨¼ï¼ˆçµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ç§»ç®¡æ¸ˆã¿ï¼‰
      function isValidTouristCredentials(email, password) {
        console.log('æ—§èªè¨¼é–¢æ•°ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ - çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨');
        return false;
      }
      
      // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰åå‰ã‚’æŠ½å‡º
      function extractNameFromEmail(email) {
        const localPart = email.split('@')[0];
        return localPart.charAt(0).toUpperCase() + localPart.slice(1);
      }
      
      /**
       * è¦³å…‰å®¢ç™»éŒ²æˆåŠŸæ™‚ã®åŒ…æ‹¬çš„ãªé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
       * ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’è©³ç´°ã«èª¬æ˜
       */
      function showTouristRegistrationSuccess(userData) {
        // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
        if (registerModal) {
          registerModal.hide();
        }
        
        // æˆåŠŸé€šçŸ¥ãƒ¢ãƒ¼ãƒ€ãƒ«ã®HTML
        const successModalHTML = `
          <div class="modal fade show" id="touristSuccessModal" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content border-0 shadow-lg" style="border-radius: 20px;">
                <div class="modal-header border-0 pb-0" style="background: linear-gradient(135deg, #28a745, #20c997); border-radius: 20px 20px 0 0;">
                  <div class="w-100 text-center text-white">
                    <div class="mb-3">
                      <i class="bi bi-check-circle-fill" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="modal-title fw-bold mb-2">ç™»éŒ²å®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h3>
                    <p class="mb-0">${userData.name}æ§˜ã€TomoTripã¸ã‚ˆã†ã“ã</p>
                  </div>
                </div>
                <div class="modal-body px-4 py-4">
                  <div class="alert alert-success border-0 mb-4" style="background: linear-gradient(135deg, #d4edda, #c3e6cb);">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-shield-check text-success me-2" style="font-size: 1.5rem;"></i>
                      <div>
                        <strong>èªè¨¼å®Œäº†</strong><br>
                        <small>é›»è©±ç•ªå·ã¨èº«åˆ†è¨¼æ˜æ›¸ã®èªè¨¼ãŒå®Œäº†ã—ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™</small>
                      </div>
                    </div>
                  </div>
                  
                  <h5 class="mb-3 text-primary">
                    <i class="bi bi-unlock-fill me-2"></i>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸæ©Ÿèƒ½
                  </h5>
                  
                  <div class="row">
                    <div class="col-md-6">
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-person-lines-fill" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ã‚¬ã‚¤ãƒ‰è©³ç´°ã®é–²è¦§</h6>
                            <p class="small text-muted mb-0">ã™ã¹ã¦ã®ã‚¬ã‚¤ãƒ‰ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€çµŒæ­´ã€æ–™é‡‘è©³ç´°ã‚’ç¢ºèªã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-calendar-plus" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ã‚¬ã‚¤ãƒ‰äºˆç´„æ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">å¸Œæœ›ã®æ—¥æ™‚ã§ã‚¬ã‚¤ãƒ‰ã‚’äºˆç´„ã—ã€ç‰¹åˆ¥ãªä½“é¨“ã‚’æ¥½ã—ã‚ã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-chat-dots" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">ã‚¬ã‚¤ãƒ‰ã¨ç›´æ¥ã‚„ã‚Šå–ã‚Šã—ã¦è©³ç´°ãªç›¸è«‡ãŒã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="col-md-6">
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-heart" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½</h6>
                            <p class="small text-muted mb-0">æ°—ã«ãªã‚‹ã‚¬ã‚¤ãƒ‰ã‚’ä¿å­˜ã—ã¦å¾Œã‹ã‚‰ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-star" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿</h6>
                            <p class="small text-muted mb-0">ä½“é¨“å¾Œã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¦ä»–ã®è¦³å…‰å®¢ã‚’ã‚µãƒãƒ¼ãƒˆ</p>
                          </div>
                        </div>
                      </div>
                      
                      <div class="feature-card p-3 mb-3 border rounded" style="background: #f8f9fa;">
                        <div class="d-flex align-items-start">
                          <div class="feature-icon me-3 text-primary">
                            <i class="bi bi-credit-card" style="font-size: 1.5rem;"></i>
                          </div>
                          <div>
                            <h6 class="fw-bold mb-1">å®‰å…¨ãªæ±ºæ¸ˆ</h6>
                            <p class="small text-muted mb-0">ã‚»ã‚­ãƒ¥ã‚¢ãªæ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ã§å®‰å¿ƒã—ã¦ãŠæ”¯æ‰•ã„ã§ãã¾ã™</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="alert alert-info border-0 mt-4" style="background: linear-gradient(135deg, #d1ecf1, #bee5eb);">
                    <div class="d-flex">
                      <i class="bi bi-info-circle text-info me-2 flex-shrink-0"></i>
                      <div>
                        <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong><br>
                        <small>ä»Šã™ããŠå¥½ã¿ã®ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã¤ã‘ã¦ã€æ—¥æœ¬ã§ã®ç´ æ™´ã‚‰ã—ã„ä½“é¨“ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</small>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer border-0 pt-0">
                  <div class="w-100 d-flex justify-content-center gap-3">
                    <button type="button" class="btn btn-success btn-lg px-4" onclick="exploreGuides()">
                      <i class="bi bi-search me-2"></i>ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã™
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-lg" onclick="closeSuccessModal()">
                      å¾Œã§è¦‹ã‚‹
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // æ—¢å­˜ã®æˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‰Šé™¤
        const existingModal = document.getElementById('touristSuccessModal');
        if (existingModal) {
          existingModal.remove();
        }
        
        // æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
        document.body.insertAdjacentHTML('beforeend', successModalHTML);
        
        // 5ç§’å¾Œã«è‡ªå‹•ã§ã‚¬ã‚¤ãƒ‰æ¢ç´¢ã‚’ä¿ƒã™ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        setTimeout(() => {
          const exploreBtn = document.querySelector('#touristSuccessModal .btn-success');
          if (exploreBtn) {
            exploreBtn.classList.add('animate__animated', 'animate__pulse');
          }
        }, 5000);
      }
      
      /**
       * ã‚¬ã‚¤ãƒ‰æ¢ç´¢ã«ç§»å‹•
       */
      window.exploreGuides = function() {
        closeSuccessModal();
        // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã®ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        document.getElementById('guides').scrollIntoView({ behavior: 'smooth' });
        
        // å°‘ã—é…å»¶ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º
        setTimeout(() => {
          if (typeof window.showFilterHint === 'function') {
            window.showFilterHint();
          }
        }, 1000);
      }
      
      /**
       * æˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
       */
      window.closeSuccessModal = function() {
        const modal = document.getElementById('touristSuccessModal');
        if (modal) {
          modal.style.display = 'none';
          modal.remove();
        }
      }
      
      // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡å‡¦ç†
      const contactForm = document.getElementById('contact-form');
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          alert('ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ‹…å½“è€…ã‹ã‚‰ã®è¿”ä¿¡ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚');
          const modal = bootstrap.Modal.getInstance(document.getElementById('contactModal'));
          modal.hide();
        });
      }
      
      // ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã®æ©Ÿèƒ½è¿½åŠ 
      const loadMoreButton = document.getElementById('load-more-guides');
      if (loadMoreButton) {
        loadMoreButton.addEventListener('click', function() {
          // éè¡¨ç¤ºã®ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹
          const hiddenGuides = document.querySelectorAll('.hidden-guide');
          hiddenGuides.forEach(guide => {
            guide.classList.remove('hidden-guide');
            // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            guide.style.opacity = 0;
            guide.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
              guide.style.opacity = 1;
            }, 50);
          });
          
          // ã™ã¹ã¦è¡¨ç¤ºã—ãŸã‚‰ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
          if (hiddenGuides.length > 0) {
            this.textContent = 'ã™ã¹ã¦è¡¨ç¤ºã—ã¾ã—ãŸ';
            this.disabled = true;
            setTimeout(() => {
              this.style.display = 'none';
            }, 2000);
          }
        });
      }
      
      // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
      const guideProfilePhoto = document.getElementById('guide-profile-photo');
      const guideProfilePreview = document.getElementById('guide-profile-preview');
      const profilePhotoContainer = document.querySelector('.profile-photo-container');
      
      if (guideProfilePhoto && guideProfilePreview) {
        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        guideProfilePhoto.addEventListener('change', function(e) {
          if (this.files && this.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
              guideProfilePreview.src = e.target.result;
            }
            
            reader.readAsDataURL(this.files[0]);
          }
        });
        
        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’é–‹ã
        if (profilePhotoContainer) {
          profilePhotoContainer.addEventListener('click', function() {
            guideProfilePhoto.click();
          });
        }
      }
      
      // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
      document.addEventListener('click', function(e) {
        // è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆï¼ˆè¤‡æ•°ã®æ¡ä»¶ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
        const isDetailsButton = e.target.classList.contains('guide-details-link') ||
                               (e.target.classList.contains('btn-outline-primary') && 
                                (e.target.textContent.includes('è©³ç´°ã‚’è¦‹ã‚‹') || e.target.textContent.includes('See Details'))) ||
                               e.target.hasAttribute('data-guide-id');
        
        if (isDetailsButton) {
          e.preventDefault();
          // ã‚¬ã‚¤ãƒ‰IDã‚’å–å¾—
          let guideId = e.target.getAttribute('data-guide-id');
          if (!guideId) {
            const guideCard = e.target.closest('.guide-card');
            if (guideCard) {
              guideId = guideCard.getAttribute('data-guide-id');
            }
          }
          
          if (!guideId) {
            alert('ã‚¬ã‚¤ãƒ‰IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
          }
          
          // è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã‹ãƒã‚§ãƒƒã‚¯
          const touristData = localStorage.getItem('touristData');
          console.log('ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚¯ãƒªãƒƒã‚¯ - èªè¨¼ãƒ‡ãƒ¼ã‚¿:', touristData);
          
          if (touristData) {
            try {
              const userData = JSON.parse(touristData);
              console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿:', userData);
              if (userData && userData.type === 'tourist') {
                // è¦³å…‰å®¢ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãªã‚‰è©³ç´°ãƒšãƒ¼ã‚¸ã¸ç§»å‹•
                console.log('èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ - è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»');
                window.location.href = `guide-details.html?id=${guideId}`;
                return;
              }
            } catch (e) {
              console.log('èªè¨¼ãƒ‡ãƒ¼ã‚¿è§£æã‚¨ãƒ©ãƒ¼:', e);
            }
          }
          
          // æœªãƒ­ã‚°ã‚¤ãƒ³ã¾ãŸã¯ç„¡åŠ¹ãªèªè¨¼ãƒ‡ãƒ¼ã‚¿ã®å ´åˆ - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
          console.log('æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ - ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º');
          localStorage.removeItem('touristData');
          sessionStorage.removeItem('currentUser');
          sessionStorage.setItem('pendingGuideId', guideId);
          showTouristLoginPrompt(guideId);
        }
      });
      
      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ã‚’ä¿ƒã™ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
      function showTouristLoginPrompt(guideId) {
        console.log('è¦³å…‰å®¢ç™»éŒ²ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º:', guideId);
        
        // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ä½œæˆ
        const modalHTML = `
          <div class="modal fade" id="loginPromptModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header border-0 text-center pb-0">
                  <div class="w-100">
                    <i class="bi bi-lock-fill text-warning" style="font-size: 3rem;"></i>
                    <h4 class="modal-title mt-3">ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™</h4>
                  </div>
                </div>
                <div class="modal-body text-center">
                  <p class="mb-4">é¸æŠã•ã‚ŒãŸã‚¬ã‚¤ãƒ‰ã®è©³ç´°æƒ…å ±ã‚’è¦‹ã‚‹ã«ã¯ã€è¦³å…‰å®¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚</p>
                  
                  <div class="alert alert-info mb-4">
                    <i class="bi bi-info-circle me-2"></i>
                    <strong>åˆå›ã”åˆ©ç”¨ã®æ–¹ã¸ï¼š</strong><br>
                    ã¾ã ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„å ´åˆã¯ã€æ–°è¦ç™»éŒ²ï¼ˆç„¡æ–™ï¼‰ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚ç™»éŒ²å¾Œã€ã™ãã«ã‚¬ã‚¤ãƒ‰è©³ç´°ã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚
                  </div>
                  
                  <div class="bg-light rounded p-3 mb-4">
                    <h6 class="mb-2">ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ã§ãã‚‹ã“ã¨</h6>
                    <div class="text-start small">
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ã‚¬ã‚¤ãƒ‰ã®è©³ç´°ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–²è¦§</div>
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ã‚¬ã‚¤ãƒ‰ã¨ã®ç›´æ¥äºˆç´„ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
                      <div class="mb-1"><i class="bi bi-check-circle-fill text-success me-2"></i>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é–²è¦§ãƒ»æŠ•ç¨¿</div>
                      <div><i class="bi bi-check-circle-fill text-success me-2"></i>ãŠæ°—ã«å…¥ã‚Šã‚¬ã‚¤ãƒ‰ã®ä¿å­˜</div>
                    </div>
                  </div>
                  
                  <div class="d-grid gap-2">
                    <button type="button" class="btn btn-success btn-lg" onclick="showTouristRegistration()">
                      <i class="bi bi-person-plus me-2"></i>æ–°è¦ç™»éŒ²ï¼ˆç„¡æ–™ãƒ»1åˆ†ã§å®Œäº†ï¼‰
                    </button>
                    <button type="button" class="btn btn-outline-primary" onclick="showTouristLogin()">
                      <i class="bi bi-box-arrow-in-right me-2"></i>æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
                    </button>
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                      å¾Œã§åˆ©ç”¨ã™ã‚‹
                    </button>
                  </div>
                  
                  <div class="mt-3 border-top pt-3">
                    <div class="d-flex align-items-center justify-content-center">
                      <i class="bi bi-shield-check text-success me-2"></i>
                      <small class="text-muted">å®‰å…¨ã§ç°¡å˜ãªç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹</small>
                    </div>
                    <div class="small text-muted mt-1">
                      æ–°è¦ç™»éŒ²ã¯å®Œå…¨ç„¡æ–™ã§ã™ã€‚ãƒ¡ãƒ¼ãƒ«èªè¨¼ã®ã¿ã§ã€ã™ãã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‰Šé™¤
        const existingModal = document.getElementById('loginPromptModal');
        if (existingModal) {
          existingModal.remove();
        }
        
        // æ–°ã—ã„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        const modal = new bootstrap.Modal(document.getElementById('loginPromptModal'));
        modal.show();
      }
      
      // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ã‚’è¡¨ç¤º
      window.showTouristLogin = function() {
        // ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('loginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          loginModal.show();
        }, 300);
      };
      
      // è¦³å…‰å®¢æ–°è¦ç™»éŒ²ã‚’è¡¨ç¤º
      window.showTouristRegistration = function() {
        // ãƒ­ã‚°ã‚¤ãƒ³ä¿ƒé€²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        const promptModal = bootstrap.Modal.getInstance(document.getElementById('loginPromptModal'));
        if (promptModal) {
          promptModal.hide();
        }
        
        // è¦³å…‰å®¢ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        setTimeout(() => {
          const registerModal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          registerModal.show();
        }, 300);
      };

      // ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆãƒšãƒ¼ã‚¸ã‹ã‚‰æˆ»ã£ã¦ããŸå ´åˆã®å‡¦ç†
      const shouldOpenLogin = sessionStorage.getItem('openLoginAfterReturn');
      if (shouldOpenLogin === 'true') {
        sessionStorage.removeItem('openLoginAfterReturn');
        
        // å°‘ã—é…å»¶ã—ã¦ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        setTimeout(() => {
          const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
          loginModal.show();
        }, 500);
      }
    });
  </script>
  
  <!-- åŒ…æ‹¬çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="comprehensive-filter.js"></script>
  
  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="filter-tutorial.js"></script>
  
  <!-- ç™»éŒ²ãƒœã‚¿ãƒ³ä¿®æ­£ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="registration-fix.js"></script>
  
  <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ - ã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£… -->
  <script src="minimal-language.js"></script>
  
  <!-- å°‚ç”¨ãƒœã‚¿ãƒ³ç¿»è¨³æ©Ÿèƒ½ -->
  <script src="button-translator.js"></script>
  
  <!-- çµ±ä¸€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ  -->
  <script src="unified-auth-system.js"></script>
  
  <!-- èªè¨¼ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ -->
  <script src="auth-test-helper.js"></script>
  
  <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã®å°‚ç”¨ç¿»è¨³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="benefits-translator.js"></script>
  <script src="dropdown-translator.js"></script>
  <script src="direct-benefit-card-translator.js"></script>
  <script src="benefit-html-inspector.js"></script>
  <script src="guide-cards-translator.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ç™»éŒ²å‡¦ç† -->
  <script src="guide_registration_handler.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ -->
  <!-- ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ»è¡¨ç¤ºã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="generate-guide-data.js"></script>
  <script src="add-guide-data.js"></script>
  <script src="guide-login.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ« -->
  <script src="guide-login-debug.js"></script>
  
  <!-- è¦³å…‰å®¢ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ -->

  
  <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ -->
  <script src="session-debugger.js"></script>
  
  <!-- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡æ©Ÿèƒ½ -->

  
  <!-- ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®æœ€é©åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ - å„ç’°å¢ƒã§ã®ã¿å®Ÿè¡Œ -->
  <script src="smartphones.js"></script>
  <script src="desktop-fixes.js"></script>
  
  <!-- å…±æœ‰è¨€èªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ - è¨€èªè¨­å®šã®ä¿å­˜ã¨å¾©å…ƒ -->
  <script src="shared-language-utils.js"></script>
  
  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
  <script src="navigation-buttons.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ã‚¿ã‚°è¡¨ç¤º -->
  <script src="guide-tags-display.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿API (æ–°æ©Ÿèƒ½) -->
  <script src="guide-data-storage-api.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ– (æ–°æ©Ÿèƒ½) -->
  <script src="initialize-guide-data.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºå™¨ (ä¿®æ­£ç‰ˆ) -->
  <script src="guide-card-extractor.js"></script>
  
  <!-- ã‚¬ã‚¤ãƒ‰è©³ç´°ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->
  <script src="guide-details-data.js"></script>
  <script src="data-reset.js"></script>
  <script src="password-toggle.js"></script>
  
  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®èª­ã¿è¾¼ã¿ -->
  <div id="modals-container"></div>
  <script src="auto-fill-system.js"></script>
  <script src="load-70-guides.js"></script>
  <script src="filter-toggle.js"></script>
  
  <script>
    // ãƒ¢ãƒ¼ãƒ€ãƒ«HTMLã‚’èª­ã¿è¾¼ã‚€
    fetch('modals.html')
      .then(response => response.text())
      .then(html => {
        document.getElementById('modals-container').innerHTML = html;
        initializeRegistrationModals();
      })
      .catch(error => console.error('ãƒ¢ãƒ¼ãƒ€ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error));

    // ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«åˆæœŸåŒ–
    function initializeRegistrationModals() {
      // æ–°è¦ç™»éŒ²ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ã®é·ç§»
      const guideRegisterLinks = document.querySelectorAll('[data-bs-target="#registerGuideModal"]');
      const touristRegisterLinks = document.querySelectorAll('[data-bs-target="#registerTouristModal"]');
      
      guideRegisterLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const modal = new bootstrap.Modal(document.getElementById('registerGuideModal'));
          modal.show();
        });
      });
      
      touristRegisterLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const modal = new bootstrap.Modal(document.getElementById('registerTouristModal'));
          modal.show();
        });
      });

      // ã‚¬ã‚¤ãƒ‰ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const submitGuideBtn = document.getElementById('submitGuideRegistration');
      if (submitGuideBtn) {
        submitGuideBtn.addEventListener('click', function() {
          handleGuideRegistration();
        });
      }

      // è¦³å…‰å®¢ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
      const submitTouristBtn = document.getElementById('submitTouristRegistration');
      if (submitTouristBtn) {
        submitTouristBtn.addEventListener('click', function() {
          handleTouristRegistration();
        });
      }
    }

    // ã‚¬ã‚¤ãƒ‰ç™»éŒ²å‡¦ç†
    function handleGuideRegistration() {
      const form = document.getElementById('guideRegistrationForm');
      const formData = new FormData(form);
      
      const name = formData.get('name');
      const email = formData.get('email');
      const sessionFee = formData.get('sessionFee');
      
      if (!name || !email) {
        showNotification('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        return;
      }
      
      if (sessionFee < 6000) {
        showNotification('ã‚»ãƒƒã‚·ãƒ§ãƒ³æ–™é‡‘ã¯æœ€ä½Â¥6,000ä»¥ä¸Šã«è¨­å®šã—ã¦ãã ã•ã„', 'error');
        return;
      }

      const languages = Array.from(form.querySelectorAll('input[name="languages"]:checked')).map(cb => cb.value);
      if (languages.length === 0) {
        showNotification('å¯¾å¿œè¨€èªã‚’å°‘ãªãã¨ã‚‚1ã¤é¸æŠã—ã¦ãã ã•ã„', 'error');
        return;
      }

      const verifyStatus = document.getElementById('verifyStatus');
      if (verifyStatus && verifyStatus.textContent !== 'èªè¨¼æ¸ˆã¿') {
        showNotification('é›»è©±ç•ªå·èªè¨¼ã‚’å®Œäº†ã—ã¦ãã ã•ã„', 'error');
        return;
      }

      showNotification('ã‚¬ã‚¤ãƒ‰ç™»éŒ²ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚å¯©æŸ»å®Œäº†ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚', 'success');
      
      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('registerGuideModal'));
        if (modal) {
          modal.hide();
        }
      }, 2000);
    }

    // è¦³å…‰å®¢ç™»éŒ²å‡¦ç†
    function handleTouristRegistration() {
      const form = document.getElementById('touristRegistrationForm');
      const formData = new FormData(form);
      
      const name = formData.get('name');
      const email = formData.get('email');
      const password = formData.get('password');
      
      if (!name || !email || !password) {
        showNotification('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
        return;
      }
      
      showNotification('è¦³å…‰å®¢ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã‚¬ã‚¤ãƒ‰ã‚’æ¢ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼', 'success');
      
      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('registerTouristModal'));
        if (modal) {
          modal.hide();
        }
      }, 2000);
    }

    // é€šçŸ¥è¡¨ç¤ºé–¢æ•°
    function showNotification(message, type = 'info') {
      let alertContainer = document.getElementById('alert-container');
      if (!alertContainer) {
        alertContainer = document.createElement('div');
        alertContainer.id = 'alert-container';
        alertContainer.style.cssText = 'position: fixed; top: 20px; right: 20px; max-width: 400px; z-index: 9999;';
        document.body.appendChild(alertContainer);
      }
      
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} alert-dismissible fade show`;
      alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `;
      
      alertContainer.appendChild(alertDiv);
      
      setTimeout(() => {
        if (alertDiv.parentNode) {
          alertDiv.remove();
        }
      }, 5000);
    }
  </script>

  <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal fade" id="filterTutorialModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title">
            <i class="bi bi-funnel text-primary me-2"></i>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã®ä½¿ã„æ–¹
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="tutorial-content">
            <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
            <div class="tutorial-step mb-4" data-step="1">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">1</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é–‹ã</h6>
                  <p class="text-muted mb-2">ã€Œã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç”»é¢ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-outline-primary" disabled>
                      <i class="bi bi-funnel"></i> ã‚¬ã‚¤ãƒ‰ã‚’çµã‚Šè¾¼ã¿
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
            <div class="tutorial-step mb-4" data-step="2">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">2</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">æ¡ä»¶ã‚’é¸æŠ</h6>
                  <p class="text-muted mb-2">åœ°åŸŸã€è¨€èªã€æ–™é‡‘ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãªã©ã€ãŠå¥½ã¿ã®æ¡ä»¶ã‚’é¸æŠã§ãã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <div class="row g-2">
                      <div class="col-6">
                        <select class="form-select form-select-sm" disabled>
                          <option>åœ°åŸŸã‚’é¸æŠ</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <select class="form-select form-select-sm" disabled>
                          <option>è¨€èªã‚’é¸æŠ</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
            <div class="tutorial-step mb-4" data-step="3">
              <div class="d-flex align-items-start">
                <div class="step-number bg-primary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">3</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨</h6>
                  <p class="text-muted mb-2">ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨ã€ãƒœã‚¿ãƒ³ã§æ¤œç´¢çµæœãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-primary btn-sm" disabled>
                      <i class="bi bi-search"></i> ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨
                    </button>
                    <button class="btn btn-outline-secondary btn-sm ms-2" disabled>
                      <i class="bi bi-arrow-clockwise"></i> ãƒªã‚»ãƒƒãƒˆ
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚¹ãƒ†ãƒƒãƒ—4 -->
            <div class="tutorial-step mb-4" data-step="4">
              <div class="d-flex align-items-start">
                <div class="step-number bg-secondary text-white rounded-circle d-flex justify-content-center align-items-center me-3" style="width: 30px; height: 30px; font-size: 14px; font-weight: bold;">4</div>
                <div class="flex-grow-1">
                  <h6 class="fw-bold mb-2">ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã«ã¤ã„ã¦</h6>
                  <p class="text-muted mb-2">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸå¾Œã¯ã€æœ€åˆã®3åã®ã‚¬ã‚¤ãƒ‰ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                  <div class="tutorial-visual p-3 bg-light rounded">
                    <button class="btn btn-primary btn-sm" disabled>ã‚‚ã£ã¨è¦‹ã‚‹</button>
                    <div class="small text-muted mt-2">
                      â†‘ ã“ã®ãƒœã‚¿ãƒ³ã§æ®‹ã‚Šã®ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã§ãã¾ã™
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ãƒ’ãƒ³ãƒˆ -->
            <div class="alert alert-info border-0" style="background: linear-gradient(135deg, #e3f2fd, #f0f9ff);">
              <div class="d-flex">
                <i class="bi bi-lightbulb text-info me-2 flex-shrink-0" style="font-size: 1.2em;"></i>
                <div>
                  <h6 class="fw-bold mb-1 text-info">ä¾¿åˆ©ãªãƒ’ãƒ³ãƒˆ</h6>
                  <ul class="mb-0 ps-3">
                    <li class="text-muted">è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã¦çµã‚Šè¾¼ã¿ãŒã§ãã¾ã™</li>
                    <li class="text-muted">ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã§ã„ã¤ã§ã‚‚åˆæœŸçŠ¶æ…‹ã«æˆ»ã›ã¾ã™</li>
                    <li class="text-muted">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã§ã¯è¶£å‘³ã‚„å¾—æ„åˆ†é‡ã§æ¢ã›ã¾ã™</li>
                    <li class="text-muted"><strong>ãƒªã‚»ãƒƒãƒˆå¾Œã¯ã€Œã‚‚ã£ã¨è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§å…¨ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤º</strong></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer border-0 pt-0">
          <button type="button" class="btn btn-success" id="try-filter-btn">
            <i class="bi bi-play-circle me-1"></i>å®Ÿéš›ã«è©¦ã—ã¦ã¿ã‚‹
          </button>
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>