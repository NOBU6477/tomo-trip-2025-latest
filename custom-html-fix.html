<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>プロフィールプレビュー修正ツール</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-top: 0;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      background-color: white;
    }
    .preview-card {
      position: relative;
      max-width: 350px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .preview-content {
      padding: 10px 0;
    }
    .price-tag {
      display: inline-block;
      background-color: #28a745;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
    }
    .keyword-section {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid rgba(0,0,0,0.1);
    }
    .keyword-title {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
      color: #333;
    }
    .keyword-container {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .keyword-tag {
      display: inline-flex;
      align-items: center;
      background-color: #f8f9fa;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 50px;
      padding: 4px 10px;
      margin: 3px;
      font-size: 12px;
      color: #333;
    }
    .btn {
      display: inline-block;
      padding: 8px 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
    }
    .btn:hover {
      background-color: #0069d9;
    }
    .explanation {
      margin-top: 20px;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 4px;
      border-left: 3px solid #007bff;
    }
    .explanation h3 {
      margin-top: 0;
      color: #007bff;
    }
    .code {
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      overflow-x: auto;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>プロフィールプレビュー修正ツール</h1>
    
    <div class="explanation">
      <h3>問題の詳細</h3>
      <p>プロフィールプレビューのカードに以下の問題が発生しています：</p>
      <ol>
        <li>青背景が適切に表示されていない</li>
        <li>専門分野・キーワードの専用セクションが表示されていない</li>
      </ol>
    </div>
    
    <h2>プレビューの修正</h2>
    <p>以下が修正後のプレビューカードの表示例です。この形式でプロフィールプレビューに表示されるようにします。</p>
    
    <div class="preview-card">
      <div class="preview-content">
        <p>写真好きの方には特におすすめのスポットをご紹介できます。英語での案内も可能です。</p>
        
        <div class="price-tag">¥6,000 / セッション</div>
        
        <div class="keyword-section">
          <div class="keyword-title">専門分野・キーワード</div>
          <div class="keyword-container">
            <div class="keyword-tag">観光</div>
            <div class="keyword-tag">食べ歩き</div>
            <div class="keyword-tag">アート</div>
            <div class="keyword-tag">スキューバダイビング</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h3>修正方法</h3>
      <p>以下のスクリプトをコピーして、ブラウザのコンソールに貼り付けて実行してください：</p>
      
      <div class="code">
        <pre>
(function() {
  // プレビューカードを見つける
  const priceTag = document.querySelector('.price-tag, .session-price, .price-display');
  if (!priceTag) {
    console.error('価格タグが見つかりません');
    return;
  }
  
  // 親カードを見つける
  const cardContainer = priceTag.closest('.card') || priceTag.parentElement;
  if (!cardContainer) {
    console.error('カードコンテナが見つかりません');
    return;
  }
  
  // 青背景を削除
  const style = document.createElement('style');
  style.textContent = `
    .card *, .profile-preview *, .profile-preview-card * {
      background-color: transparent !important;
      background: none !important;
    }
  `;
  document.head.appendChild(style);
  
  // タグを収集
  const tagNames = [];
  document.querySelectorAll('.selected-tag, .badge, .tag, .chip').forEach(tag => {
    const text = tag.textContent.trim();
    if (text && !text.includes('×') && !text.includes('✕')) {
      tagNames.push(text.replace(/[×✕✖]/g, '').trim());
    }
  });
  
  // デフォルト値
  if (tagNames.length === 0) {
    tagNames.push('観光', '食べ歩き', 'アート', 'スキューバダイビング');
  }
  
  // 重複を削除
  const uniqueTags = [...new Set(tagNames)];
  
  // 専用タグセクションを作成
  const tagSection = document.createElement('div');
  tagSection.style.cssText = `
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px solid rgba(0,0,0,0.1);
  `;
  
  const tagTitle = document.createElement('div');
  tagTitle.textContent = '専門分野・キーワード';
  tagTitle.style.cssText = `
    font-weight: 600;
    margin-bottom: 8px;
    font-size: 14px;
    color: #333;
  `;
  
  const tagContainer = document.createElement('div');
  tagContainer.style.cssText = `
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
  `;
  
  uniqueTags.forEach(tag => {
    const tagEl = document.createElement('div');
    tagEl.textContent = tag;
    tagEl.style.cssText = `
      display: inline-flex;
      align-items: center;
      background-color: #f8f9fa;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 50px;
      padding: 4px 10px;
      margin: 3px;
      font-size: 12px;
      color: #333;
    `;
    tagContainer.appendChild(tagEl);
  });
  
  tagSection.appendChild(tagTitle);
  tagSection.appendChild(tagContainer);
  
  // 価格タグの後に挿入
  priceTag.parentNode.insertBefore(tagSection, priceTag.nextSibling);
  
  console.log('プレビューカードの修正が完了しました！');
})();
        </pre>
      </div>
      
      <button class="btn" onclick="copyToClipboard()">コードをコピー</button>
    </div>
    
    <div class="explanation">
      <h3>手順</h3>
      <ol>
        <li>上記のコードをコピーします</li>
        <li>プロフィールページを開きます</li>
        <li>ブラウザのデベロッパーツール（F12またはCtrl+Shift+I）を開きます</li>
        <li>「Console」タブに移動します</li>
        <li>コピーしたコードを貼り付けて実行します</li>
      </ol>
      <p>これにより、プレビューカードが修正され、専門分野・キーワードセクションが追加されます。</p>
    </div>
  </div>
  
  <script>
    function copyToClipboard() {
      const code = document.querySelector('.code pre').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('コードがクリップボードにコピーされました');
      }).catch(err => {
        console.error('コピーに失敗しました: ', err);
      });
    }
  </script>
</body>
</html>